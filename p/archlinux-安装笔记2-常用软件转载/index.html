<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content=" 本文出自svtter.github.io\n1 Installing Arch Linux * 1.1 Pre-Installation 是i686 架构吗（Pentium II or AMD K6-2以上）？安装方式CD? FTP？ * 1.2 Acquiring Arch Linux 从这里寻找速度最快的镜像： http://wiki.archlinux.org/index.php/Mirror * 1.3 Preparing Installation Media MD5 校验，烧录。 * 1.4 Using the CD-ROM 设置好光驱启动。 * 1.5 Common Installation Procedure o 1.5.1 Loading a non-US Keymap 用km 工具选择非英语键盘 o 1.5.2 Running Setup # /archlinux/setup o 1.5.3 Configure Network (FTP Install only) 仅适用于FTP 安装方式，CD 安装没有必要配置好网络。 o 1.5.4 Prepare Hard Drive 给磁盘分好区，root分区(/)放在主分区比较好（放到逻辑分区也可以）， 如果有 Windows 系统，那它也要占据一个主分区。个人的250G硬盘是这样分区的： # cfdisk sda1 /boot 150M xfs sda2 Windows 18G ntfs sda3 FreeBSD 32G ufs sda5 / 600M xfs sda6 SWAP 2xRam xfs (SWAP分区的大小推荐为内存大小的2倍) sda7 /var 20G xfs sda8 /tmp 5G xfs sda9 /opt 10G xfs sda10 /usr 20G xfs sda11 /home 105G xfs sda12 Files 不大于32G fat32 如果需要加密磁盘，并启用开机验证，推荐使用luks ： 通常加密 root 分区和 /home 分区 # modprobe dm-crypt # modprobe aes-i586 # cryptsetup –y luksFormat /dev/sda3 输入密码，确认。 # cryptsetup –y luksFormat /dev/sda10 输入密码，确认。 # cryptsetup luksOpen /dev/sda3 root 解开root 分区，并建立一个映射：/dev/mapping/root # cryptsetup luksOpen /dev/sda10 home 解开 /home 分区，并建立一个映射：/dev/mapping/home 参看：http://wiki.archlinux.org/index.php/LUKS_Encrypted_Root o 1.5.5 Partition Hard Drives 可以跳过了。 o 1.5.6 Set Filesystem Mountpoints 如果用luks 加密了分区，那么 / 分区需要挂载到：/dev/mapping/root； /home 需要挂载到：/dev/mapping/home. 同时选择一个合适的文件系统（JFS，XFS，Reiserfs...）。 o 1.5.7 Select Packages 至少选择 Base 安装。如果需要一个可编译环境，要选上devel和lib；如果需要ADSL拨号 或WiFi支持，要选上support。 确定后会看到所有将要安装的包，可以在这里去掉一些暂时不想安装的包。要是不清楚就 不管了，几个M的大小而已。 o 1.5.8 Install Packages 只要烧录的光碟不是太差，基本上都能正常安装的。 o 1.5.9 Configure System 配置系统是必须和关键的，应当允许hwdetect script自动检测硬件，并生成相应配置。 根据启动时的实际情况选择是否需要对RAID，LVM2，和encrypted volumes的支持，以及 其它必要的支持。 选择熟悉的编辑器后，对 /etc 下的生成的配置文件作适当的修正： rc.conf：设置时区为Asia/Hong_Kong，检查eth0的配置是合适 mkinitcpio.conf：在最后一行的HOOKS 中去除不必要的支持 hosts ：设置主机名和域名 locale.gen：设置本机要支持的locale （zh_CN.utf8,zh_CN.gbk，or zh_TW.utf8） root PassWord：为root 设置管理密码 pacman Mirrors：设置安装源。找一个高速镜像站点，比如： http://mirrors.lcuc.org.cn/archlinux/ ；http://ftp.archlinux.org/ ； http://ftp.belnet.be/packages/archlinux/ ；http://ftp.gigabit.nu/； http://archlinux.puzzle.ch ；http://mirror.cs.vt.edu/pub/ArchLinux/ ； http://ftp.heanet.ie/mirrors/ftp.archlinux.org/； http://distro.ibiblio.org/pub/linux/distributions/archlinux/ o 1.5.10 Install Kernel 略 o 1.5.11 Install Bootloader 推荐GRUB。配置好menu.lst。 如果root 分区用luks 加密过了，那么要把menu.lst 修正为： # () Arch Linux title Arch Linux root (hd0,) kernel /vmlinuz26 root=/dev/sda3 ro initrd /kernel26.img 注意：Bootloader 需要安装到MBR（即 sda 下），而不是 /boot 所在的分区（sda1）。 o 1.5.12 Exit Install 退出安装程式后，取出安装光盘。 # head -n 300 /dev/urandom | tail -n 256 >/mnt/etc/home.key # cryptsetup luksAddKey /dev/sda10 /mnt/etc/home.key 输入密码，确认。 # echo home /dev/sda10 /etc/home.key >>/mnt/etc/crypttab 开机时，用home.key 解开 /dev/sda10 # sed -i /swap/d /mnt/etc/fstab （删除fstab 文件中含有swap 的一栏） #echo swap /dev/sda2 /dev/urandom \" -c aes-cbc-essiv:sha256 -h sha256 -s 256\" &gt;&gt;/mnt/etc/crypttab # echo \"mkswap /dev/mapper/swap\" &gt;&gt;/mnt/etc/rc.local 以上两个命令是设置swap 加密分区。 另外直接在/etc/crypttab 中加入如下内容也起相同作用： swap /dev/sda2 swap -c aes-cbc-essiv:sha256 -h sha256 -s 256 # reboot 2 基础配置 * 2.1 internet access 如果是局域网，视讯宽等无需拨号的网络环境，只需要在/etc/rc.conf中设置好： eth0='\"dhcp\"' 重启电脑后，即可正常上网了。 如果是用pppoe协议拨号上网（如adsl），需安装rp-pppoe安装包，然后： # pppoe-setup # /etc/rc.d/adsl start # /etc/rc.d/adsl stop 或者，使用更好的ppp 安装包（参照wiki ） * 2.2 更新安装包列表 # pacman –syu 更新安装包列表，并升级已安装的包和内核，比自己make world要快多了 # reboot # pacman-optimize 这是优化pacman系统，如果安装时仅选择了base安装，那么优化可能不会成功，因为缺少 diffutils安装包(它在devel里面)，安装它就可以了： # pacman -s diffutils 安装aur 工具（建议安装，好软件多多）： # vi /etc/pacman.conf, 加入: [archlinuxfr] server=http://repo.archlinux.fr/i686/ # pacman -sy yaourt (安装一个pacman前端，如果碰到服务器调整，那就装不了啦） # yaourt -s tupac (速度更快的pacman前端，依赖于yaourt) # tupac -s aurvote 可以通过aurvote对喜欢的aur软件投票，如果票数够多了，该软件就会被加入community。 用“aurvote -h”来查看使用帮助。 如果要对yaourt和tupac这两个软件投票，可以这样做： (1) 到 http://aur.archlinux.org/account.php 注册一个帐号 (2) vi ~/.aruvote，加入 user=YourName pass=YourPassWord (3) aurvote -v yaourt tupac * 2.3 安装多线程多协议的下载工具aria2 # pacman -s aria2 # echo \"xfercommand=/usr/bin/aria2c –s 3 %u\" &gt;&gt;/etc/pacman.conf 用aria2替换默认的wget来安装软件，如果带宽足够大，就不需要用aria2了。 * 2.4 根据个人习惯安装其它shell（如zsh，ksh），当然使用默认的bash也很好 $ sudo pacman -s zsh 关于zsh的介绍，可以参照wiki: http://wiki.archlinux.org/index.php/zsh 可从中获取配置好的 .zshrc 文件，放入$home中。 $ chsh -s /bin/zsh $ source ~/.zshrc * 2.5 安装sudo，用普通用户进入系统 创建一个账户： # useradd –mg users,audio,optical,storage,wheel -s /bin/zsh yourname 创建一个限制用户，有声音支持，有hal 支持，能切换到root 权限 # passwd yourname (如果还没有为root创建密码，要先 #passwd root) # cd /home/youname/ && cp ~/.zshrc ./ && chown youename ./.zshrc # pacman -s sudo # vi /etc/sudoers 加入：yourname all=(ALL) nopasswd: setenv: all 或直接对用户组作出相应设置。 如果主机上会有多个终端同时在用，还要加入\"visudo\"到/etc/sudoers sudo 命令补全（注意，仅适用于bash）： # pacman -s bash-completion # echo source /etc/bash_completion &gt;&gt;/etc/profile # source /etc/profile （或exit, 用普通用户重登录） * 2.6 开启控制台鼠标 (gpm 支持) ，方便控制台下浏览网页 在控制台下浏览网页的工具有：elinks(英文网页), w3m（在cce下可浏览中文网页）： $ sudo pacman elinks w3m cce 用elinks等工具，在控制台下浏览网页，如果没有鼠标支持，实在是很郁闷的事情： $ sudo pacman -s gpm $ sudo vi /etc/conf.d/gpm, 加入: gpm_args='\"-m' /dev/misc/psaux -t ps2\" (ps/2) or gpm_args='\"-m' /dev/input/mice -t imps2\" (usb) $ sudo gpm -m /dev/input/psaux -t ps2 (ps/2) or $ sudo gpm -m /dev/input/mice -t imps2\" (usb) 如果已经正常工作，把gpm 加到rc.conf中的daemons 数组中，让它开机自动运行。 * 2.7 post installation tips (1) colorize your ps1 and console 编辑shell的配置文件（如 ~/.bashrc），加入： export ls_colors="'no=00:fi=00:di=01;37;44:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.xcf=01;35:*.pcx=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.avi=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.mov=01;35:*.qt=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.mp3=01;32:*.wav=01;32:*.mid=01;32:*.midi=01;32:*.au=01;32:*.ogg=01;32:*.flac=01;32:*.aac=01;32:';" 关于提示符的修改，参看一下：http://bbs.linuxsir.org/showthread.php?t=223.44 (2) 实现彩色版的 manpages $ sudo pacman -s most $ vi /etc/man.conf file， change the pager and browser variable to: pager /usr/bin/most -s browser /usr/bin/most –s $ vi ~/.mostrc，add: color normal brightwhite black color status yellow blue color underline white lightblue color overstrike brightcyan black 不过用most是有一些不便之处的，这时可以试试下面的方法，真的挺不错： 1. 在你的主目录创建 .terminfo 目录，并转到该目录： mkdir ~/.terminfo/ && cd ~/.terminfo 2. 从作者网站获取 terminfo 描述文件： wget http://nion.modprobe.de/mostlike.txt 3. 使用 tic 命令编译 mostlike.txt 文件（编译后可删除）： tic mostlike.txt 4. 在shell的配置文件中定义别名： alias man='\"TERMINFO=~/.terminfo/' less=C term=mostlike pager=less man\" 现在使用 man 指令就可以读到彩色版的 manpages 了。如果你需要修改 terminfo 文件，则可以使用 infocmp mostlike。 (3) timesaving command-aliases 编辑shell的配置文件（如 ~/.bashrc），加入： alias ls="'ls" --color="auto'" alias la="'ls" -a --color="auto'" alias ll="'ls" -aoth --color="auto'" alias p="'sudo" pacman&#39; alias t="'sudo" tupac&#39; alias x="'startx'" alias pq="'pacman" -q |grep&#39; alias pa="'sudo" pacman -s&#39; alias pas="'sudo" pacman -ss&#39; alias pau="'sudo" pacman -syu&#39; alias pay="'sudo" pacman -sy&#39; alias pao=”sudo pacman-optimize” alias pasch="'pacman" -sl | cut -d&#39; &#39; -f2 | grep &#39; alias tp="'sudo" tupac -s&#39; alias tps="'sudo" tupac -ss&#39; alias tpu="'sudo" tupac -syu&#39; alias tpy="'sudo" tupac -sy&#39; alias vi="'vim'" alias v="'sudo" vim&#39; alias ps="'ps" ax&#39; alias m="'less" –s&#39; 3 安装一个桌面 * 3.1 xorg $ sudo pacman -s xorg $ sudo x –configure $ sudo vi xorg.conf.new (作出适当的修正) $ x -config xorg.conf.new (测试一下配置文件是否能正常工作，用ctrl+alt+backspace退出x) $ cp xorg.conf.new /etc/x11/xorg.conf 如果发现“x -configure”不能正确配置某些硬件（比如鼠标），可以试试hwd命令： $ sudo pacman -s hwd && sudo hwd -xa 它会在/etc/x11/自动生成一个xorg.conf，并备份原有的文件。 * 3.2 安装显卡驱动 装完xorg后，就已经有了一个通用的vesa驱动了。不过对图形加速支持得不太好。 一般显卡的开源驱动可以用：pacman -ss xf86-video 来搜索到。不过要想较好的支持3d 性能，还需要使用厂商提供的驱动： ati显示芯片：tupac -s catalyst ，参考http://wiki.archlinux.org/index.php/ati nvidia显示芯片可用：tupac -ss nvidia 来搜索，并参考：http://wiki.archlinux.org/index.php/nvidia 不过个人认为，对于nvidia的显卡，最好是直接使用其官方网站上的驱动，下载地址是： http://www.nvidia.cn/download/index.aspx?lang=cn 下载最新的linux驱动(当前是nvidia-linux-x86-169.09-pkg1.run)，然后： $ sudo sh nvidia-linux-x86-169.09-pkg1.run *3.3 安装字体 $ sudo pacman –sy ttf ｜less （从安装包列表中查找可用的字体包） $ sudo pacman –s sdl_ttf font-bh-ttf ttf-dejavu ttf-fireflysung ttf-ms-fonts 当前的开源字体已经相当不错了，尤其是文泉驿字体。 安装文泉驿点阵宋体和正黑体。当前已经进入community 了。 $ tupac -s wqy-bitmapfont wqy-zenhei $ sudo vi /etc/x11/xorg.conf ，增加字体路径 如果没有安装 fontconfig ，就用 pacman 安装一下，然后， 下载本文附件：fonts.conf.tar.gz ，并解压到 $home下： $ tar zxf fonts.conf.tar.gz -c ~/ 这会在 $home下产生一个 .fonts.conf 文件，可以优化中文显示。 如果磁盘上有windows系统，也可以： $ sudo mkdir /usr/share/fonts/msfonts 复制一些windows 字体到此目录下，如：msyh, simhei, simyou 并自行编辑.fonts.conf 文件。当然了，最好不要使用windows字体，因为是有版权的。 *3.4 安装一个顺手的整合桌面环境或窗口管理器 o 3.4.1 gnome $ sudo pacman -s gnome （gnome-extra是附加软件，自行选择安装） o 3.4.2 kde $ sudo pacman -s kde o 3.4.3 xfce + idesk $ sudo pacman -s xfce4 idesk (xfce4-goodies是附加软件，自行选择安装) o 3.4.4 e17 + idesk $ sudo pacman -s e17 idesk o 3.4.5 fvwm + idesk $ sudo pacman -s fvwm idesk (如果要安装最新版本，需自行下载编译安装) o 3.4.6 openbox + rox-filer + lxpanel + idesk $ sudo pacman -s openbox rox lxpanel idesk o 3.4.7 windowmaker + rox-filer + *dockapp + idesk $ sudo pacman -s windowmaker rox lxpanel idesk $ pacman -ss dock , 然后安装中意的dockapp 安装上面任一桌面后，可能还要安装和启用一个顺手的登录管理器，主要有： xdm，gdm，kdm，entrance, slim. 如果要启用gdm，需注释掉/etc/inittab 中“x:5:respawn:/usr/bin/xdm –nodaemon” 这一行，另在/etc/rc.conf 中的 daemons行中加入 gdm，可使开机时自动运行。 ~/.profile 文件中的命令是gdm 登录时会默认调用的。其它与之相似。 如果不用登录管理器，就配置好~/.xinitrc,用\"startx\"命令，直接从console下进入。 参考： http://wiki.archlinux.org/index.php/{gnome,kde,xfce,e17,openbox,gdm,kdm,slim} http://www.fvwm.org http://slim.berlios.de http://icculus.org/openbox/index.php/main_page http://www.windowmaker.info http://roscidus.com http://idesk.sourceforge.net * 3.5 安装中文输入法（fcitx,or scim） o 3.5.1 fcitx $ sudo pacman -s fcitx $ cat &gt;&gt;~/.profile &lt;&lt;eof &gt; lc_ctype='\"zh_CN.utf8\"' &gt; export xmodifiers="@im=fcitx" &gt; export gtk_im_module=xim &gt; export qt_im_module=xim &gt; fcitx & &gt; eof o 3.5.2 scim $ sudo pacman -s scim-tables (或安装scim-fcitx。要用拼音，安装scim-pinying) $ cat &gt;&gt;~/.profile &lt;&lt;eof &gt; lc_ctype='\"zh_CN.utf8\"' &gt; export xmodifiers="@im=SCIM" &gt; export gtk_im_module='\"scim\"' &gt; export qt_im_module='\"scim\"' &gt; scim -f socket -c socket -d &gt; eof # cp ~/.profile ~/.xinitrc # echo exec gnome-session &gt;&gt;~/.xinitrc 这是startx 调用的配置文件。用“&gt;&gt;”,确保了gnome-session是最后被执行的命令。 # startx 4 安装常用软件 * 4.1 x下的虚拟终端 roxterm,tilda和yakuake都是相当棒的虚拟终端。 toxterm同gnome-terminal相似，却要小巧得多。 tilda 可用于 gnome、xfce 桌面，而 yakuake 主要用于 kde 桌面。它们都具有热键控制， 桌面嵌入，背景透明，动画效果，标签页功能和可定制性。 个人偏好tilda，直接用pacman命令安装： # pacman -s tilda （不过最近gnome的metacity似乎对tilda不太友好，老是找不到焦点） * 4.2 网络浏览 使用经过优化的更小巧快速的 swiftfox 来代替firefox。 如果安装了elinks，可以先： $ elinks http://getswift.com/installer.htm 看看有哪些版本可以下载，结合电脑处理器的类型下载，如pentium 4的cpu： $ aria2c –s 4 http://getswiftfox.com/builds/installer/pentium4/install-swiftfox.sh -d /tmp $ vi /tmp/ install-swiftfox.sh （作出适当的修正，不作修正也可） $ sudo sh /tmp/install-swiftfox.sh 也可以选择其他的网络浏览器，比如 opera： # pacman -s opera * 4.3 图像编辑 (1) linux下的photoshop: gimp，要安装它可以执行命令： # pacman -s gimp 你可以通过”应用程序 → 图像 → gimp“来运行 gimp。 (2)矢量图形编辑软件可以使用 inkscape： # pacman -s inkscape (3)命令行的可以装上 imagemagick： # pacman -s imagemagick (4)用来捕获图像的 scrot： # pacman -s scrot (5)轻量级的图像查看软件 gqview： pacman -s gqview 或者 gnome 默认的 eog： pacman -s eog * 4.4 linux下的office软件 (1) openoffice.org ： # pacman -s openoffice-base openoffice-zh_cn 为了让 openoffice.org 运行于 gtk 2 模式，向shell的配置文件（如 ~/.bashrc） 添加： export ooo_force_desktop=gnome (2) 永中office: 国产软件，听说对ms office文档格式的支持要比openoffice好，如果word，exel的文件较多， 可以考虑这个，就是安装略显麻烦。 $ cd ~ $ aria2c -s 4 http://218.90.147.70/evermore/eioffice2007/eio2007_trial_zh_lin.tar.gz （电信）or: $ aria2c -s 4 http://218.104.51.66/evermore/eioffice2007/eio2007_trial_zh_lin.tar.gz (网通) $ tar zxf eio2007_trial_zh_lin.tar.gz 用su命令登录root，再进入解压后文件夹（好像是4开头的）； # ./setup.sh （进入永中office的图形界面安装，指定一下安装目录） 安装完成后，要以root身份运行一下永中： # eio; exit $ cd ~ ; seteio (为普通用户配置下永中) $ eio (从终端运行永中office，或者从菜单中运行也可以) * 4.5 即时通讯 要与朋友即时聊天，我们可以选用 pidgin，它支持 gtalk、msn、qq 等多种协议： pacman -s pidgin 当然，skype 也不可错过： pacman -s skype-staticqt * 4.6 音影播放 (1)音乐播放软件我选择 quod libet，你可以凭自己的喜好来安装： # pacman -s quodlibet 其他的音乐播放器有 mpd、audacious、exaile、amarok 等。 (2)看电影的话，可用mplayer，同时也加上浏览器插件和常用解码器： # pacman -s mplayer mplayer-plugin codecs gstreamer0.10-bad gstreamer0.10-ugly gstreamer0.10-ffmpeg gstreamer0.10-mad gstreamer0.10-mpeg2dec 如果需要 mplayer 的前端，那么可以安装 smplayer： # pacman -s smplayer 当然，另一个选择 vlc 也挺好： # pacman -s vlc * 4.7 下载工具 命令行下载工具，有 wget。此外，aria2 也不错，它支持断点续传和多线程下载： pacman -s aria2 bittorrent 下载工具，我们选用 deluge： pacman -s deluge 其他的包括 azureus、rtorrent 等。 另外，我们把 amule 也安装上： pacman -s amule 为了能够让 amule 直接从 firefox 浏览器中处理 ed2k 链接，我们在 firefox 的 about:config 中新建字符串 network.protocol-handler.app.ed2k，并将其设为 /usr/bin/ed2k。 * 4.8 文本编辑与排版 (1)如果要求简单的话，可以选用 gedit： pacman -s gedit (2)安装 vim，要图形界面的话，可以加上 gvim： pacman -s vim gvim (3)emacs 迷们可以执行： pacman -s emacs emacs cvs 版本可在 community 中找到。 (4)世界第一流的排版工具集 texlive 参看http://wiki.archlinux.org/index.php/texlive 也可额外安装 tex 的集成编辑环境：kile, or lyx * 4.9 安装virtualbox虚拟机 $ sudo tupac -s virtualbox_bin (从aur安装virtualbox 的puel版本) $ sudo vbox_build_module (创建virtualbox的内核) $ sudo gpasswd -a yourname vboxusers (将你的名字加入vboxusers用户组) $ sudo modprobe vboxdrv （如果要立刻开始用，需要加载vboxdrv模块） $ sudo vim /etc/rc.conf： modules中加入vboxdrv，使开机时加载vboxdrv模块. $ virtalbox (从终端运行virtualbox，或从桌面的菜单中运行它) 有时，会因为没有libstdc++5 这个库文件，而使virtualbox不能运行。安装它就是了： $ sudo pacman -s libstdc++5 * 4.10 wine──在unix/linux系统上实现windows api wine用unix的方式实现（或代替了）windows api ，所以通过wine可以在unix-like系统上运行 windows 程序及游戏。 wine-doors是一款基于gnome桌面的windows软件安装管理包，是wine 的辅助工具， 使用非常方便，只需在软件列表中选择要安装的软件，wine-doors就会帮你搞定一切， 不再需要自己动手来配置wine。什么office 2003，photoshop都不在话下了。 $ sudo tupac -s wine wine-doors $ winecfg (配置好wine) $ sudo wine iexplore http://www.winehq.org （安装wine gecko ie engine） $ cp /usr/share/fonts/wenquanyi/wqy-zenhei/wqy-zenhei.ttf ~/.wine/drive_c/windows/fonts 给wine提供一个中文字体：wenquanyi zen hei $ vi ~/zh.reg, add: （编辑wine中文字体支持的注册表文件，否则中文网页会乱码） regedit4 [hkey_local_machine\\software\\microsoft\\windows nt\\currentversion\\fontsubstitutes] \"arial\"='\"WenQuanYi' zen hei\" \"arial ce,238\"='\"WenQuanYi' zen hei\" \"arial cyr,204\"='\"WenQuanYi' zen hei\" \"arial greek,161\"='\"WenQuanYi' zen hei\" \"arial tur,162\"='\"WenQuanYi' zen hei\" \"courier new\"='\"WenQuanYi' zen hei\" \"courier new ce,238\"='\"WenQuanYi' zen hei\" \"courier new cyr,204\"='\"WenQuanYi' zen hei\" \"courier new greek,161\"='\"WenQuanYi' zen hei\" \"courier new tur,162\"='\"WenQuanYi' zen hei\" \"fixedsys\"='\"WenQuanYi' zen hei\" \"helv\"='\"WenQuanYi' zen hei\" \"helvetica\"='\"WenQuanYi' zen hei\" \"ms sans serif\"='\"WenQuanYi' zen hei\" \"ms shell dlg\"='\"WenQuanYi' zen hei\" \"ms shell dlg 2\"='\"WenQuanYi' zen hei\" \"system\"='\"WenQuanYi' zen hei\" \"tahoma\"='\"WenQuanYi' zen hei\" \"times\"='\"WenQuanYi' zen hei\" \"times new roman ce,238\"='\"WenQuanYi' zen hei\" \"times new roman cyr,204\"='\"WenQuanYi' zen hei\" \"times new roman greek,161\"='\"WenQuanYi' zen hei\" \"times new roman tur,162\"='\"WenQuanYi' zen hei\" \"tms rmn\"='\"WenQuanYi' zen hei\" $ regedit zh.reg (将中文字体配置写入wine的注册表) $ wine iexplore http://www.126.com (试验一下中文效果) 需要注意的是，如果从abs系统编译了并升级安装到了最新的wine，一定要运行“wineprefixcreate” 来更新wine的注册表。 * 4.11 其他工具 (1)光盘刻录 kde下建议选择 k3b，可以通过以下指令安装： pacman -s k3b dvd+rw-tools 为了让当前用户能够使用光盘刻录设备，需要将其添加到 optical 用户组中： gpasswd -a yourname optical 如果是gnome用户，建议安装gnomebaker，不亚于k3b: pacman -s gnomebaker (2) ftp上传 可选择命令行的 lftp： pacman -s lftp 图形化的有 gftp、filezilla 等。 ftp下载其实不必特意安装什么，因为wget，aria2都是支持ftp协议的。 (3)文档查看 查看 pdf 文档，可以安装 evince：pacman -s evince 也可以用adobe公司的acroread：pacman -s acroread 或轻量级的xpdf：pacman -s xpdf xpdf-chinese-simplified xpdf-chinese-traditional chm 文档，可以选用kchmviewer (4)新闻阅读 rss 离线阅读软件，用 liferea： pacman -s liferea (5)邮件收发 电子邮件客户端，可以选择 thunderbird： pacman -s thunderbird thunderbird-i18n 或者采用：mutt + msmtp + getmail (6)图形界面的进程查看器 (gps) $ sudo pacman –s gps $ gps 如果是文字界面的话，可用下面的命令： $ ps ax (7)计算器： pacman -s gcalctool (8)压缩/解压 rar、zip 等格式： pacman -s p7zip q7z (安装7zip，q7z是其gui程序) pacman -s unrar unzip 另外，图形化的可以用 file-roller： pacman -s file-roller (9)词典翻译 安装 stardict： pacman -s stardict 同时，词典文件需从 stardict 官方网站下载，并释放到 /usr/share/stardict/dic/ 目录。 (10)java 支持： pacman -s jre (11)flash 插件： pacman -s flashplugin * 4.11 安装主题 gdm 可以安装 arch boomerang underlight 这套清爽的主题。下载后，执行： $ tar zxvf arch-boomerang-underlight-gdm.tar.gz $ mv arch-underlight-* /usr/share/gdm/themes/ $ sudo gdmsetup (需要在x下执行，需要事先安装gdm) 或者，如果在使用gnome，就在”系统 → 系统管理 → 登录窗口“中将样式更改为主题模式， 并选择已安装的主题即可。 参看：http://www.gnome-look.org/ 还可以打造一个 mac os x 风格的界面，参看：http://sourceforge.net/projects/mac4lin 5 常见问题 * 5.1 声音问题 安装alsa。实际上，alsa 已被包含到 2.6 版的内核中。因此，只需安装 alsa 的相关工具即可： pacman -s alsa-utils 接着，将当前用户添加到 audio 用户组，以便使用声卡设备： gpasswd -a yourname audio 同时，将 alsa 添加到 /etc/rc.conf 配置文件的 daemons 中： daemons=(syslog-ng network netfs crond gdm alsa) 值得注意的是，alsa 默认是静音状态，需要先打开音量。另外，也可点击”系统 → 首选 项 → 音效“进行测试。 $ sudo pacman -s alsa-lib alsa-oss alsa-utils (oss 包解决声卡独占问题) $ sudo alsaconf (设置声卡) $ sudo alsamixer $ sudo alsactl store (设置和保存音量，并在 /etc/rc.conf中的 daemons行加入alsa) $ amixer set master 75 unmute $ amixer set pcm 75 unmute (75 好像是原声，再高的话，声音会失真) * 5.2 笔记本电脑可能遇到的问题 (1) 触摸板问题 参看http://wiki.archlinux.org/index.php/touchpad_synaptics (2) 摄像头问题 参看http://wiki.archlinux.org/index.php/webcam_setup (3) 无线上网问题 参看http://wiki.archlinux.org/index.php/wireless (4) 快捷键问题 参看http://wiki.archlinux.org/index.php/extra_keyboard_keys * 5.3 打印机设置 (1) 当前最流行的底层基础打印系统：cups (适用于所有打印机) unix-like系统下的打印系统中，最具易用性的当数cups (the common unix printing system )，即 unix通用打印系统。在过去，unix-like系统下的打印问题是老大难。cups的出现使这个问题得到了 极大的缓解。 安装： # pacman -s cups ghostscript gsfonts cups系统运行记录： 编辑/etc/cups/cupsd.conf，设置loglevel的等级： loglevel debug2 如果出现错误，就可以察看调试信息了： $ tail -n 100 -f /var/log/cups/error_log 看看系统已经加载了哪些模组（modules）： # lsmode |less 再来看看系统中有哪些可以使用的模组： # modprobe -l |less 为内核加载打印机模组后，连接好打印机机，并打开电源： i) usb 接口打印机 # modprobe usblp （2.6.x 内核） # modprobe printer （2.4.x 内核） # tail /var/log/messages.log （看看安装成功了没有） ii) 并口打印机 # modprobe lp parport parport_pc （2.6.x 内核） # modprobe parport parport_pc （2.4.x 内核） # tail /var/log/messages.log （看看安装成功了没有） 将这些模组加入/etc/rc.conf中的modules中去，以便开机时自动加载。 启动 cups ： # /etc/rc.d/cups start （可将cups加入/etc/rc.conf中的daemons中去，以便开机时自动加载） 这个时候，就可以用cups在控制台下做一些简单的打印了，如： $ cat ~/.xinitrc &gt; /dev/usb/lp0 (usb接口打印机) 当然仅仅依靠cups打印，如果在x下，肯定是不方便的。主要是因为缺少驱动，linux下的打印驱动是ppd文件。 (2) 打印驱动： foomatic foomatic是一个数据库驱动的打印系统，它将unix下的通用后台打印系统与开源的打印机驱动整合在一起。 只要有任一在开源驱动下能够正常工作的打印机，它就能支持了。它支持cups, lprng, lpd, gnulpr, solaris lp, ppr, pdq, cps 这些底层的打印系统，也能直接打印（既是驱动也是打印工具）。 foomatic打印速度快，打印质量也挺不错。不过缺点是，有个别的打印机可能没有ppd文件驱动。 # pacman -s foomatic-*** foomatic包含五个安装包： foomatic-filters (帮助后台打印系统将postscript转成打印机语言)， foomatic-db (foomatic-db-engine生成ppd文件时要用到的一切资料)， foomatic-db-ppd (已经获支持的打印驱动) foomatic-db-engine (将 foomatic xmlo数据库中的数据生成ppd文件)， foomatic-db-hpijs (专为hp打印驱动生成foomatic xml 数据)。 一般来说，安装前四个包就可以了。如果没有惠普打印机，就不必安装foomatic-db-hpijs了。 (4) 打印驱动：hplip 惠普deskjet, officejet, photosmart, business inkjet 和一些 laserjet 打印机型号，需要安装hplip。只用于惠普打印机。 也可同时安装上面的foomatic，对比一下两者的打印速度。 # pacman -s hplip (5) 打印驱动：gutenprint 也许以上的打印驱动仍然不行（不过安装foomatic一定是必要的，能提高打印速度）。在配置cups时（即将讲到） 没有找到自己的打印机型号。那么可能还需要接着安装gutenprint。 gutenprint 是gimp的打印扩充功能模块，过去叫\"gimp-print\"，它能够为gimp提供流行的打印驱动，能 让佳能、爱普生、惠普、利盟、索尼、奥林巴斯，以及其他基于pcl技术的打印机，打印出更出色的品质。用于高品质的图像打印是在好不过了。 它支持的打印机型号列表可见于：http://gutenprint.sourceforge.net/p_supported_printers.php3 不过gutenprint的打印品质是没得说，但速度就不敢恭维了。但有foomatic的支持就会快很多。 # pacman -s gutenprint (6) 在x下配置cups 打印基础系统cups和打印驱动安装好的，就要开始配置打印机了。 可以通过配置cups来配置打印机。配置cups的方法适用于一切打印机及其驱动。因此推荐使用。 进入x，打开一个网络浏览器，访问： http://localhost:631 （也可以用在/etc/hosts中设置好的hostname来代替localhost） 按照提示，一步一步的配置好打印机： manage printers ---&gt; add printer ---&gt; root密码验证 ---&gt; 输入打印机名称 ---&gt; 选择设备类型 （打印机型号及其接口：usb接口 or 并口打印机） ---&gt; 选择你的打印机 ---&gt; 通过打印机型号来选择适当的打印机驱动，并add （如果打印驱动的名称中出现了foomatic字样，一定要优先选择） ---&gt; 打印选项的设置 ---&gt; 完成 也可以使用另外的配置界面，不过可能要另外安装： tupac -s gnome-cups-manager (gnome下) tupac -s gtklp (kde下) (5) 打印机共享 i) linux to linux 服务器端：编辑 /etc/cups/cupsd.conf 中“location”一段，以允许客户端的访问，重启cups服务。 客户端：编辑 /etc/cups/cupsd.conf 中“servername”一段，以允许访问服务器端。执行命令：lpq ii) linux to windows 两端都应当安装samba。参看wiki。 iii) windows to linux 两端都应当安装samba。参看wiki ******* 所有关于打印的问题，请一定要参看： http://wiki.archlinux.org/index.php/cups http://www.cups.org/ http://gimp-print.sourceforge.net/ http://www.linuxprinting.org/printer_list.cgi http://www.linux-foundation.org/en/openprinting/database/foomatic http://savannah.nongnu.org/projects/foomatic-gui/ http://wiki.gentoo.tw/mediawiki/index.php/printing-howto 另可参看http://www.redhat.net.cn/online/linuxbook/1/16.htm * 5.4 服务的访问控制 /etc/hosts.allow 和/etc/hosts.deny 这两个文件是tcpd 服务器的配置文件，tcpd 服务器可以控制外部ip 对本机服务的访问。 这两个配置文件的格式如下： #服务进程名:主机列表:当规则匹配时可选的命令操作 server_name:hosts-list[:command] /etc/hosts.allow 控制可以访问本机的ip 地址，/etc/hosts.deny 控制禁止访问本机的ip。 如果两个文件的配置有冲突，以/etc/hosts.deny 为准。下面是一个/etc/hosts.allow 的示例： all: 127.0.0.1: allow #允许本机访问本机所有服务进程 smbd: 192.168.0.0/255.255.255.0 #允许192.168.0.网段的ip 访问smbd 服务 all 关键字匹配所有情况，except 匹配除了某些项之外的情况，paranoid 匹配你想控 制的ip 地址和它的域名不匹配时(域名伪装)的情况。 * 5.5 启动加速 编辑 /etc/rc.conf ，在 “ daemons ”行的一些不急着需要用的后台程序前加上@，使后台运行。 * 5.6 中文java 支持 $java_home/jre/lib/fonts/ 下建一个fallback 的目录，然后建一个中文字体的软链接过去。 * 5.7 可移动设备的自动挂载（hal + dbus or ivman） 及中文名支持 $ sudo pacman -s hal dbus acpid（hal 依赖 dbus，acpid 可管理设备的电源。） $ sudo vi /etc/rc.conf ，在 daemons行 加入hal，如: daemons=(syslog-ng acpid hal network !netfs @crond @alsa gdm) 注意：如果daemons 列表中有dbus，要移除它，以免出错。hal 会自动加载dbus。 $ sudo gpasswd –a username optical $ sudo gpasswd –a username storage 把你的用户加入到 optical，storage 这几个组里面。前文中已经加入过了，可跳过。 如果用ivman来替代dbus，则需要将用户名加入到plugdev组中。 $ sudo vi /etc/fstab，注释掉下面两行： /dev/cdrom /mnt/cdrom iso9660 ro,user,noauto,unhide 0 0 /dev/dvd /mnt/dvd udf ro,user,noauto,unhide 0 0 $ sudo vi /etc/hal/fdi/policy/preferences.fdi，可加入一些很有用的规则， 如自动挂载ntfs文件系统，自动挂载可移动设备，性能优化，u盘的中文名支持等： &lt;?xml version='\"1.\"' encoding='\"UTF-8\"?>' &lt;deviceinfo version='\".2\">' &lt;device&gt; &lt;match key='\"volume.fstype\"' string='\"ntfs\">' &lt;append key='\"volume.mount.valid_options\"' type='\"strlist\">dmask=000</append>' &lt;append key='\"volume.mount.valid_options\"' type='\"strlist\">fmask=111</append>' &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;!-- use utf-8 charset for vfat --&gt; &lt;match key='\"volume.fstype\"' string='\"vfat\">' &lt;merge key='\"volume.policy.mount_option.iocharset=utf8\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;match key='\"storage.hotpluggable\"' bool='\"false\">' &lt;match key='\"storage.removable\"' bool='\"false\">' &lt;merge key='\"storage.automount_enabled_hint\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;match key='\"block.is_volume\"' bool='\"true\">' &lt;match key='\"volume.size\"' compare_lt='\"8000000000\">' &lt;match key='\"@block.storage_device:storage.hotpluggable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">true</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;match key='\"@block.storage_device:storage.removable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">true</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;/match&gt; &lt;match key='\"volume.size\"' compare_ge='\"8000000000\">' &lt;match key='\"@block.storage_device:storage.hotpluggable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">false</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;match key='\"@block.storage_device:storage.removable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">false</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;/match&gt; &lt;/match&gt; &lt;/device&gt; &lt;/deviceinfo&gt; 参看：http://wiki.archlinux.org/index.php/hal 注意，必须事先安装好ntfs-3g安装包，才能成功挂载ntfs分区。最后： $ sudo /etc/rc.d/hal restart 即可正常使用hal支持了，同时移动设备上的中文名（其实其它语言也可以）也可以得到支持。 如果以上不能工作，还可以安装pmount: $ sudo pacman -sy pmount * 5.8 更改gnome 菜单下的图标 可以编辑/usr/share/applications 中的相应文件 * 5.9 archlinux的包管理系统：pacman 常用命令有： pacman -sy abc #和源同步后安装名为abc的包 pacman -s abc #从本地数据库中得到abc的信息，下载安装abc包 pacman -sf abc #强制安装包abc pacman -ss abc #搜索有关abc信息的包 pacman -si abc #从数据库中搜索包abc的信息 pacman -qi abc #列出已安装的包abc的详细信息 pacman -syu #同步源，并更新系统 pacman -sy #仅同步源 pacman -r abc #删除abc包 pacman -rc abc #删除abc包和依赖abc的包 pacman -rsc abc #删除abc包和abc依赖的包 pacman -sc #清理/var/cache/pacman/pkg目录下的旧包 pacman -scc #清除所有下载的包和数据库 pacman -u abc #安装下载的abs包，或新编译的abc包 pacman -sd abc #忽略依赖性问题，安装包abc pacman pacman -su --ignore foo #升级时不升级包foo pacman -sg abc #查询abc这个包组包含的软件包 * 5.10 arch build system (abs) 利用abs 可以从源码自定义编译安装包。其过程如下： (1) synchronize your abs tree with the server. # pacman -s cvsup # abs (2) create a new directory in /var/abs/local/ named after the package you are going to create. $ mkdir -p ~/abs/local/ (这里，推荐在个人的主目录下创建一个abs的工作目录) (3）copy the pkgbuild.proto prototype from /var/abs/ into your newly created directory, remove the .proto suffix, and edit it to fit the new package. $ cp -r /var/abs/... ~/abs/local/ (将你要编译的软件的pkgbuild目录复制到个人目录下) (4) run makepkg in the working directory with the pkgbuild file. $ makepkg (开始编译这前，可以编辑一下pkgbuild文件，更改其默认安装目录到个人 主目录下，用“--prefix＝...”来指定安装目录) (5) install the newly built package with pacman. $ pacman -u ..pkg.gz (安装新编译好的包文件) (6) send the package to your friends for bragging rights (or give it to an archer so s/he can stick it in the master abs tree). * 5.11 创建一个光盘镜像 linux 下创建一个光盘镜像真的很简单，基本上有两类方法： (1) 镜像的源文件在光盘上 将光盘放入光驱，但不用 mount 指令加载它，然后： dd if=/dev/dvd of=dvd.iso # for dvd dd if=/dev/cdrom of=cd.iso # for cdrom dd if=/dev/scd0 of=cd.iso # if cdrom is scsi (2) 镜像的源文件在硬盘上或被 mount 到了硬盘上，比如在 /tmp/directory/： mkisofs -o cd.iso /tmp/directory/ 如果这个源文件是一个dvd视频文件，那么要这样用： mkisofs -dvd-video -o dvd.iso /tmp/directory/ 关于mkisofs 的更多用法，还请参看手册：man mkisofs 关于dvd视频光盘的编辑和创建，请参看： http://gecius.de/linux/dvd.html http://gentoo-wiki.com/howto_create_a_dvd:filesystem 6 服务器环境 * 6.1 ftp服务 (1) vsftpd ftp服务器的安装比较简单。直接用pacman安装即可。当然，还必须配置好，才可正常安全的使用。 vsftpd的使用和配置，可参考： http://vsftpd.beasts.org/ http://gentoo-wiki.com/howto_vsftpd http://www.uplinux.com/www/net/02/117.shtml (2) pureftpd 参考http://www.pureftpd.org/project/pure-ftpd http://www.chinaunix.net/jh/15/2424.html * 6.2 http服务 (1) 提供web服务的程序 能提供web服务的开源程序主要有：apache httpd, lighttpd, 和nginx。 apache稳定，安全，使用者最多，但是运行时对内存、cpu的开销也是最高的。 在静态网页支持上，lighttpd/nginx 比 apache 优胜很多。 如果不考虑虚拟主机的安全设置问题，nginx无疑是最好的选择，其次是lighttpd。 i) apache httpd: 参见http://httpd.apache.org/ ii) lighttpd: 参见http://wiki.archlinux.org/index.php/lighttpd_for_both_ssl_and_non-ssl iii) nginx: 参见http://wiki.codemongers.com/main (2) 动态网页的程序接口(cgi)：fastcgi： 是http服务器与机器上其他程序进行通信的一个接口。这个“其他程序”可以使用任何计算机语言 来编写，它通过cgi这个接口从http服务器取得输入，然后把运行的结果又通过cgi这个接口交给http 服务器，而http服务器把这个结果送给浏览器。提供web服务的程序都有cgi模块。 不过cgi技术的通用性与效率不高，所以有了性能大幅提升的fastcgi。fastcgi要求提供web服务的 程序整合fcgi模块。 参见http://wiki.archlinux.org/index.php/apache_fastcgi http://wiki.archlinux.org/index.php/fastcgi_and_lighttpd (3) 动态网页的脚本语言 php：参见http://wiki.archlinux.org/index.php/php python: 在动态网页上的应用与php相似。 jsp：java语言支持，需安装jdk (4) 数据库 mysql: 当前国内用的较多的数据库。适合小访问量或个人使用。 postgresql: 世界上最先进，最稳定的数据库。能充分发挥出机器的潜能。更加适合大企业环境。 参看http://wiki.archlinux.org/index.php/postgresql (5) http服务器的架构 i) 不带数据库支持的轻量级web：nginx/lighttpd + php/python + fastcgi ii) 有数据库支持：apache/lighttpd + php/python + mysql/postgresql，也可再追加jsp的支持。 参看http://wiki.archlinux.org/index.php/lamp 参见http://wiki.archlinux.org/index.php/apache_fastcgi http://wiki.archlinux.org/index.php/fastcgi_and_lighttpd http://www.knowsky.com/3232.html iii) 更加高效、可靠、稳定的web服务器。下面的架构图比较不错： -------- ------------ ------------- ---------------- -------------- |客户端|="==>" |负载均衡器|="==>" |反向**/缓存|="==>" |web服务器|="==>" |数据库服务器| -------- ------------ ------------- ---------------- -------------- nginx squid apache/lighttpd mysql/postgresql +(php+eaccelerator) + memcache 参看http://huangjt.jobui.com/blog/80186.html (6) 用webdav替代传统的ftp服务 webdav是一个使用xml技术的基于http协议的扩展协议，具备http的所有优点，力图提供 一个网页编辑的统一接口。用它替代传统的ftp服务，可以避免ftp存在的一些中文问题。 参看：http://wiki.archlinux.org/index.php/simple_webdav_setup http://wiki.archlinux.org/index.php/webdav_authentication * 6.3 邮件服务 postfix：参看http://wiki.archlinux.org/index.php/postfix_howto * 6.4 文件共享 文件共享的方法较多，机器上只要安装了任一网络文件系统就可以共享了。网络文件系统有： ftpfs, sshfs, shfs, smbfs, nfs, etc. 当然，使用http服务来共享文件也未尝不可。 (1) shfs sshfs可以开机自动挂载，关机和重启时也可以自动卸载sshfs文件系统，但是它不能用mount来 直接指定-t参数来挂载，因此也不能直接加到/etc/fstab中，而且用df也不能列出那样的分区。 但是shfs解决了这个问题，它能像挂载普通分区那样挂载sshfs文件系统。它是通过内核的shfs 模块来实现的， 参看http://wiki.archlinux.org/index.php/shfs (2) samba 可帮助实现跨平台（linux &lt;---&gt;windows) 的文件共享和打印共享。 参看http://wiki.archlinux.org/index.php/setting_up_samba http://www.samba.org/ (3) nfs 参看http://wiki.archlinux.org/index.php/nfs (2) rsync rsync用于两台机器上文件的同步备份，它本身不算是共享程序，但它能起到共享的作用。通常与ssh合用。 参看http://samba.anu.edu.au/rsync/ http://dz.adj.idv.tw/thread-48-1-4.html * 6.5 远程登录 (1) openssh/openssh-chroot 用 openssh-chroot 基于openssh，但添加了新特性，即可以创建一个chrootjail。chrootjail是单独划分 出的一个空间，以限制远程登录者活动不超出此范围，更不会影响到主系统。所以比用 openssh 更安全。 # pacman -s openssh-chroot # mkdir /var/openssh_chroot # chroot_create /var/openssh_chroot (将chrootjail放到/var/openssh_chroot，或其它地方) # chroot_adduser username /var/openssh_chroot (创建远程登录者帐户，并为其指定chrootjail) # /etc/rc.d/sshd restart (手动重启sshd服务，也可将sshd添加到/etc/rc.conf中的daemon中去) 如果远程机器是unix-like系统，可用：ssh &lt;username&gt;@localhost 来登入；如果是windows, 可使用 putty, or pietty。 参看http://wiki.archlinux.org/index.php/openssh-chroot (2) openvpn * 6.6 安全问题 (1) 防火墙 (iptables) 这个实在不是几句话能讲明白的。不过想提醒几句：要使iptables发挥出最大作用，最好是在一台 旧电脑装上nat+iptables，充当网关，然后自己的电脑跟此网关相连接。 参看：http://wiki.archlinux.org/index.php/firewalls http://wiki.archlinux.org/index.php/simple_stateful_firewall_howto http://gentoo-wiki.com/howto_iptables_for_newbies http://iptables-tutorial.frozentux.net/iptables-tutorial.html http://wiki.archlinux.org/index.php/high_performance_firewall/nat_with_iptables_and_vlans_and_iproute2 (2) 入侵监测 (snort) 这个太复杂了。 有兴趣可以看一看toby kohlenberg等编写的专著\"snort: intrusion detection and prevention toolkit\"。 电子书下载：http://rapidshare.com/files/27449819/snort_intrusion_detection_and_prevention_toolkit_ertu.rar 参看http://www.snort.org/ "><title>archlinux-安装笔记2-常用软件转载</title><link rel=canonical href=https://svtter.cn/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B02-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E8%BD%AC%E8%BD%BD/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="archlinux-安装笔记2-常用软件转载"><meta property='og:description' content=" 本文出自svtter.github.io\n1 Installing Arch Linux * 1.1 Pre-Installation 是i686 架构吗（Pentium II or AMD K6-2以上）？安装方式CD? FTP？ * 1.2 Acquiring Arch Linux 从这里寻找速度最快的镜像： http://wiki.archlinux.org/index.php/Mirror * 1.3 Preparing Installation Media MD5 校验，烧录。 * 1.4 Using the CD-ROM 设置好光驱启动。 * 1.5 Common Installation Procedure o 1.5.1 Loading a non-US Keymap 用km 工具选择非英语键盘 o 1.5.2 Running Setup # /archlinux/setup o 1.5.3 Configure Network (FTP Install only) 仅适用于FTP 安装方式，CD 安装没有必要配置好网络。 o 1.5.4 Prepare Hard Drive 给磁盘分好区，root分区(/)放在主分区比较好（放到逻辑分区也可以）， 如果有 Windows 系统，那它也要占据一个主分区。个人的250G硬盘是这样分区的： # cfdisk sda1 /boot 150M xfs sda2 Windows 18G ntfs sda3 FreeBSD 32G ufs sda5 / 600M xfs sda6 SWAP 2xRam xfs (SWAP分区的大小推荐为内存大小的2倍) sda7 /var 20G xfs sda8 /tmp 5G xfs sda9 /opt 10G xfs sda10 /usr 20G xfs sda11 /home 105G xfs sda12 Files 不大于32G fat32 如果需要加密磁盘，并启用开机验证，推荐使用luks ： 通常加密 root 分区和 /home 分区 # modprobe dm-crypt # modprobe aes-i586 # cryptsetup –y luksFormat /dev/sda3 输入密码，确认。 # cryptsetup –y luksFormat /dev/sda10 输入密码，确认。 # cryptsetup luksOpen /dev/sda3 root 解开root 分区，并建立一个映射：/dev/mapping/root # cryptsetup luksOpen /dev/sda10 home 解开 /home 分区，并建立一个映射：/dev/mapping/home 参看：http://wiki.archlinux.org/index.php/LUKS_Encrypted_Root o 1.5.5 Partition Hard Drives 可以跳过了。 o 1.5.6 Set Filesystem Mountpoints 如果用luks 加密了分区，那么 / 分区需要挂载到：/dev/mapping/root； /home 需要挂载到：/dev/mapping/home. 同时选择一个合适的文件系统（JFS，XFS，Reiserfs...）。 o 1.5.7 Select Packages 至少选择 Base 安装。如果需要一个可编译环境，要选上devel和lib；如果需要ADSL拨号 或WiFi支持，要选上support。 确定后会看到所有将要安装的包，可以在这里去掉一些暂时不想安装的包。要是不清楚就 不管了，几个M的大小而已。 o 1.5.8 Install Packages 只要烧录的光碟不是太差，基本上都能正常安装的。 o 1.5.9 Configure System 配置系统是必须和关键的，应当允许hwdetect script自动检测硬件，并生成相应配置。 根据启动时的实际情况选择是否需要对RAID，LVM2，和encrypted volumes的支持，以及 其它必要的支持。 选择熟悉的编辑器后，对 /etc 下的生成的配置文件作适当的修正： rc.conf：设置时区为Asia/Hong_Kong，检查eth0的配置是合适 mkinitcpio.conf：在最后一行的HOOKS 中去除不必要的支持 hosts ：设置主机名和域名 locale.gen：设置本机要支持的locale （zh_CN.utf8,zh_CN.gbk，or zh_TW.utf8） root PassWord：为root 设置管理密码 pacman Mirrors：设置安装源。找一个高速镜像站点，比如： http://mirrors.lcuc.org.cn/archlinux/ ；http://ftp.archlinux.org/ ； http://ftp.belnet.be/packages/archlinux/ ；http://ftp.gigabit.nu/； http://archlinux.puzzle.ch ；http://mirror.cs.vt.edu/pub/ArchLinux/ ； http://ftp.heanet.ie/mirrors/ftp.archlinux.org/； http://distro.ibiblio.org/pub/linux/distributions/archlinux/ o 1.5.10 Install Kernel 略 o 1.5.11 Install Bootloader 推荐GRUB。配置好menu.lst。 如果root 分区用luks 加密过了，那么要把menu.lst 修正为： # () Arch Linux title Arch Linux root (hd0,) kernel /vmlinuz26 root=/dev/sda3 ro initrd /kernel26.img 注意：Bootloader 需要安装到MBR（即 sda 下），而不是 /boot 所在的分区（sda1）。 o 1.5.12 Exit Install 退出安装程式后，取出安装光盘。 # head -n 300 /dev/urandom | tail -n 256 >/mnt/etc/home.key # cryptsetup luksAddKey /dev/sda10 /mnt/etc/home.key 输入密码，确认。 # echo home /dev/sda10 /etc/home.key >>/mnt/etc/crypttab 开机时，用home.key 解开 /dev/sda10 # sed -i /swap/d /mnt/etc/fstab （删除fstab 文件中含有swap 的一栏） #echo swap /dev/sda2 /dev/urandom \" -c aes-cbc-essiv:sha256 -h sha256 -s 256\" &gt;&gt;/mnt/etc/crypttab # echo \"mkswap /dev/mapper/swap\" &gt;&gt;/mnt/etc/rc.local 以上两个命令是设置swap 加密分区。 另外直接在/etc/crypttab 中加入如下内容也起相同作用： swap /dev/sda2 swap -c aes-cbc-essiv:sha256 -h sha256 -s 256 # reboot 2 基础配置 * 2.1 internet access 如果是局域网，视讯宽等无需拨号的网络环境，只需要在/etc/rc.conf中设置好： eth0='\"dhcp\"' 重启电脑后，即可正常上网了。 如果是用pppoe协议拨号上网（如adsl），需安装rp-pppoe安装包，然后： # pppoe-setup # /etc/rc.d/adsl start # /etc/rc.d/adsl stop 或者，使用更好的ppp 安装包（参照wiki ） * 2.2 更新安装包列表 # pacman –syu 更新安装包列表，并升级已安装的包和内核，比自己make world要快多了 # reboot # pacman-optimize 这是优化pacman系统，如果安装时仅选择了base安装，那么优化可能不会成功，因为缺少 diffutils安装包(它在devel里面)，安装它就可以了： # pacman -s diffutils 安装aur 工具（建议安装，好软件多多）： # vi /etc/pacman.conf, 加入: [archlinuxfr] server=http://repo.archlinux.fr/i686/ # pacman -sy yaourt (安装一个pacman前端，如果碰到服务器调整，那就装不了啦） # yaourt -s tupac (速度更快的pacman前端，依赖于yaourt) # tupac -s aurvote 可以通过aurvote对喜欢的aur软件投票，如果票数够多了，该软件就会被加入community。 用“aurvote -h”来查看使用帮助。 如果要对yaourt和tupac这两个软件投票，可以这样做： (1) 到 http://aur.archlinux.org/account.php 注册一个帐号 (2) vi ~/.aruvote，加入 user=YourName pass=YourPassWord (3) aurvote -v yaourt tupac * 2.3 安装多线程多协议的下载工具aria2 # pacman -s aria2 # echo \"xfercommand=/usr/bin/aria2c –s 3 %u\" &gt;&gt;/etc/pacman.conf 用aria2替换默认的wget来安装软件，如果带宽足够大，就不需要用aria2了。 * 2.4 根据个人习惯安装其它shell（如zsh，ksh），当然使用默认的bash也很好 $ sudo pacman -s zsh 关于zsh的介绍，可以参照wiki: http://wiki.archlinux.org/index.php/zsh 可从中获取配置好的 .zshrc 文件，放入$home中。 $ chsh -s /bin/zsh $ source ~/.zshrc * 2.5 安装sudo，用普通用户进入系统 创建一个账户： # useradd –mg users,audio,optical,storage,wheel -s /bin/zsh yourname 创建一个限制用户，有声音支持，有hal 支持，能切换到root 权限 # passwd yourname (如果还没有为root创建密码，要先 #passwd root) # cd /home/youname/ && cp ~/.zshrc ./ && chown youename ./.zshrc # pacman -s sudo # vi /etc/sudoers 加入：yourname all=(ALL) nopasswd: setenv: all 或直接对用户组作出相应设置。 如果主机上会有多个终端同时在用，还要加入\"visudo\"到/etc/sudoers sudo 命令补全（注意，仅适用于bash）： # pacman -s bash-completion # echo source /etc/bash_completion &gt;&gt;/etc/profile # source /etc/profile （或exit, 用普通用户重登录） * 2.6 开启控制台鼠标 (gpm 支持) ，方便控制台下浏览网页 在控制台下浏览网页的工具有：elinks(英文网页), w3m（在cce下可浏览中文网页）： $ sudo pacman elinks w3m cce 用elinks等工具，在控制台下浏览网页，如果没有鼠标支持，实在是很郁闷的事情： $ sudo pacman -s gpm $ sudo vi /etc/conf.d/gpm, 加入: gpm_args='\"-m' /dev/misc/psaux -t ps2\" (ps/2) or gpm_args='\"-m' /dev/input/mice -t imps2\" (usb) $ sudo gpm -m /dev/input/psaux -t ps2 (ps/2) or $ sudo gpm -m /dev/input/mice -t imps2\" (usb) 如果已经正常工作，把gpm 加到rc.conf中的daemons 数组中，让它开机自动运行。 * 2.7 post installation tips (1) colorize your ps1 and console 编辑shell的配置文件（如 ~/.bashrc），加入： export ls_colors="'no=00:fi=00:di=01;37;44:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.xcf=01;35:*.pcx=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.avi=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.mov=01;35:*.qt=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.mp3=01;32:*.wav=01;32:*.mid=01;32:*.midi=01;32:*.au=01;32:*.ogg=01;32:*.flac=01;32:*.aac=01;32:';" 关于提示符的修改，参看一下：http://bbs.linuxsir.org/showthread.php?t=223.44 (2) 实现彩色版的 manpages $ sudo pacman -s most $ vi /etc/man.conf file， change the pager and browser variable to: pager /usr/bin/most -s browser /usr/bin/most –s $ vi ~/.mostrc，add: color normal brightwhite black color status yellow blue color underline white lightblue color overstrike brightcyan black 不过用most是有一些不便之处的，这时可以试试下面的方法，真的挺不错： 1. 在你的主目录创建 .terminfo 目录，并转到该目录： mkdir ~/.terminfo/ && cd ~/.terminfo 2. 从作者网站获取 terminfo 描述文件： wget http://nion.modprobe.de/mostlike.txt 3. 使用 tic 命令编译 mostlike.txt 文件（编译后可删除）： tic mostlike.txt 4. 在shell的配置文件中定义别名： alias man='\"TERMINFO=~/.terminfo/' less=C term=mostlike pager=less man\" 现在使用 man 指令就可以读到彩色版的 manpages 了。如果你需要修改 terminfo 文件，则可以使用 infocmp mostlike。 (3) timesaving command-aliases 编辑shell的配置文件（如 ~/.bashrc），加入： alias ls="'ls" --color="auto'" alias la="'ls" -a --color="auto'" alias ll="'ls" -aoth --color="auto'" alias p="'sudo" pacman&#39; alias t="'sudo" tupac&#39; alias x="'startx'" alias pq="'pacman" -q |grep&#39; alias pa="'sudo" pacman -s&#39; alias pas="'sudo" pacman -ss&#39; alias pau="'sudo" pacman -syu&#39; alias pay="'sudo" pacman -sy&#39; alias pao=”sudo pacman-optimize” alias pasch="'pacman" -sl | cut -d&#39; &#39; -f2 | grep &#39; alias tp="'sudo" tupac -s&#39; alias tps="'sudo" tupac -ss&#39; alias tpu="'sudo" tupac -syu&#39; alias tpy="'sudo" tupac -sy&#39; alias vi="'vim'" alias v="'sudo" vim&#39; alias ps="'ps" ax&#39; alias m="'less" –s&#39; 3 安装一个桌面 * 3.1 xorg $ sudo pacman -s xorg $ sudo x –configure $ sudo vi xorg.conf.new (作出适当的修正) $ x -config xorg.conf.new (测试一下配置文件是否能正常工作，用ctrl+alt+backspace退出x) $ cp xorg.conf.new /etc/x11/xorg.conf 如果发现“x -configure”不能正确配置某些硬件（比如鼠标），可以试试hwd命令： $ sudo pacman -s hwd && sudo hwd -xa 它会在/etc/x11/自动生成一个xorg.conf，并备份原有的文件。 * 3.2 安装显卡驱动 装完xorg后，就已经有了一个通用的vesa驱动了。不过对图形加速支持得不太好。 一般显卡的开源驱动可以用：pacman -ss xf86-video 来搜索到。不过要想较好的支持3d 性能，还需要使用厂商提供的驱动： ati显示芯片：tupac -s catalyst ，参考http://wiki.archlinux.org/index.php/ati nvidia显示芯片可用：tupac -ss nvidia 来搜索，并参考：http://wiki.archlinux.org/index.php/nvidia 不过个人认为，对于nvidia的显卡，最好是直接使用其官方网站上的驱动，下载地址是： http://www.nvidia.cn/download/index.aspx?lang=cn 下载最新的linux驱动(当前是nvidia-linux-x86-169.09-pkg1.run)，然后： $ sudo sh nvidia-linux-x86-169.09-pkg1.run *3.3 安装字体 $ sudo pacman –sy ttf ｜less （从安装包列表中查找可用的字体包） $ sudo pacman –s sdl_ttf font-bh-ttf ttf-dejavu ttf-fireflysung ttf-ms-fonts 当前的开源字体已经相当不错了，尤其是文泉驿字体。 安装文泉驿点阵宋体和正黑体。当前已经进入community 了。 $ tupac -s wqy-bitmapfont wqy-zenhei $ sudo vi /etc/x11/xorg.conf ，增加字体路径 如果没有安装 fontconfig ，就用 pacman 安装一下，然后， 下载本文附件：fonts.conf.tar.gz ，并解压到 $home下： $ tar zxf fonts.conf.tar.gz -c ~/ 这会在 $home下产生一个 .fonts.conf 文件，可以优化中文显示。 如果磁盘上有windows系统，也可以： $ sudo mkdir /usr/share/fonts/msfonts 复制一些windows 字体到此目录下，如：msyh, simhei, simyou 并自行编辑.fonts.conf 文件。当然了，最好不要使用windows字体，因为是有版权的。 *3.4 安装一个顺手的整合桌面环境或窗口管理器 o 3.4.1 gnome $ sudo pacman -s gnome （gnome-extra是附加软件，自行选择安装） o 3.4.2 kde $ sudo pacman -s kde o 3.4.3 xfce + idesk $ sudo pacman -s xfce4 idesk (xfce4-goodies是附加软件，自行选择安装) o 3.4.4 e17 + idesk $ sudo pacman -s e17 idesk o 3.4.5 fvwm + idesk $ sudo pacman -s fvwm idesk (如果要安装最新版本，需自行下载编译安装) o 3.4.6 openbox + rox-filer + lxpanel + idesk $ sudo pacman -s openbox rox lxpanel idesk o 3.4.7 windowmaker + rox-filer + *dockapp + idesk $ sudo pacman -s windowmaker rox lxpanel idesk $ pacman -ss dock , 然后安装中意的dockapp 安装上面任一桌面后，可能还要安装和启用一个顺手的登录管理器，主要有： xdm，gdm，kdm，entrance, slim. 如果要启用gdm，需注释掉/etc/inittab 中“x:5:respawn:/usr/bin/xdm –nodaemon” 这一行，另在/etc/rc.conf 中的 daemons行中加入 gdm，可使开机时自动运行。 ~/.profile 文件中的命令是gdm 登录时会默认调用的。其它与之相似。 如果不用登录管理器，就配置好~/.xinitrc,用\"startx\"命令，直接从console下进入。 参考： http://wiki.archlinux.org/index.php/{gnome,kde,xfce,e17,openbox,gdm,kdm,slim} http://www.fvwm.org http://slim.berlios.de http://icculus.org/openbox/index.php/main_page http://www.windowmaker.info http://roscidus.com http://idesk.sourceforge.net * 3.5 安装中文输入法（fcitx,or scim） o 3.5.1 fcitx $ sudo pacman -s fcitx $ cat &gt;&gt;~/.profile &lt;&lt;eof &gt; lc_ctype='\"zh_CN.utf8\"' &gt; export xmodifiers="@im=fcitx" &gt; export gtk_im_module=xim &gt; export qt_im_module=xim &gt; fcitx & &gt; eof o 3.5.2 scim $ sudo pacman -s scim-tables (或安装scim-fcitx。要用拼音，安装scim-pinying) $ cat &gt;&gt;~/.profile &lt;&lt;eof &gt; lc_ctype='\"zh_CN.utf8\"' &gt; export xmodifiers="@im=SCIM" &gt; export gtk_im_module='\"scim\"' &gt; export qt_im_module='\"scim\"' &gt; scim -f socket -c socket -d &gt; eof # cp ~/.profile ~/.xinitrc # echo exec gnome-session &gt;&gt;~/.xinitrc 这是startx 调用的配置文件。用“&gt;&gt;”,确保了gnome-session是最后被执行的命令。 # startx 4 安装常用软件 * 4.1 x下的虚拟终端 roxterm,tilda和yakuake都是相当棒的虚拟终端。 toxterm同gnome-terminal相似，却要小巧得多。 tilda 可用于 gnome、xfce 桌面，而 yakuake 主要用于 kde 桌面。它们都具有热键控制， 桌面嵌入，背景透明，动画效果，标签页功能和可定制性。 个人偏好tilda，直接用pacman命令安装： # pacman -s tilda （不过最近gnome的metacity似乎对tilda不太友好，老是找不到焦点） * 4.2 网络浏览 使用经过优化的更小巧快速的 swiftfox 来代替firefox。 如果安装了elinks，可以先： $ elinks http://getswift.com/installer.htm 看看有哪些版本可以下载，结合电脑处理器的类型下载，如pentium 4的cpu： $ aria2c –s 4 http://getswiftfox.com/builds/installer/pentium4/install-swiftfox.sh -d /tmp $ vi /tmp/ install-swiftfox.sh （作出适当的修正，不作修正也可） $ sudo sh /tmp/install-swiftfox.sh 也可以选择其他的网络浏览器，比如 opera： # pacman -s opera * 4.3 图像编辑 (1) linux下的photoshop: gimp，要安装它可以执行命令： # pacman -s gimp 你可以通过”应用程序 → 图像 → gimp“来运行 gimp。 (2)矢量图形编辑软件可以使用 inkscape： # pacman -s inkscape (3)命令行的可以装上 imagemagick： # pacman -s imagemagick (4)用来捕获图像的 scrot： # pacman -s scrot (5)轻量级的图像查看软件 gqview： pacman -s gqview 或者 gnome 默认的 eog： pacman -s eog * 4.4 linux下的office软件 (1) openoffice.org ： # pacman -s openoffice-base openoffice-zh_cn 为了让 openoffice.org 运行于 gtk 2 模式，向shell的配置文件（如 ~/.bashrc） 添加： export ooo_force_desktop=gnome (2) 永中office: 国产软件，听说对ms office文档格式的支持要比openoffice好，如果word，exel的文件较多， 可以考虑这个，就是安装略显麻烦。 $ cd ~ $ aria2c -s 4 http://218.90.147.70/evermore/eioffice2007/eio2007_trial_zh_lin.tar.gz （电信）or: $ aria2c -s 4 http://218.104.51.66/evermore/eioffice2007/eio2007_trial_zh_lin.tar.gz (网通) $ tar zxf eio2007_trial_zh_lin.tar.gz 用su命令登录root，再进入解压后文件夹（好像是4开头的）； # ./setup.sh （进入永中office的图形界面安装，指定一下安装目录） 安装完成后，要以root身份运行一下永中： # eio; exit $ cd ~ ; seteio (为普通用户配置下永中) $ eio (从终端运行永中office，或者从菜单中运行也可以) * 4.5 即时通讯 要与朋友即时聊天，我们可以选用 pidgin，它支持 gtalk、msn、qq 等多种协议： pacman -s pidgin 当然，skype 也不可错过： pacman -s skype-staticqt * 4.6 音影播放 (1)音乐播放软件我选择 quod libet，你可以凭自己的喜好来安装： # pacman -s quodlibet 其他的音乐播放器有 mpd、audacious、exaile、amarok 等。 (2)看电影的话，可用mplayer，同时也加上浏览器插件和常用解码器： # pacman -s mplayer mplayer-plugin codecs gstreamer0.10-bad gstreamer0.10-ugly gstreamer0.10-ffmpeg gstreamer0.10-mad gstreamer0.10-mpeg2dec 如果需要 mplayer 的前端，那么可以安装 smplayer： # pacman -s smplayer 当然，另一个选择 vlc 也挺好： # pacman -s vlc * 4.7 下载工具 命令行下载工具，有 wget。此外，aria2 也不错，它支持断点续传和多线程下载： pacman -s aria2 bittorrent 下载工具，我们选用 deluge： pacman -s deluge 其他的包括 azureus、rtorrent 等。 另外，我们把 amule 也安装上： pacman -s amule 为了能够让 amule 直接从 firefox 浏览器中处理 ed2k 链接，我们在 firefox 的 about:config 中新建字符串 network.protocol-handler.app.ed2k，并将其设为 /usr/bin/ed2k。 * 4.8 文本编辑与排版 (1)如果要求简单的话，可以选用 gedit： pacman -s gedit (2)安装 vim，要图形界面的话，可以加上 gvim： pacman -s vim gvim (3)emacs 迷们可以执行： pacman -s emacs emacs cvs 版本可在 community 中找到。 (4)世界第一流的排版工具集 texlive 参看http://wiki.archlinux.org/index.php/texlive 也可额外安装 tex 的集成编辑环境：kile, or lyx * 4.9 安装virtualbox虚拟机 $ sudo tupac -s virtualbox_bin (从aur安装virtualbox 的puel版本) $ sudo vbox_build_module (创建virtualbox的内核) $ sudo gpasswd -a yourname vboxusers (将你的名字加入vboxusers用户组) $ sudo modprobe vboxdrv （如果要立刻开始用，需要加载vboxdrv模块） $ sudo vim /etc/rc.conf： modules中加入vboxdrv，使开机时加载vboxdrv模块. $ virtalbox (从终端运行virtualbox，或从桌面的菜单中运行它) 有时，会因为没有libstdc++5 这个库文件，而使virtualbox不能运行。安装它就是了： $ sudo pacman -s libstdc++5 * 4.10 wine──在unix/linux系统上实现windows api wine用unix的方式实现（或代替了）windows api ，所以通过wine可以在unix-like系统上运行 windows 程序及游戏。 wine-doors是一款基于gnome桌面的windows软件安装管理包，是wine 的辅助工具， 使用非常方便，只需在软件列表中选择要安装的软件，wine-doors就会帮你搞定一切， 不再需要自己动手来配置wine。什么office 2003，photoshop都不在话下了。 $ sudo tupac -s wine wine-doors $ winecfg (配置好wine) $ sudo wine iexplore http://www.winehq.org （安装wine gecko ie engine） $ cp /usr/share/fonts/wenquanyi/wqy-zenhei/wqy-zenhei.ttf ~/.wine/drive_c/windows/fonts 给wine提供一个中文字体：wenquanyi zen hei $ vi ~/zh.reg, add: （编辑wine中文字体支持的注册表文件，否则中文网页会乱码） regedit4 [hkey_local_machine\\software\\microsoft\\windows nt\\currentversion\\fontsubstitutes] \"arial\"='\"WenQuanYi' zen hei\" \"arial ce,238\"='\"WenQuanYi' zen hei\" \"arial cyr,204\"='\"WenQuanYi' zen hei\" \"arial greek,161\"='\"WenQuanYi' zen hei\" \"arial tur,162\"='\"WenQuanYi' zen hei\" \"courier new\"='\"WenQuanYi' zen hei\" \"courier new ce,238\"='\"WenQuanYi' zen hei\" \"courier new cyr,204\"='\"WenQuanYi' zen hei\" \"courier new greek,161\"='\"WenQuanYi' zen hei\" \"courier new tur,162\"='\"WenQuanYi' zen hei\" \"fixedsys\"='\"WenQuanYi' zen hei\" \"helv\"='\"WenQuanYi' zen hei\" \"helvetica\"='\"WenQuanYi' zen hei\" \"ms sans serif\"='\"WenQuanYi' zen hei\" \"ms shell dlg\"='\"WenQuanYi' zen hei\" \"ms shell dlg 2\"='\"WenQuanYi' zen hei\" \"system\"='\"WenQuanYi' zen hei\" \"tahoma\"='\"WenQuanYi' zen hei\" \"times\"='\"WenQuanYi' zen hei\" \"times new roman ce,238\"='\"WenQuanYi' zen hei\" \"times new roman cyr,204\"='\"WenQuanYi' zen hei\" \"times new roman greek,161\"='\"WenQuanYi' zen hei\" \"times new roman tur,162\"='\"WenQuanYi' zen hei\" \"tms rmn\"='\"WenQuanYi' zen hei\" $ regedit zh.reg (将中文字体配置写入wine的注册表) $ wine iexplore http://www.126.com (试验一下中文效果) 需要注意的是，如果从abs系统编译了并升级安装到了最新的wine，一定要运行“wineprefixcreate” 来更新wine的注册表。 * 4.11 其他工具 (1)光盘刻录 kde下建议选择 k3b，可以通过以下指令安装： pacman -s k3b dvd+rw-tools 为了让当前用户能够使用光盘刻录设备，需要将其添加到 optical 用户组中： gpasswd -a yourname optical 如果是gnome用户，建议安装gnomebaker，不亚于k3b: pacman -s gnomebaker (2) ftp上传 可选择命令行的 lftp： pacman -s lftp 图形化的有 gftp、filezilla 等。 ftp下载其实不必特意安装什么，因为wget，aria2都是支持ftp协议的。 (3)文档查看 查看 pdf 文档，可以安装 evince：pacman -s evince 也可以用adobe公司的acroread：pacman -s acroread 或轻量级的xpdf：pacman -s xpdf xpdf-chinese-simplified xpdf-chinese-traditional chm 文档，可以选用kchmviewer (4)新闻阅读 rss 离线阅读软件，用 liferea： pacman -s liferea (5)邮件收发 电子邮件客户端，可以选择 thunderbird： pacman -s thunderbird thunderbird-i18n 或者采用：mutt + msmtp + getmail (6)图形界面的进程查看器 (gps) $ sudo pacman –s gps $ gps 如果是文字界面的话，可用下面的命令： $ ps ax (7)计算器： pacman -s gcalctool (8)压缩/解压 rar、zip 等格式： pacman -s p7zip q7z (安装7zip，q7z是其gui程序) pacman -s unrar unzip 另外，图形化的可以用 file-roller： pacman -s file-roller (9)词典翻译 安装 stardict： pacman -s stardict 同时，词典文件需从 stardict 官方网站下载，并释放到 /usr/share/stardict/dic/ 目录。 (10)java 支持： pacman -s jre (11)flash 插件： pacman -s flashplugin * 4.11 安装主题 gdm 可以安装 arch boomerang underlight 这套清爽的主题。下载后，执行： $ tar zxvf arch-boomerang-underlight-gdm.tar.gz $ mv arch-underlight-* /usr/share/gdm/themes/ $ sudo gdmsetup (需要在x下执行，需要事先安装gdm) 或者，如果在使用gnome，就在”系统 → 系统管理 → 登录窗口“中将样式更改为主题模式， 并选择已安装的主题即可。 参看：http://www.gnome-look.org/ 还可以打造一个 mac os x 风格的界面，参看：http://sourceforge.net/projects/mac4lin 5 常见问题 * 5.1 声音问题 安装alsa。实际上，alsa 已被包含到 2.6 版的内核中。因此，只需安装 alsa 的相关工具即可： pacman -s alsa-utils 接着，将当前用户添加到 audio 用户组，以便使用声卡设备： gpasswd -a yourname audio 同时，将 alsa 添加到 /etc/rc.conf 配置文件的 daemons 中： daemons=(syslog-ng network netfs crond gdm alsa) 值得注意的是，alsa 默认是静音状态，需要先打开音量。另外，也可点击”系统 → 首选 项 → 音效“进行测试。 $ sudo pacman -s alsa-lib alsa-oss alsa-utils (oss 包解决声卡独占问题) $ sudo alsaconf (设置声卡) $ sudo alsamixer $ sudo alsactl store (设置和保存音量，并在 /etc/rc.conf中的 daemons行加入alsa) $ amixer set master 75 unmute $ amixer set pcm 75 unmute (75 好像是原声，再高的话，声音会失真) * 5.2 笔记本电脑可能遇到的问题 (1) 触摸板问题 参看http://wiki.archlinux.org/index.php/touchpad_synaptics (2) 摄像头问题 参看http://wiki.archlinux.org/index.php/webcam_setup (3) 无线上网问题 参看http://wiki.archlinux.org/index.php/wireless (4) 快捷键问题 参看http://wiki.archlinux.org/index.php/extra_keyboard_keys * 5.3 打印机设置 (1) 当前最流行的底层基础打印系统：cups (适用于所有打印机) unix-like系统下的打印系统中，最具易用性的当数cups (the common unix printing system )，即 unix通用打印系统。在过去，unix-like系统下的打印问题是老大难。cups的出现使这个问题得到了 极大的缓解。 安装： # pacman -s cups ghostscript gsfonts cups系统运行记录： 编辑/etc/cups/cupsd.conf，设置loglevel的等级： loglevel debug2 如果出现错误，就可以察看调试信息了： $ tail -n 100 -f /var/log/cups/error_log 看看系统已经加载了哪些模组（modules）： # lsmode |less 再来看看系统中有哪些可以使用的模组： # modprobe -l |less 为内核加载打印机模组后，连接好打印机机，并打开电源： i) usb 接口打印机 # modprobe usblp （2.6.x 内核） # modprobe printer （2.4.x 内核） # tail /var/log/messages.log （看看安装成功了没有） ii) 并口打印机 # modprobe lp parport parport_pc （2.6.x 内核） # modprobe parport parport_pc （2.4.x 内核） # tail /var/log/messages.log （看看安装成功了没有） 将这些模组加入/etc/rc.conf中的modules中去，以便开机时自动加载。 启动 cups ： # /etc/rc.d/cups start （可将cups加入/etc/rc.conf中的daemons中去，以便开机时自动加载） 这个时候，就可以用cups在控制台下做一些简单的打印了，如： $ cat ~/.xinitrc &gt; /dev/usb/lp0 (usb接口打印机) 当然仅仅依靠cups打印，如果在x下，肯定是不方便的。主要是因为缺少驱动，linux下的打印驱动是ppd文件。 (2) 打印驱动： foomatic foomatic是一个数据库驱动的打印系统，它将unix下的通用后台打印系统与开源的打印机驱动整合在一起。 只要有任一在开源驱动下能够正常工作的打印机，它就能支持了。它支持cups, lprng, lpd, gnulpr, solaris lp, ppr, pdq, cps 这些底层的打印系统，也能直接打印（既是驱动也是打印工具）。 foomatic打印速度快，打印质量也挺不错。不过缺点是，有个别的打印机可能没有ppd文件驱动。 # pacman -s foomatic-*** foomatic包含五个安装包： foomatic-filters (帮助后台打印系统将postscript转成打印机语言)， foomatic-db (foomatic-db-engine生成ppd文件时要用到的一切资料)， foomatic-db-ppd (已经获支持的打印驱动) foomatic-db-engine (将 foomatic xmlo数据库中的数据生成ppd文件)， foomatic-db-hpijs (专为hp打印驱动生成foomatic xml 数据)。 一般来说，安装前四个包就可以了。如果没有惠普打印机，就不必安装foomatic-db-hpijs了。 (4) 打印驱动：hplip 惠普deskjet, officejet, photosmart, business inkjet 和一些 laserjet 打印机型号，需要安装hplip。只用于惠普打印机。 也可同时安装上面的foomatic，对比一下两者的打印速度。 # pacman -s hplip (5) 打印驱动：gutenprint 也许以上的打印驱动仍然不行（不过安装foomatic一定是必要的，能提高打印速度）。在配置cups时（即将讲到） 没有找到自己的打印机型号。那么可能还需要接着安装gutenprint。 gutenprint 是gimp的打印扩充功能模块，过去叫\"gimp-print\"，它能够为gimp提供流行的打印驱动，能 让佳能、爱普生、惠普、利盟、索尼、奥林巴斯，以及其他基于pcl技术的打印机，打印出更出色的品质。用于高品质的图像打印是在好不过了。 它支持的打印机型号列表可见于：http://gutenprint.sourceforge.net/p_supported_printers.php3 不过gutenprint的打印品质是没得说，但速度就不敢恭维了。但有foomatic的支持就会快很多。 # pacman -s gutenprint (6) 在x下配置cups 打印基础系统cups和打印驱动安装好的，就要开始配置打印机了。 可以通过配置cups来配置打印机。配置cups的方法适用于一切打印机及其驱动。因此推荐使用。 进入x，打开一个网络浏览器，访问： http://localhost:631 （也可以用在/etc/hosts中设置好的hostname来代替localhost） 按照提示，一步一步的配置好打印机： manage printers ---&gt; add printer ---&gt; root密码验证 ---&gt; 输入打印机名称 ---&gt; 选择设备类型 （打印机型号及其接口：usb接口 or 并口打印机） ---&gt; 选择你的打印机 ---&gt; 通过打印机型号来选择适当的打印机驱动，并add （如果打印驱动的名称中出现了foomatic字样，一定要优先选择） ---&gt; 打印选项的设置 ---&gt; 完成 也可以使用另外的配置界面，不过可能要另外安装： tupac -s gnome-cups-manager (gnome下) tupac -s gtklp (kde下) (5) 打印机共享 i) linux to linux 服务器端：编辑 /etc/cups/cupsd.conf 中“location”一段，以允许客户端的访问，重启cups服务。 客户端：编辑 /etc/cups/cupsd.conf 中“servername”一段，以允许访问服务器端。执行命令：lpq ii) linux to windows 两端都应当安装samba。参看wiki。 iii) windows to linux 两端都应当安装samba。参看wiki ******* 所有关于打印的问题，请一定要参看： http://wiki.archlinux.org/index.php/cups http://www.cups.org/ http://gimp-print.sourceforge.net/ http://www.linuxprinting.org/printer_list.cgi http://www.linux-foundation.org/en/openprinting/database/foomatic http://savannah.nongnu.org/projects/foomatic-gui/ http://wiki.gentoo.tw/mediawiki/index.php/printing-howto 另可参看http://www.redhat.net.cn/online/linuxbook/1/16.htm * 5.4 服务的访问控制 /etc/hosts.allow 和/etc/hosts.deny 这两个文件是tcpd 服务器的配置文件，tcpd 服务器可以控制外部ip 对本机服务的访问。 这两个配置文件的格式如下： #服务进程名:主机列表:当规则匹配时可选的命令操作 server_name:hosts-list[:command] /etc/hosts.allow 控制可以访问本机的ip 地址，/etc/hosts.deny 控制禁止访问本机的ip。 如果两个文件的配置有冲突，以/etc/hosts.deny 为准。下面是一个/etc/hosts.allow 的示例： all: 127.0.0.1: allow #允许本机访问本机所有服务进程 smbd: 192.168.0.0/255.255.255.0 #允许192.168.0.网段的ip 访问smbd 服务 all 关键字匹配所有情况，except 匹配除了某些项之外的情况，paranoid 匹配你想控 制的ip 地址和它的域名不匹配时(域名伪装)的情况。 * 5.5 启动加速 编辑 /etc/rc.conf ，在 “ daemons ”行的一些不急着需要用的后台程序前加上@，使后台运行。 * 5.6 中文java 支持 $java_home/jre/lib/fonts/ 下建一个fallback 的目录，然后建一个中文字体的软链接过去。 * 5.7 可移动设备的自动挂载（hal + dbus or ivman） 及中文名支持 $ sudo pacman -s hal dbus acpid（hal 依赖 dbus，acpid 可管理设备的电源。） $ sudo vi /etc/rc.conf ，在 daemons行 加入hal，如: daemons=(syslog-ng acpid hal network !netfs @crond @alsa gdm) 注意：如果daemons 列表中有dbus，要移除它，以免出错。hal 会自动加载dbus。 $ sudo gpasswd –a username optical $ sudo gpasswd –a username storage 把你的用户加入到 optical，storage 这几个组里面。前文中已经加入过了，可跳过。 如果用ivman来替代dbus，则需要将用户名加入到plugdev组中。 $ sudo vi /etc/fstab，注释掉下面两行： /dev/cdrom /mnt/cdrom iso9660 ro,user,noauto,unhide 0 0 /dev/dvd /mnt/dvd udf ro,user,noauto,unhide 0 0 $ sudo vi /etc/hal/fdi/policy/preferences.fdi，可加入一些很有用的规则， 如自动挂载ntfs文件系统，自动挂载可移动设备，性能优化，u盘的中文名支持等： &lt;?xml version='\"1.\"' encoding='\"UTF-8\"?>' &lt;deviceinfo version='\".2\">' &lt;device&gt; &lt;match key='\"volume.fstype\"' string='\"ntfs\">' &lt;append key='\"volume.mount.valid_options\"' type='\"strlist\">dmask=000</append>' &lt;append key='\"volume.mount.valid_options\"' type='\"strlist\">fmask=111</append>' &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;!-- use utf-8 charset for vfat --&gt; &lt;match key='\"volume.fstype\"' string='\"vfat\">' &lt;merge key='\"volume.policy.mount_option.iocharset=utf8\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;match key='\"storage.hotpluggable\"' bool='\"false\">' &lt;match key='\"storage.removable\"' bool='\"false\">' &lt;merge key='\"storage.automount_enabled_hint\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;match key='\"block.is_volume\"' bool='\"true\">' &lt;match key='\"volume.size\"' compare_lt='\"8000000000\">' &lt;match key='\"@block.storage_device:storage.hotpluggable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">true</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;match key='\"@block.storage_device:storage.removable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">true</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;/match&gt; &lt;match key='\"volume.size\"' compare_ge='\"8000000000\">' &lt;match key='\"@block.storage_device:storage.hotpluggable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">false</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;match key='\"@block.storage_device:storage.removable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">false</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;/match&gt; &lt;/match&gt; &lt;/device&gt; &lt;/deviceinfo&gt; 参看：http://wiki.archlinux.org/index.php/hal 注意，必须事先安装好ntfs-3g安装包，才能成功挂载ntfs分区。最后： $ sudo /etc/rc.d/hal restart 即可正常使用hal支持了，同时移动设备上的中文名（其实其它语言也可以）也可以得到支持。 如果以上不能工作，还可以安装pmount: $ sudo pacman -sy pmount * 5.8 更改gnome 菜单下的图标 可以编辑/usr/share/applications 中的相应文件 * 5.9 archlinux的包管理系统：pacman 常用命令有： pacman -sy abc #和源同步后安装名为abc的包 pacman -s abc #从本地数据库中得到abc的信息，下载安装abc包 pacman -sf abc #强制安装包abc pacman -ss abc #搜索有关abc信息的包 pacman -si abc #从数据库中搜索包abc的信息 pacman -qi abc #列出已安装的包abc的详细信息 pacman -syu #同步源，并更新系统 pacman -sy #仅同步源 pacman -r abc #删除abc包 pacman -rc abc #删除abc包和依赖abc的包 pacman -rsc abc #删除abc包和abc依赖的包 pacman -sc #清理/var/cache/pacman/pkg目录下的旧包 pacman -scc #清除所有下载的包和数据库 pacman -u abc #安装下载的abs包，或新编译的abc包 pacman -sd abc #忽略依赖性问题，安装包abc pacman pacman -su --ignore foo #升级时不升级包foo pacman -sg abc #查询abc这个包组包含的软件包 * 5.10 arch build system (abs) 利用abs 可以从源码自定义编译安装包。其过程如下： (1) synchronize your abs tree with the server. # pacman -s cvsup # abs (2) create a new directory in /var/abs/local/ named after the package you are going to create. $ mkdir -p ~/abs/local/ (这里，推荐在个人的主目录下创建一个abs的工作目录) (3）copy the pkgbuild.proto prototype from /var/abs/ into your newly created directory, remove the .proto suffix, and edit it to fit the new package. $ cp -r /var/abs/... ~/abs/local/ (将你要编译的软件的pkgbuild目录复制到个人目录下) (4) run makepkg in the working directory with the pkgbuild file. $ makepkg (开始编译这前，可以编辑一下pkgbuild文件，更改其默认安装目录到个人 主目录下，用“--prefix＝...”来指定安装目录) (5) install the newly built package with pacman. $ pacman -u ..pkg.gz (安装新编译好的包文件) (6) send the package to your friends for bragging rights (or give it to an archer so s/he can stick it in the master abs tree). * 5.11 创建一个光盘镜像 linux 下创建一个光盘镜像真的很简单，基本上有两类方法： (1) 镜像的源文件在光盘上 将光盘放入光驱，但不用 mount 指令加载它，然后： dd if=/dev/dvd of=dvd.iso # for dvd dd if=/dev/cdrom of=cd.iso # for cdrom dd if=/dev/scd0 of=cd.iso # if cdrom is scsi (2) 镜像的源文件在硬盘上或被 mount 到了硬盘上，比如在 /tmp/directory/： mkisofs -o cd.iso /tmp/directory/ 如果这个源文件是一个dvd视频文件，那么要这样用： mkisofs -dvd-video -o dvd.iso /tmp/directory/ 关于mkisofs 的更多用法，还请参看手册：man mkisofs 关于dvd视频光盘的编辑和创建，请参看： http://gecius.de/linux/dvd.html http://gentoo-wiki.com/howto_create_a_dvd:filesystem 6 服务器环境 * 6.1 ftp服务 (1) vsftpd ftp服务器的安装比较简单。直接用pacman安装即可。当然，还必须配置好，才可正常安全的使用。 vsftpd的使用和配置，可参考： http://vsftpd.beasts.org/ http://gentoo-wiki.com/howto_vsftpd http://www.uplinux.com/www/net/02/117.shtml (2) pureftpd 参考http://www.pureftpd.org/project/pure-ftpd http://www.chinaunix.net/jh/15/2424.html * 6.2 http服务 (1) 提供web服务的程序 能提供web服务的开源程序主要有：apache httpd, lighttpd, 和nginx。 apache稳定，安全，使用者最多，但是运行时对内存、cpu的开销也是最高的。 在静态网页支持上，lighttpd/nginx 比 apache 优胜很多。 如果不考虑虚拟主机的安全设置问题，nginx无疑是最好的选择，其次是lighttpd。 i) apache httpd: 参见http://httpd.apache.org/ ii) lighttpd: 参见http://wiki.archlinux.org/index.php/lighttpd_for_both_ssl_and_non-ssl iii) nginx: 参见http://wiki.codemongers.com/main (2) 动态网页的程序接口(cgi)：fastcgi： 是http服务器与机器上其他程序进行通信的一个接口。这个“其他程序”可以使用任何计算机语言 来编写，它通过cgi这个接口从http服务器取得输入，然后把运行的结果又通过cgi这个接口交给http 服务器，而http服务器把这个结果送给浏览器。提供web服务的程序都有cgi模块。 不过cgi技术的通用性与效率不高，所以有了性能大幅提升的fastcgi。fastcgi要求提供web服务的 程序整合fcgi模块。 参见http://wiki.archlinux.org/index.php/apache_fastcgi http://wiki.archlinux.org/index.php/fastcgi_and_lighttpd (3) 动态网页的脚本语言 php：参见http://wiki.archlinux.org/index.php/php python: 在动态网页上的应用与php相似。 jsp：java语言支持，需安装jdk (4) 数据库 mysql: 当前国内用的较多的数据库。适合小访问量或个人使用。 postgresql: 世界上最先进，最稳定的数据库。能充分发挥出机器的潜能。更加适合大企业环境。 参看http://wiki.archlinux.org/index.php/postgresql (5) http服务器的架构 i) 不带数据库支持的轻量级web：nginx/lighttpd + php/python + fastcgi ii) 有数据库支持：apache/lighttpd + php/python + mysql/postgresql，也可再追加jsp的支持。 参看http://wiki.archlinux.org/index.php/lamp 参见http://wiki.archlinux.org/index.php/apache_fastcgi http://wiki.archlinux.org/index.php/fastcgi_and_lighttpd http://www.knowsky.com/3232.html iii) 更加高效、可靠、稳定的web服务器。下面的架构图比较不错： -------- ------------ ------------- ---------------- -------------- |客户端|="==>" |负载均衡器|="==>" |反向**/缓存|="==>" |web服务器|="==>" |数据库服务器| -------- ------------ ------------- ---------------- -------------- nginx squid apache/lighttpd mysql/postgresql +(php+eaccelerator) + memcache 参看http://huangjt.jobui.com/blog/80186.html (6) 用webdav替代传统的ftp服务 webdav是一个使用xml技术的基于http协议的扩展协议，具备http的所有优点，力图提供 一个网页编辑的统一接口。用它替代传统的ftp服务，可以避免ftp存在的一些中文问题。 参看：http://wiki.archlinux.org/index.php/simple_webdav_setup http://wiki.archlinux.org/index.php/webdav_authentication * 6.3 邮件服务 postfix：参看http://wiki.archlinux.org/index.php/postfix_howto * 6.4 文件共享 文件共享的方法较多，机器上只要安装了任一网络文件系统就可以共享了。网络文件系统有： ftpfs, sshfs, shfs, smbfs, nfs, etc. 当然，使用http服务来共享文件也未尝不可。 (1) shfs sshfs可以开机自动挂载，关机和重启时也可以自动卸载sshfs文件系统，但是它不能用mount来 直接指定-t参数来挂载，因此也不能直接加到/etc/fstab中，而且用df也不能列出那样的分区。 但是shfs解决了这个问题，它能像挂载普通分区那样挂载sshfs文件系统。它是通过内核的shfs 模块来实现的， 参看http://wiki.archlinux.org/index.php/shfs (2) samba 可帮助实现跨平台（linux &lt;---&gt;windows) 的文件共享和打印共享。 参看http://wiki.archlinux.org/index.php/setting_up_samba http://www.samba.org/ (3) nfs 参看http://wiki.archlinux.org/index.php/nfs (2) rsync rsync用于两台机器上文件的同步备份，它本身不算是共享程序，但它能起到共享的作用。通常与ssh合用。 参看http://samba.anu.edu.au/rsync/ http://dz.adj.idv.tw/thread-48-1-4.html * 6.5 远程登录 (1) openssh/openssh-chroot 用 openssh-chroot 基于openssh，但添加了新特性，即可以创建一个chrootjail。chrootjail是单独划分 出的一个空间，以限制远程登录者活动不超出此范围，更不会影响到主系统。所以比用 openssh 更安全。 # pacman -s openssh-chroot # mkdir /var/openssh_chroot # chroot_create /var/openssh_chroot (将chrootjail放到/var/openssh_chroot，或其它地方) # chroot_adduser username /var/openssh_chroot (创建远程登录者帐户，并为其指定chrootjail) # /etc/rc.d/sshd restart (手动重启sshd服务，也可将sshd添加到/etc/rc.conf中的daemon中去) 如果远程机器是unix-like系统，可用：ssh &lt;username&gt;@localhost 来登入；如果是windows, 可使用 putty, or pietty。 参看http://wiki.archlinux.org/index.php/openssh-chroot (2) openvpn * 6.6 安全问题 (1) 防火墙 (iptables) 这个实在不是几句话能讲明白的。不过想提醒几句：要使iptables发挥出最大作用，最好是在一台 旧电脑装上nat+iptables，充当网关，然后自己的电脑跟此网关相连接。 参看：http://wiki.archlinux.org/index.php/firewalls http://wiki.archlinux.org/index.php/simple_stateful_firewall_howto http://gentoo-wiki.com/howto_iptables_for_newbies http://iptables-tutorial.frozentux.net/iptables-tutorial.html http://wiki.archlinux.org/index.php/high_performance_firewall/nat_with_iptables_and_vlans_and_iproute2 (2) 入侵监测 (snort) 这个太复杂了。 有兴趣可以看一看toby kohlenberg等编写的专著\"snort: intrusion detection and prevention toolkit\"。 电子书下载：http://rapidshare.com/files/27449819/snort_intrusion_detection_and_prevention_toolkit_ertu.rar 参看http://www.snort.org/ "><meta property='og:url' content='https://svtter.cn/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B02-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E8%BD%AC%E8%BD%BD/'><meta property='og:site_name' content="Svtter's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Linux'><meta property='article:tag' content='ArchLinux'><meta property='article:tag' content='Database'><meta property='article:published_time' content='2014-12-09T01:00:00+08:00'><meta property='article:modified_time' content='2014-12-09T01:00:00+08:00'><meta name=twitter:title content="archlinux-安装笔记2-常用软件转载"><meta name=twitter:description content=" 本文出自svtter.github.io\n1 Installing Arch Linux * 1.1 Pre-Installation 是i686 架构吗（Pentium II or AMD K6-2以上）？安装方式CD? FTP？ * 1.2 Acquiring Arch Linux 从这里寻找速度最快的镜像： http://wiki.archlinux.org/index.php/Mirror * 1.3 Preparing Installation Media MD5 校验，烧录。 * 1.4 Using the CD-ROM 设置好光驱启动。 * 1.5 Common Installation Procedure o 1.5.1 Loading a non-US Keymap 用km 工具选择非英语键盘 o 1.5.2 Running Setup # /archlinux/setup o 1.5.3 Configure Network (FTP Install only) 仅适用于FTP 安装方式，CD 安装没有必要配置好网络。 o 1.5.4 Prepare Hard Drive 给磁盘分好区，root分区(/)放在主分区比较好（放到逻辑分区也可以）， 如果有 Windows 系统，那它也要占据一个主分区。个人的250G硬盘是这样分区的： # cfdisk sda1 /boot 150M xfs sda2 Windows 18G ntfs sda3 FreeBSD 32G ufs sda5 / 600M xfs sda6 SWAP 2xRam xfs (SWAP分区的大小推荐为内存大小的2倍) sda7 /var 20G xfs sda8 /tmp 5G xfs sda9 /opt 10G xfs sda10 /usr 20G xfs sda11 /home 105G xfs sda12 Files 不大于32G fat32 如果需要加密磁盘，并启用开机验证，推荐使用luks ： 通常加密 root 分区和 /home 分区 # modprobe dm-crypt # modprobe aes-i586 # cryptsetup –y luksFormat /dev/sda3 输入密码，确认。 # cryptsetup –y luksFormat /dev/sda10 输入密码，确认。 # cryptsetup luksOpen /dev/sda3 root 解开root 分区，并建立一个映射：/dev/mapping/root # cryptsetup luksOpen /dev/sda10 home 解开 /home 分区，并建立一个映射：/dev/mapping/home 参看：http://wiki.archlinux.org/index.php/LUKS_Encrypted_Root o 1.5.5 Partition Hard Drives 可以跳过了。 o 1.5.6 Set Filesystem Mountpoints 如果用luks 加密了分区，那么 / 分区需要挂载到：/dev/mapping/root； /home 需要挂载到：/dev/mapping/home. 同时选择一个合适的文件系统（JFS，XFS，Reiserfs...）。 o 1.5.7 Select Packages 至少选择 Base 安装。如果需要一个可编译环境，要选上devel和lib；如果需要ADSL拨号 或WiFi支持，要选上support。 确定后会看到所有将要安装的包，可以在这里去掉一些暂时不想安装的包。要是不清楚就 不管了，几个M的大小而已。 o 1.5.8 Install Packages 只要烧录的光碟不是太差，基本上都能正常安装的。 o 1.5.9 Configure System 配置系统是必须和关键的，应当允许hwdetect script自动检测硬件，并生成相应配置。 根据启动时的实际情况选择是否需要对RAID，LVM2，和encrypted volumes的支持，以及 其它必要的支持。 选择熟悉的编辑器后，对 /etc 下的生成的配置文件作适当的修正： rc.conf：设置时区为Asia/Hong_Kong，检查eth0的配置是合适 mkinitcpio.conf：在最后一行的HOOKS 中去除不必要的支持 hosts ：设置主机名和域名 locale.gen：设置本机要支持的locale （zh_CN.utf8,zh_CN.gbk，or zh_TW.utf8） root PassWord：为root 设置管理密码 pacman Mirrors：设置安装源。找一个高速镜像站点，比如： http://mirrors.lcuc.org.cn/archlinux/ ；http://ftp.archlinux.org/ ； http://ftp.belnet.be/packages/archlinux/ ；http://ftp.gigabit.nu/； http://archlinux.puzzle.ch ；http://mirror.cs.vt.edu/pub/ArchLinux/ ； http://ftp.heanet.ie/mirrors/ftp.archlinux.org/； http://distro.ibiblio.org/pub/linux/distributions/archlinux/ o 1.5.10 Install Kernel 略 o 1.5.11 Install Bootloader 推荐GRUB。配置好menu.lst。 如果root 分区用luks 加密过了，那么要把menu.lst 修正为： # () Arch Linux title Arch Linux root (hd0,) kernel /vmlinuz26 root=/dev/sda3 ro initrd /kernel26.img 注意：Bootloader 需要安装到MBR（即 sda 下），而不是 /boot 所在的分区（sda1）。 o 1.5.12 Exit Install 退出安装程式后，取出安装光盘。 # head -n 300 /dev/urandom | tail -n 256 >/mnt/etc/home.key # cryptsetup luksAddKey /dev/sda10 /mnt/etc/home.key 输入密码，确认。 # echo home /dev/sda10 /etc/home.key >>/mnt/etc/crypttab 开机时，用home.key 解开 /dev/sda10 # sed -i /swap/d /mnt/etc/fstab （删除fstab 文件中含有swap 的一栏） #echo swap /dev/sda2 /dev/urandom \" -c aes-cbc-essiv:sha256 -h sha256 -s 256\" &gt;&gt;/mnt/etc/crypttab # echo \"mkswap /dev/mapper/swap\" &gt;&gt;/mnt/etc/rc.local 以上两个命令是设置swap 加密分区。 另外直接在/etc/crypttab 中加入如下内容也起相同作用： swap /dev/sda2 swap -c aes-cbc-essiv:sha256 -h sha256 -s 256 # reboot 2 基础配置 * 2.1 internet access 如果是局域网，视讯宽等无需拨号的网络环境，只需要在/etc/rc.conf中设置好： eth0='\"dhcp\"' 重启电脑后，即可正常上网了。 如果是用pppoe协议拨号上网（如adsl），需安装rp-pppoe安装包，然后： # pppoe-setup # /etc/rc.d/adsl start # /etc/rc.d/adsl stop 或者，使用更好的ppp 安装包（参照wiki ） * 2.2 更新安装包列表 # pacman –syu 更新安装包列表，并升级已安装的包和内核，比自己make world要快多了 # reboot # pacman-optimize 这是优化pacman系统，如果安装时仅选择了base安装，那么优化可能不会成功，因为缺少 diffutils安装包(它在devel里面)，安装它就可以了： # pacman -s diffutils 安装aur 工具（建议安装，好软件多多）： # vi /etc/pacman.conf, 加入: [archlinuxfr] server=http://repo.archlinux.fr/i686/ # pacman -sy yaourt (安装一个pacman前端，如果碰到服务器调整，那就装不了啦） # yaourt -s tupac (速度更快的pacman前端，依赖于yaourt) # tupac -s aurvote 可以通过aurvote对喜欢的aur软件投票，如果票数够多了，该软件就会被加入community。 用“aurvote -h”来查看使用帮助。 如果要对yaourt和tupac这两个软件投票，可以这样做： (1) 到 http://aur.archlinux.org/account.php 注册一个帐号 (2) vi ~/.aruvote，加入 user=YourName pass=YourPassWord (3) aurvote -v yaourt tupac * 2.3 安装多线程多协议的下载工具aria2 # pacman -s aria2 # echo \"xfercommand=/usr/bin/aria2c –s 3 %u\" &gt;&gt;/etc/pacman.conf 用aria2替换默认的wget来安装软件，如果带宽足够大，就不需要用aria2了。 * 2.4 根据个人习惯安装其它shell（如zsh，ksh），当然使用默认的bash也很好 $ sudo pacman -s zsh 关于zsh的介绍，可以参照wiki: http://wiki.archlinux.org/index.php/zsh 可从中获取配置好的 .zshrc 文件，放入$home中。 $ chsh -s /bin/zsh $ source ~/.zshrc * 2.5 安装sudo，用普通用户进入系统 创建一个账户： # useradd –mg users,audio,optical,storage,wheel -s /bin/zsh yourname 创建一个限制用户，有声音支持，有hal 支持，能切换到root 权限 # passwd yourname (如果还没有为root创建密码，要先 #passwd root) # cd /home/youname/ && cp ~/.zshrc ./ && chown youename ./.zshrc # pacman -s sudo # vi /etc/sudoers 加入：yourname all=(ALL) nopasswd: setenv: all 或直接对用户组作出相应设置。 如果主机上会有多个终端同时在用，还要加入\"visudo\"到/etc/sudoers sudo 命令补全（注意，仅适用于bash）： # pacman -s bash-completion # echo source /etc/bash_completion &gt;&gt;/etc/profile # source /etc/profile （或exit, 用普通用户重登录） * 2.6 开启控制台鼠标 (gpm 支持) ，方便控制台下浏览网页 在控制台下浏览网页的工具有：elinks(英文网页), w3m（在cce下可浏览中文网页）： $ sudo pacman elinks w3m cce 用elinks等工具，在控制台下浏览网页，如果没有鼠标支持，实在是很郁闷的事情： $ sudo pacman -s gpm $ sudo vi /etc/conf.d/gpm, 加入: gpm_args='\"-m' /dev/misc/psaux -t ps2\" (ps/2) or gpm_args='\"-m' /dev/input/mice -t imps2\" (usb) $ sudo gpm -m /dev/input/psaux -t ps2 (ps/2) or $ sudo gpm -m /dev/input/mice -t imps2\" (usb) 如果已经正常工作，把gpm 加到rc.conf中的daemons 数组中，让它开机自动运行。 * 2.7 post installation tips (1) colorize your ps1 and console 编辑shell的配置文件（如 ~/.bashrc），加入： export ls_colors="'no=00:fi=00:di=01;37;44:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.xcf=01;35:*.pcx=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.avi=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.mov=01;35:*.qt=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.mp3=01;32:*.wav=01;32:*.mid=01;32:*.midi=01;32:*.au=01;32:*.ogg=01;32:*.flac=01;32:*.aac=01;32:';" 关于提示符的修改，参看一下：http://bbs.linuxsir.org/showthread.php?t=223.44 (2) 实现彩色版的 manpages $ sudo pacman -s most $ vi /etc/man.conf file， change the pager and browser variable to: pager /usr/bin/most -s browser /usr/bin/most –s $ vi ~/.mostrc，add: color normal brightwhite black color status yellow blue color underline white lightblue color overstrike brightcyan black 不过用most是有一些不便之处的，这时可以试试下面的方法，真的挺不错： 1. 在你的主目录创建 .terminfo 目录，并转到该目录： mkdir ~/.terminfo/ && cd ~/.terminfo 2. 从作者网站获取 terminfo 描述文件： wget http://nion.modprobe.de/mostlike.txt 3. 使用 tic 命令编译 mostlike.txt 文件（编译后可删除）： tic mostlike.txt 4. 在shell的配置文件中定义别名： alias man='\"TERMINFO=~/.terminfo/' less=C term=mostlike pager=less man\" 现在使用 man 指令就可以读到彩色版的 manpages 了。如果你需要修改 terminfo 文件，则可以使用 infocmp mostlike。 (3) timesaving command-aliases 编辑shell的配置文件（如 ~/.bashrc），加入： alias ls="'ls" --color="auto'" alias la="'ls" -a --color="auto'" alias ll="'ls" -aoth --color="auto'" alias p="'sudo" pacman&#39; alias t="'sudo" tupac&#39; alias x="'startx'" alias pq="'pacman" -q |grep&#39; alias pa="'sudo" pacman -s&#39; alias pas="'sudo" pacman -ss&#39; alias pau="'sudo" pacman -syu&#39; alias pay="'sudo" pacman -sy&#39; alias pao=”sudo pacman-optimize” alias pasch="'pacman" -sl | cut -d&#39; &#39; -f2 | grep &#39; alias tp="'sudo" tupac -s&#39; alias tps="'sudo" tupac -ss&#39; alias tpu="'sudo" tupac -syu&#39; alias tpy="'sudo" tupac -sy&#39; alias vi="'vim'" alias v="'sudo" vim&#39; alias ps="'ps" ax&#39; alias m="'less" –s&#39; 3 安装一个桌面 * 3.1 xorg $ sudo pacman -s xorg $ sudo x –configure $ sudo vi xorg.conf.new (作出适当的修正) $ x -config xorg.conf.new (测试一下配置文件是否能正常工作，用ctrl+alt+backspace退出x) $ cp xorg.conf.new /etc/x11/xorg.conf 如果发现“x -configure”不能正确配置某些硬件（比如鼠标），可以试试hwd命令： $ sudo pacman -s hwd && sudo hwd -xa 它会在/etc/x11/自动生成一个xorg.conf，并备份原有的文件。 * 3.2 安装显卡驱动 装完xorg后，就已经有了一个通用的vesa驱动了。不过对图形加速支持得不太好。 一般显卡的开源驱动可以用：pacman -ss xf86-video 来搜索到。不过要想较好的支持3d 性能，还需要使用厂商提供的驱动： ati显示芯片：tupac -s catalyst ，参考http://wiki.archlinux.org/index.php/ati nvidia显示芯片可用：tupac -ss nvidia 来搜索，并参考：http://wiki.archlinux.org/index.php/nvidia 不过个人认为，对于nvidia的显卡，最好是直接使用其官方网站上的驱动，下载地址是： http://www.nvidia.cn/download/index.aspx?lang=cn 下载最新的linux驱动(当前是nvidia-linux-x86-169.09-pkg1.run)，然后： $ sudo sh nvidia-linux-x86-169.09-pkg1.run *3.3 安装字体 $ sudo pacman –sy ttf ｜less （从安装包列表中查找可用的字体包） $ sudo pacman –s sdl_ttf font-bh-ttf ttf-dejavu ttf-fireflysung ttf-ms-fonts 当前的开源字体已经相当不错了，尤其是文泉驿字体。 安装文泉驿点阵宋体和正黑体。当前已经进入community 了。 $ tupac -s wqy-bitmapfont wqy-zenhei $ sudo vi /etc/x11/xorg.conf ，增加字体路径 如果没有安装 fontconfig ，就用 pacman 安装一下，然后， 下载本文附件：fonts.conf.tar.gz ，并解压到 $home下： $ tar zxf fonts.conf.tar.gz -c ~/ 这会在 $home下产生一个 .fonts.conf 文件，可以优化中文显示。 如果磁盘上有windows系统，也可以： $ sudo mkdir /usr/share/fonts/msfonts 复制一些windows 字体到此目录下，如：msyh, simhei, simyou 并自行编辑.fonts.conf 文件。当然了，最好不要使用windows字体，因为是有版权的。 *3.4 安装一个顺手的整合桌面环境或窗口管理器 o 3.4.1 gnome $ sudo pacman -s gnome （gnome-extra是附加软件，自行选择安装） o 3.4.2 kde $ sudo pacman -s kde o 3.4.3 xfce + idesk $ sudo pacman -s xfce4 idesk (xfce4-goodies是附加软件，自行选择安装) o 3.4.4 e17 + idesk $ sudo pacman -s e17 idesk o 3.4.5 fvwm + idesk $ sudo pacman -s fvwm idesk (如果要安装最新版本，需自行下载编译安装) o 3.4.6 openbox + rox-filer + lxpanel + idesk $ sudo pacman -s openbox rox lxpanel idesk o 3.4.7 windowmaker + rox-filer + *dockapp + idesk $ sudo pacman -s windowmaker rox lxpanel idesk $ pacman -ss dock , 然后安装中意的dockapp 安装上面任一桌面后，可能还要安装和启用一个顺手的登录管理器，主要有： xdm，gdm，kdm，entrance, slim. 如果要启用gdm，需注释掉/etc/inittab 中“x:5:respawn:/usr/bin/xdm –nodaemon” 这一行，另在/etc/rc.conf 中的 daemons行中加入 gdm，可使开机时自动运行。 ~/.profile 文件中的命令是gdm 登录时会默认调用的。其它与之相似。 如果不用登录管理器，就配置好~/.xinitrc,用\"startx\"命令，直接从console下进入。 参考： http://wiki.archlinux.org/index.php/{gnome,kde,xfce,e17,openbox,gdm,kdm,slim} http://www.fvwm.org http://slim.berlios.de http://icculus.org/openbox/index.php/main_page http://www.windowmaker.info http://roscidus.com http://idesk.sourceforge.net * 3.5 安装中文输入法（fcitx,or scim） o 3.5.1 fcitx $ sudo pacman -s fcitx $ cat &gt;&gt;~/.profile &lt;&lt;eof &gt; lc_ctype='\"zh_CN.utf8\"' &gt; export xmodifiers="@im=fcitx" &gt; export gtk_im_module=xim &gt; export qt_im_module=xim &gt; fcitx & &gt; eof o 3.5.2 scim $ sudo pacman -s scim-tables (或安装scim-fcitx。要用拼音，安装scim-pinying) $ cat &gt;&gt;~/.profile &lt;&lt;eof &gt; lc_ctype='\"zh_CN.utf8\"' &gt; export xmodifiers="@im=SCIM" &gt; export gtk_im_module='\"scim\"' &gt; export qt_im_module='\"scim\"' &gt; scim -f socket -c socket -d &gt; eof # cp ~/.profile ~/.xinitrc # echo exec gnome-session &gt;&gt;~/.xinitrc 这是startx 调用的配置文件。用“&gt;&gt;”,确保了gnome-session是最后被执行的命令。 # startx 4 安装常用软件 * 4.1 x下的虚拟终端 roxterm,tilda和yakuake都是相当棒的虚拟终端。 toxterm同gnome-terminal相似，却要小巧得多。 tilda 可用于 gnome、xfce 桌面，而 yakuake 主要用于 kde 桌面。它们都具有热键控制， 桌面嵌入，背景透明，动画效果，标签页功能和可定制性。 个人偏好tilda，直接用pacman命令安装： # pacman -s tilda （不过最近gnome的metacity似乎对tilda不太友好，老是找不到焦点） * 4.2 网络浏览 使用经过优化的更小巧快速的 swiftfox 来代替firefox。 如果安装了elinks，可以先： $ elinks http://getswift.com/installer.htm 看看有哪些版本可以下载，结合电脑处理器的类型下载，如pentium 4的cpu： $ aria2c –s 4 http://getswiftfox.com/builds/installer/pentium4/install-swiftfox.sh -d /tmp $ vi /tmp/ install-swiftfox.sh （作出适当的修正，不作修正也可） $ sudo sh /tmp/install-swiftfox.sh 也可以选择其他的网络浏览器，比如 opera： # pacman -s opera * 4.3 图像编辑 (1) linux下的photoshop: gimp，要安装它可以执行命令： # pacman -s gimp 你可以通过”应用程序 → 图像 → gimp“来运行 gimp。 (2)矢量图形编辑软件可以使用 inkscape： # pacman -s inkscape (3)命令行的可以装上 imagemagick： # pacman -s imagemagick (4)用来捕获图像的 scrot： # pacman -s scrot (5)轻量级的图像查看软件 gqview： pacman -s gqview 或者 gnome 默认的 eog： pacman -s eog * 4.4 linux下的office软件 (1) openoffice.org ： # pacman -s openoffice-base openoffice-zh_cn 为了让 openoffice.org 运行于 gtk 2 模式，向shell的配置文件（如 ~/.bashrc） 添加： export ooo_force_desktop=gnome (2) 永中office: 国产软件，听说对ms office文档格式的支持要比openoffice好，如果word，exel的文件较多， 可以考虑这个，就是安装略显麻烦。 $ cd ~ $ aria2c -s 4 http://218.90.147.70/evermore/eioffice2007/eio2007_trial_zh_lin.tar.gz （电信）or: $ aria2c -s 4 http://218.104.51.66/evermore/eioffice2007/eio2007_trial_zh_lin.tar.gz (网通) $ tar zxf eio2007_trial_zh_lin.tar.gz 用su命令登录root，再进入解压后文件夹（好像是4开头的）； # ./setup.sh （进入永中office的图形界面安装，指定一下安装目录） 安装完成后，要以root身份运行一下永中： # eio; exit $ cd ~ ; seteio (为普通用户配置下永中) $ eio (从终端运行永中office，或者从菜单中运行也可以) * 4.5 即时通讯 要与朋友即时聊天，我们可以选用 pidgin，它支持 gtalk、msn、qq 等多种协议： pacman -s pidgin 当然，skype 也不可错过： pacman -s skype-staticqt * 4.6 音影播放 (1)音乐播放软件我选择 quod libet，你可以凭自己的喜好来安装： # pacman -s quodlibet 其他的音乐播放器有 mpd、audacious、exaile、amarok 等。 (2)看电影的话，可用mplayer，同时也加上浏览器插件和常用解码器： # pacman -s mplayer mplayer-plugin codecs gstreamer0.10-bad gstreamer0.10-ugly gstreamer0.10-ffmpeg gstreamer0.10-mad gstreamer0.10-mpeg2dec 如果需要 mplayer 的前端，那么可以安装 smplayer： # pacman -s smplayer 当然，另一个选择 vlc 也挺好： # pacman -s vlc * 4.7 下载工具 命令行下载工具，有 wget。此外，aria2 也不错，它支持断点续传和多线程下载： pacman -s aria2 bittorrent 下载工具，我们选用 deluge： pacman -s deluge 其他的包括 azureus、rtorrent 等。 另外，我们把 amule 也安装上： pacman -s amule 为了能够让 amule 直接从 firefox 浏览器中处理 ed2k 链接，我们在 firefox 的 about:config 中新建字符串 network.protocol-handler.app.ed2k，并将其设为 /usr/bin/ed2k。 * 4.8 文本编辑与排版 (1)如果要求简单的话，可以选用 gedit： pacman -s gedit (2)安装 vim，要图形界面的话，可以加上 gvim： pacman -s vim gvim (3)emacs 迷们可以执行： pacman -s emacs emacs cvs 版本可在 community 中找到。 (4)世界第一流的排版工具集 texlive 参看http://wiki.archlinux.org/index.php/texlive 也可额外安装 tex 的集成编辑环境：kile, or lyx * 4.9 安装virtualbox虚拟机 $ sudo tupac -s virtualbox_bin (从aur安装virtualbox 的puel版本) $ sudo vbox_build_module (创建virtualbox的内核) $ sudo gpasswd -a yourname vboxusers (将你的名字加入vboxusers用户组) $ sudo modprobe vboxdrv （如果要立刻开始用，需要加载vboxdrv模块） $ sudo vim /etc/rc.conf： modules中加入vboxdrv，使开机时加载vboxdrv模块. $ virtalbox (从终端运行virtualbox，或从桌面的菜单中运行它) 有时，会因为没有libstdc++5 这个库文件，而使virtualbox不能运行。安装它就是了： $ sudo pacman -s libstdc++5 * 4.10 wine──在unix/linux系统上实现windows api wine用unix的方式实现（或代替了）windows api ，所以通过wine可以在unix-like系统上运行 windows 程序及游戏。 wine-doors是一款基于gnome桌面的windows软件安装管理包，是wine 的辅助工具， 使用非常方便，只需在软件列表中选择要安装的软件，wine-doors就会帮你搞定一切， 不再需要自己动手来配置wine。什么office 2003，photoshop都不在话下了。 $ sudo tupac -s wine wine-doors $ winecfg (配置好wine) $ sudo wine iexplore http://www.winehq.org （安装wine gecko ie engine） $ cp /usr/share/fonts/wenquanyi/wqy-zenhei/wqy-zenhei.ttf ~/.wine/drive_c/windows/fonts 给wine提供一个中文字体：wenquanyi zen hei $ vi ~/zh.reg, add: （编辑wine中文字体支持的注册表文件，否则中文网页会乱码） regedit4 [hkey_local_machine\\software\\microsoft\\windows nt\\currentversion\\fontsubstitutes] \"arial\"='\"WenQuanYi' zen hei\" \"arial ce,238\"='\"WenQuanYi' zen hei\" \"arial cyr,204\"='\"WenQuanYi' zen hei\" \"arial greek,161\"='\"WenQuanYi' zen hei\" \"arial tur,162\"='\"WenQuanYi' zen hei\" \"courier new\"='\"WenQuanYi' zen hei\" \"courier new ce,238\"='\"WenQuanYi' zen hei\" \"courier new cyr,204\"='\"WenQuanYi' zen hei\" \"courier new greek,161\"='\"WenQuanYi' zen hei\" \"courier new tur,162\"='\"WenQuanYi' zen hei\" \"fixedsys\"='\"WenQuanYi' zen hei\" \"helv\"='\"WenQuanYi' zen hei\" \"helvetica\"='\"WenQuanYi' zen hei\" \"ms sans serif\"='\"WenQuanYi' zen hei\" \"ms shell dlg\"='\"WenQuanYi' zen hei\" \"ms shell dlg 2\"='\"WenQuanYi' zen hei\" \"system\"='\"WenQuanYi' zen hei\" \"tahoma\"='\"WenQuanYi' zen hei\" \"times\"='\"WenQuanYi' zen hei\" \"times new roman ce,238\"='\"WenQuanYi' zen hei\" \"times new roman cyr,204\"='\"WenQuanYi' zen hei\" \"times new roman greek,161\"='\"WenQuanYi' zen hei\" \"times new roman tur,162\"='\"WenQuanYi' zen hei\" \"tms rmn\"='\"WenQuanYi' zen hei\" $ regedit zh.reg (将中文字体配置写入wine的注册表) $ wine iexplore http://www.126.com (试验一下中文效果) 需要注意的是，如果从abs系统编译了并升级安装到了最新的wine，一定要运行“wineprefixcreate” 来更新wine的注册表。 * 4.11 其他工具 (1)光盘刻录 kde下建议选择 k3b，可以通过以下指令安装： pacman -s k3b dvd+rw-tools 为了让当前用户能够使用光盘刻录设备，需要将其添加到 optical 用户组中： gpasswd -a yourname optical 如果是gnome用户，建议安装gnomebaker，不亚于k3b: pacman -s gnomebaker (2) ftp上传 可选择命令行的 lftp： pacman -s lftp 图形化的有 gftp、filezilla 等。 ftp下载其实不必特意安装什么，因为wget，aria2都是支持ftp协议的。 (3)文档查看 查看 pdf 文档，可以安装 evince：pacman -s evince 也可以用adobe公司的acroread：pacman -s acroread 或轻量级的xpdf：pacman -s xpdf xpdf-chinese-simplified xpdf-chinese-traditional chm 文档，可以选用kchmviewer (4)新闻阅读 rss 离线阅读软件，用 liferea： pacman -s liferea (5)邮件收发 电子邮件客户端，可以选择 thunderbird： pacman -s thunderbird thunderbird-i18n 或者采用：mutt + msmtp + getmail (6)图形界面的进程查看器 (gps) $ sudo pacman –s gps $ gps 如果是文字界面的话，可用下面的命令： $ ps ax (7)计算器： pacman -s gcalctool (8)压缩/解压 rar、zip 等格式： pacman -s p7zip q7z (安装7zip，q7z是其gui程序) pacman -s unrar unzip 另外，图形化的可以用 file-roller： pacman -s file-roller (9)词典翻译 安装 stardict： pacman -s stardict 同时，词典文件需从 stardict 官方网站下载，并释放到 /usr/share/stardict/dic/ 目录。 (10)java 支持： pacman -s jre (11)flash 插件： pacman -s flashplugin * 4.11 安装主题 gdm 可以安装 arch boomerang underlight 这套清爽的主题。下载后，执行： $ tar zxvf arch-boomerang-underlight-gdm.tar.gz $ mv arch-underlight-* /usr/share/gdm/themes/ $ sudo gdmsetup (需要在x下执行，需要事先安装gdm) 或者，如果在使用gnome，就在”系统 → 系统管理 → 登录窗口“中将样式更改为主题模式， 并选择已安装的主题即可。 参看：http://www.gnome-look.org/ 还可以打造一个 mac os x 风格的界面，参看：http://sourceforge.net/projects/mac4lin 5 常见问题 * 5.1 声音问题 安装alsa。实际上，alsa 已被包含到 2.6 版的内核中。因此，只需安装 alsa 的相关工具即可： pacman -s alsa-utils 接着，将当前用户添加到 audio 用户组，以便使用声卡设备： gpasswd -a yourname audio 同时，将 alsa 添加到 /etc/rc.conf 配置文件的 daemons 中： daemons=(syslog-ng network netfs crond gdm alsa) 值得注意的是，alsa 默认是静音状态，需要先打开音量。另外，也可点击”系统 → 首选 项 → 音效“进行测试。 $ sudo pacman -s alsa-lib alsa-oss alsa-utils (oss 包解决声卡独占问题) $ sudo alsaconf (设置声卡) $ sudo alsamixer $ sudo alsactl store (设置和保存音量，并在 /etc/rc.conf中的 daemons行加入alsa) $ amixer set master 75 unmute $ amixer set pcm 75 unmute (75 好像是原声，再高的话，声音会失真) * 5.2 笔记本电脑可能遇到的问题 (1) 触摸板问题 参看http://wiki.archlinux.org/index.php/touchpad_synaptics (2) 摄像头问题 参看http://wiki.archlinux.org/index.php/webcam_setup (3) 无线上网问题 参看http://wiki.archlinux.org/index.php/wireless (4) 快捷键问题 参看http://wiki.archlinux.org/index.php/extra_keyboard_keys * 5.3 打印机设置 (1) 当前最流行的底层基础打印系统：cups (适用于所有打印机) unix-like系统下的打印系统中，最具易用性的当数cups (the common unix printing system )，即 unix通用打印系统。在过去，unix-like系统下的打印问题是老大难。cups的出现使这个问题得到了 极大的缓解。 安装： # pacman -s cups ghostscript gsfonts cups系统运行记录： 编辑/etc/cups/cupsd.conf，设置loglevel的等级： loglevel debug2 如果出现错误，就可以察看调试信息了： $ tail -n 100 -f /var/log/cups/error_log 看看系统已经加载了哪些模组（modules）： # lsmode |less 再来看看系统中有哪些可以使用的模组： # modprobe -l |less 为内核加载打印机模组后，连接好打印机机，并打开电源： i) usb 接口打印机 # modprobe usblp （2.6.x 内核） # modprobe printer （2.4.x 内核） # tail /var/log/messages.log （看看安装成功了没有） ii) 并口打印机 # modprobe lp parport parport_pc （2.6.x 内核） # modprobe parport parport_pc （2.4.x 内核） # tail /var/log/messages.log （看看安装成功了没有） 将这些模组加入/etc/rc.conf中的modules中去，以便开机时自动加载。 启动 cups ： # /etc/rc.d/cups start （可将cups加入/etc/rc.conf中的daemons中去，以便开机时自动加载） 这个时候，就可以用cups在控制台下做一些简单的打印了，如： $ cat ~/.xinitrc &gt; /dev/usb/lp0 (usb接口打印机) 当然仅仅依靠cups打印，如果在x下，肯定是不方便的。主要是因为缺少驱动，linux下的打印驱动是ppd文件。 (2) 打印驱动： foomatic foomatic是一个数据库驱动的打印系统，它将unix下的通用后台打印系统与开源的打印机驱动整合在一起。 只要有任一在开源驱动下能够正常工作的打印机，它就能支持了。它支持cups, lprng, lpd, gnulpr, solaris lp, ppr, pdq, cps 这些底层的打印系统，也能直接打印（既是驱动也是打印工具）。 foomatic打印速度快，打印质量也挺不错。不过缺点是，有个别的打印机可能没有ppd文件驱动。 # pacman -s foomatic-*** foomatic包含五个安装包： foomatic-filters (帮助后台打印系统将postscript转成打印机语言)， foomatic-db (foomatic-db-engine生成ppd文件时要用到的一切资料)， foomatic-db-ppd (已经获支持的打印驱动) foomatic-db-engine (将 foomatic xmlo数据库中的数据生成ppd文件)， foomatic-db-hpijs (专为hp打印驱动生成foomatic xml 数据)。 一般来说，安装前四个包就可以了。如果没有惠普打印机，就不必安装foomatic-db-hpijs了。 (4) 打印驱动：hplip 惠普deskjet, officejet, photosmart, business inkjet 和一些 laserjet 打印机型号，需要安装hplip。只用于惠普打印机。 也可同时安装上面的foomatic，对比一下两者的打印速度。 # pacman -s hplip (5) 打印驱动：gutenprint 也许以上的打印驱动仍然不行（不过安装foomatic一定是必要的，能提高打印速度）。在配置cups时（即将讲到） 没有找到自己的打印机型号。那么可能还需要接着安装gutenprint。 gutenprint 是gimp的打印扩充功能模块，过去叫\"gimp-print\"，它能够为gimp提供流行的打印驱动，能 让佳能、爱普生、惠普、利盟、索尼、奥林巴斯，以及其他基于pcl技术的打印机，打印出更出色的品质。用于高品质的图像打印是在好不过了。 它支持的打印机型号列表可见于：http://gutenprint.sourceforge.net/p_supported_printers.php3 不过gutenprint的打印品质是没得说，但速度就不敢恭维了。但有foomatic的支持就会快很多。 # pacman -s gutenprint (6) 在x下配置cups 打印基础系统cups和打印驱动安装好的，就要开始配置打印机了。 可以通过配置cups来配置打印机。配置cups的方法适用于一切打印机及其驱动。因此推荐使用。 进入x，打开一个网络浏览器，访问： http://localhost:631 （也可以用在/etc/hosts中设置好的hostname来代替localhost） 按照提示，一步一步的配置好打印机： manage printers ---&gt; add printer ---&gt; root密码验证 ---&gt; 输入打印机名称 ---&gt; 选择设备类型 （打印机型号及其接口：usb接口 or 并口打印机） ---&gt; 选择你的打印机 ---&gt; 通过打印机型号来选择适当的打印机驱动，并add （如果打印驱动的名称中出现了foomatic字样，一定要优先选择） ---&gt; 打印选项的设置 ---&gt; 完成 也可以使用另外的配置界面，不过可能要另外安装： tupac -s gnome-cups-manager (gnome下) tupac -s gtklp (kde下) (5) 打印机共享 i) linux to linux 服务器端：编辑 /etc/cups/cupsd.conf 中“location”一段，以允许客户端的访问，重启cups服务。 客户端：编辑 /etc/cups/cupsd.conf 中“servername”一段，以允许访问服务器端。执行命令：lpq ii) linux to windows 两端都应当安装samba。参看wiki。 iii) windows to linux 两端都应当安装samba。参看wiki ******* 所有关于打印的问题，请一定要参看： http://wiki.archlinux.org/index.php/cups http://www.cups.org/ http://gimp-print.sourceforge.net/ http://www.linuxprinting.org/printer_list.cgi http://www.linux-foundation.org/en/openprinting/database/foomatic http://savannah.nongnu.org/projects/foomatic-gui/ http://wiki.gentoo.tw/mediawiki/index.php/printing-howto 另可参看http://www.redhat.net.cn/online/linuxbook/1/16.htm * 5.4 服务的访问控制 /etc/hosts.allow 和/etc/hosts.deny 这两个文件是tcpd 服务器的配置文件，tcpd 服务器可以控制外部ip 对本机服务的访问。 这两个配置文件的格式如下： #服务进程名:主机列表:当规则匹配时可选的命令操作 server_name:hosts-list[:command] /etc/hosts.allow 控制可以访问本机的ip 地址，/etc/hosts.deny 控制禁止访问本机的ip。 如果两个文件的配置有冲突，以/etc/hosts.deny 为准。下面是一个/etc/hosts.allow 的示例： all: 127.0.0.1: allow #允许本机访问本机所有服务进程 smbd: 192.168.0.0/255.255.255.0 #允许192.168.0.网段的ip 访问smbd 服务 all 关键字匹配所有情况，except 匹配除了某些项之外的情况，paranoid 匹配你想控 制的ip 地址和它的域名不匹配时(域名伪装)的情况。 * 5.5 启动加速 编辑 /etc/rc.conf ，在 “ daemons ”行的一些不急着需要用的后台程序前加上@，使后台运行。 * 5.6 中文java 支持 $java_home/jre/lib/fonts/ 下建一个fallback 的目录，然后建一个中文字体的软链接过去。 * 5.7 可移动设备的自动挂载（hal + dbus or ivman） 及中文名支持 $ sudo pacman -s hal dbus acpid（hal 依赖 dbus，acpid 可管理设备的电源。） $ sudo vi /etc/rc.conf ，在 daemons行 加入hal，如: daemons=(syslog-ng acpid hal network !netfs @crond @alsa gdm) 注意：如果daemons 列表中有dbus，要移除它，以免出错。hal 会自动加载dbus。 $ sudo gpasswd –a username optical $ sudo gpasswd –a username storage 把你的用户加入到 optical，storage 这几个组里面。前文中已经加入过了，可跳过。 如果用ivman来替代dbus，则需要将用户名加入到plugdev组中。 $ sudo vi /etc/fstab，注释掉下面两行： /dev/cdrom /mnt/cdrom iso9660 ro,user,noauto,unhide 0 0 /dev/dvd /mnt/dvd udf ro,user,noauto,unhide 0 0 $ sudo vi /etc/hal/fdi/policy/preferences.fdi，可加入一些很有用的规则， 如自动挂载ntfs文件系统，自动挂载可移动设备，性能优化，u盘的中文名支持等： &lt;?xml version='\"1.\"' encoding='\"UTF-8\"?>' &lt;deviceinfo version='\".2\">' &lt;device&gt; &lt;match key='\"volume.fstype\"' string='\"ntfs\">' &lt;append key='\"volume.mount.valid_options\"' type='\"strlist\">dmask=000</append>' &lt;append key='\"volume.mount.valid_options\"' type='\"strlist\">fmask=111</append>' &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;!-- use utf-8 charset for vfat --&gt; &lt;match key='\"volume.fstype\"' string='\"vfat\">' &lt;merge key='\"volume.policy.mount_option.iocharset=utf8\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;match key='\"storage.hotpluggable\"' bool='\"false\">' &lt;match key='\"storage.removable\"' bool='\"false\">' &lt;merge key='\"storage.automount_enabled_hint\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;/match&gt; &lt;/device&gt; &lt;device&gt; &lt;match key='\"block.is_volume\"' bool='\"true\">' &lt;match key='\"volume.size\"' compare_lt='\"8000000000\">' &lt;match key='\"@block.storage_device:storage.hotpluggable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">true</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;match key='\"@block.storage_device:storage.removable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">true</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">true</merge>' &lt;/match&gt; &lt;/match&gt; &lt;match key='\"volume.size\"' compare_ge='\"8000000000\">' &lt;match key='\"@block.storage_device:storage.hotpluggable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">false</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;match key='\"@block.storage_device:storage.removable\"' bool='\"true\">' &lt;merge key='\"volume.policy.mount_option.sync\"' type='\"bool\">false</merge>' &lt;merge key='\"volume.policy.mount_option.noatime\"' type='\"bool\">false</merge>' &lt;/match&gt; &lt;/match&gt; &lt;/match&gt; &lt;/device&gt; &lt;/deviceinfo&gt; 参看：http://wiki.archlinux.org/index.php/hal 注意，必须事先安装好ntfs-3g安装包，才能成功挂载ntfs分区。最后： $ sudo /etc/rc.d/hal restart 即可正常使用hal支持了，同时移动设备上的中文名（其实其它语言也可以）也可以得到支持。 如果以上不能工作，还可以安装pmount: $ sudo pacman -sy pmount * 5.8 更改gnome 菜单下的图标 可以编辑/usr/share/applications 中的相应文件 * 5.9 archlinux的包管理系统：pacman 常用命令有： pacman -sy abc #和源同步后安装名为abc的包 pacman -s abc #从本地数据库中得到abc的信息，下载安装abc包 pacman -sf abc #强制安装包abc pacman -ss abc #搜索有关abc信息的包 pacman -si abc #从数据库中搜索包abc的信息 pacman -qi abc #列出已安装的包abc的详细信息 pacman -syu #同步源，并更新系统 pacman -sy #仅同步源 pacman -r abc #删除abc包 pacman -rc abc #删除abc包和依赖abc的包 pacman -rsc abc #删除abc包和abc依赖的包 pacman -sc #清理/var/cache/pacman/pkg目录下的旧包 pacman -scc #清除所有下载的包和数据库 pacman -u abc #安装下载的abs包，或新编译的abc包 pacman -sd abc #忽略依赖性问题，安装包abc pacman pacman -su --ignore foo #升级时不升级包foo pacman -sg abc #查询abc这个包组包含的软件包 * 5.10 arch build system (abs) 利用abs 可以从源码自定义编译安装包。其过程如下： (1) synchronize your abs tree with the server. # pacman -s cvsup # abs (2) create a new directory in /var/abs/local/ named after the package you are going to create. $ mkdir -p ~/abs/local/ (这里，推荐在个人的主目录下创建一个abs的工作目录) (3）copy the pkgbuild.proto prototype from /var/abs/ into your newly created directory, remove the .proto suffix, and edit it to fit the new package. $ cp -r /var/abs/... ~/abs/local/ (将你要编译的软件的pkgbuild目录复制到个人目录下) (4) run makepkg in the working directory with the pkgbuild file. $ makepkg (开始编译这前，可以编辑一下pkgbuild文件，更改其默认安装目录到个人 主目录下，用“--prefix＝...”来指定安装目录) (5) install the newly built package with pacman. $ pacman -u ..pkg.gz (安装新编译好的包文件) (6) send the package to your friends for bragging rights (or give it to an archer so s/he can stick it in the master abs tree). * 5.11 创建一个光盘镜像 linux 下创建一个光盘镜像真的很简单，基本上有两类方法： (1) 镜像的源文件在光盘上 将光盘放入光驱，但不用 mount 指令加载它，然后： dd if=/dev/dvd of=dvd.iso # for dvd dd if=/dev/cdrom of=cd.iso # for cdrom dd if=/dev/scd0 of=cd.iso # if cdrom is scsi (2) 镜像的源文件在硬盘上或被 mount 到了硬盘上，比如在 /tmp/directory/： mkisofs -o cd.iso /tmp/directory/ 如果这个源文件是一个dvd视频文件，那么要这样用： mkisofs -dvd-video -o dvd.iso /tmp/directory/ 关于mkisofs 的更多用法，还请参看手册：man mkisofs 关于dvd视频光盘的编辑和创建，请参看： http://gecius.de/linux/dvd.html http://gentoo-wiki.com/howto_create_a_dvd:filesystem 6 服务器环境 * 6.1 ftp服务 (1) vsftpd ftp服务器的安装比较简单。直接用pacman安装即可。当然，还必须配置好，才可正常安全的使用。 vsftpd的使用和配置，可参考： http://vsftpd.beasts.org/ http://gentoo-wiki.com/howto_vsftpd http://www.uplinux.com/www/net/02/117.shtml (2) pureftpd 参考http://www.pureftpd.org/project/pure-ftpd http://www.chinaunix.net/jh/15/2424.html * 6.2 http服务 (1) 提供web服务的程序 能提供web服务的开源程序主要有：apache httpd, lighttpd, 和nginx。 apache稳定，安全，使用者最多，但是运行时对内存、cpu的开销也是最高的。 在静态网页支持上，lighttpd/nginx 比 apache 优胜很多。 如果不考虑虚拟主机的安全设置问题，nginx无疑是最好的选择，其次是lighttpd。 i) apache httpd: 参见http://httpd.apache.org/ ii) lighttpd: 参见http://wiki.archlinux.org/index.php/lighttpd_for_both_ssl_and_non-ssl iii) nginx: 参见http://wiki.codemongers.com/main (2) 动态网页的程序接口(cgi)：fastcgi： 是http服务器与机器上其他程序进行通信的一个接口。这个“其他程序”可以使用任何计算机语言 来编写，它通过cgi这个接口从http服务器取得输入，然后把运行的结果又通过cgi这个接口交给http 服务器，而http服务器把这个结果送给浏览器。提供web服务的程序都有cgi模块。 不过cgi技术的通用性与效率不高，所以有了性能大幅提升的fastcgi。fastcgi要求提供web服务的 程序整合fcgi模块。 参见http://wiki.archlinux.org/index.php/apache_fastcgi http://wiki.archlinux.org/index.php/fastcgi_and_lighttpd (3) 动态网页的脚本语言 php：参见http://wiki.archlinux.org/index.php/php python: 在动态网页上的应用与php相似。 jsp：java语言支持，需安装jdk (4) 数据库 mysql: 当前国内用的较多的数据库。适合小访问量或个人使用。 postgresql: 世界上最先进，最稳定的数据库。能充分发挥出机器的潜能。更加适合大企业环境。 参看http://wiki.archlinux.org/index.php/postgresql (5) http服务器的架构 i) 不带数据库支持的轻量级web：nginx/lighttpd + php/python + fastcgi ii) 有数据库支持：apache/lighttpd + php/python + mysql/postgresql，也可再追加jsp的支持。 参看http://wiki.archlinux.org/index.php/lamp 参见http://wiki.archlinux.org/index.php/apache_fastcgi http://wiki.archlinux.org/index.php/fastcgi_and_lighttpd http://www.knowsky.com/3232.html iii) 更加高效、可靠、稳定的web服务器。下面的架构图比较不错： -------- ------------ ------------- ---------------- -------------- |客户端|="==>" |负载均衡器|="==>" |反向**/缓存|="==>" |web服务器|="==>" |数据库服务器| -------- ------------ ------------- ---------------- -------------- nginx squid apache/lighttpd mysql/postgresql +(php+eaccelerator) + memcache 参看http://huangjt.jobui.com/blog/80186.html (6) 用webdav替代传统的ftp服务 webdav是一个使用xml技术的基于http协议的扩展协议，具备http的所有优点，力图提供 一个网页编辑的统一接口。用它替代传统的ftp服务，可以避免ftp存在的一些中文问题。 参看：http://wiki.archlinux.org/index.php/simple_webdav_setup http://wiki.archlinux.org/index.php/webdav_authentication * 6.3 邮件服务 postfix：参看http://wiki.archlinux.org/index.php/postfix_howto * 6.4 文件共享 文件共享的方法较多，机器上只要安装了任一网络文件系统就可以共享了。网络文件系统有： ftpfs, sshfs, shfs, smbfs, nfs, etc. 当然，使用http服务来共享文件也未尝不可。 (1) shfs sshfs可以开机自动挂载，关机和重启时也可以自动卸载sshfs文件系统，但是它不能用mount来 直接指定-t参数来挂载，因此也不能直接加到/etc/fstab中，而且用df也不能列出那样的分区。 但是shfs解决了这个问题，它能像挂载普通分区那样挂载sshfs文件系统。它是通过内核的shfs 模块来实现的， 参看http://wiki.archlinux.org/index.php/shfs (2) samba 可帮助实现跨平台（linux &lt;---&gt;windows) 的文件共享和打印共享。 参看http://wiki.archlinux.org/index.php/setting_up_samba http://www.samba.org/ (3) nfs 参看http://wiki.archlinux.org/index.php/nfs (2) rsync rsync用于两台机器上文件的同步备份，它本身不算是共享程序，但它能起到共享的作用。通常与ssh合用。 参看http://samba.anu.edu.au/rsync/ http://dz.adj.idv.tw/thread-48-1-4.html * 6.5 远程登录 (1) openssh/openssh-chroot 用 openssh-chroot 基于openssh，但添加了新特性，即可以创建一个chrootjail。chrootjail是单独划分 出的一个空间，以限制远程登录者活动不超出此范围，更不会影响到主系统。所以比用 openssh 更安全。 # pacman -s openssh-chroot # mkdir /var/openssh_chroot # chroot_create /var/openssh_chroot (将chrootjail放到/var/openssh_chroot，或其它地方) # chroot_adduser username /var/openssh_chroot (创建远程登录者帐户，并为其指定chrootjail) # /etc/rc.d/sshd restart (手动重启sshd服务，也可将sshd添加到/etc/rc.conf中的daemon中去) 如果远程机器是unix-like系统，可用：ssh &lt;username&gt;@localhost 来登入；如果是windows, 可使用 putty, or pietty。 参看http://wiki.archlinux.org/index.php/openssh-chroot (2) openvpn * 6.6 安全问题 (1) 防火墙 (iptables) 这个实在不是几句话能讲明白的。不过想提醒几句：要使iptables发挥出最大作用，最好是在一台 旧电脑装上nat+iptables，充当网关，然后自己的电脑跟此网关相连接。 参看：http://wiki.archlinux.org/index.php/firewalls http://wiki.archlinux.org/index.php/simple_stateful_firewall_howto http://gentoo-wiki.com/howto_iptables_for_newbies http://iptables-tutorial.frozentux.net/iptables-tutorial.html http://wiki.archlinux.org/index.php/high_performance_firewall/nat_with_iptables_and_vlans_and_iproute2 (2) 入侵监测 (snort) 这个太复杂了。 有兴趣可以看一看toby kohlenberg等编写的专著\"snort: intrusion detection and prevention toolkit\"。 电子书下载：http://rapidshare.com/files/27449819/snort_intrusion_detection_and_prevention_toolkit_ertu.rar 参看http://www.snort.org/ "><link rel="shortcut icon" href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-65DJGXT4VC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-65DJGXT4VC")}</script><script src=https://app.rybbit.io/api/script.js data-site-id=382 defer></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_cf47bfff928a8770.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Svtter's Blog</a></h1><h2 class=site-description>在你想要放弃的时候，想想你为什么开始</h2></div></header><ol class=menu-social><li><a href=https://github.com/svtter target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/crack_svtter target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/%E5%85%B3%E4%BA%8E/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/%E6%A8%A1%E5%9E%8B/><svg width="800" height="800" viewBox="0 0 48 48" fill="none"><rect width="48" height="48" fill="#fff" fill-opacity=".01"/><path d="M19.036 44.0001C18.0561 40.8045 16.5778 38.4222 14.6011 36.8532 11.636 34.4997 6.92483 35.9624 5.18458 33.5349c-1.74025-2.4276 1.21924-6.8918 2.25776-9.5259 1.03852-2.634-3.98055-3.5654-3.39458-4.3132.39066-.4985 2.92695-1.9371 7.60894-4.3157C12.987 7.79346 17.9008 4.00014 26.3982 4.00014 39.1441 4.00014 44 14.8061 44 21.679c0 6.873-5.8799 14.2773-14.2559 15.8738C28.9951 38.6436 30.0754 40.7927 32.9848 44.0001" stroke="#000" stroke-width="4.66685" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.4997 14.5C18.8464 17.0342 19.0408 18.8138 20.0829 19.8385c1.0421 1.0248 2.8182 1.6949 5.3283 2.0104C24.8417 25.1176 25.5361 26.6511 27.4942 26.4493 29.4524 26.2475 30.6289 25.4338 31.0239 24.0083 34.0842 24.8684 35.7428 24.1486 35.9997 21.8489c.3855-3.4496-1.4747-6.2014-2.2373-6.2014C32.9997 15.6475 31.0239 15.5547 31.0239 14.5c0-1.0548-2.308-1.6507-4.391-1.6507-2.083.0-.8294-1.4041-3.6897-.8493-1.9069.3698-3.0547 1.2031-3.4435 2.5z" fill="#2F88FF" stroke="#000" stroke-width="4" stroke-linejoin="round"/><path d="M30.5002 25.5001c-1.0169.631-2.4124 1.6803-3 2.5-1.4689 2.0495-2.6604 3.2974-2.9211 4.6081" stroke="#000" stroke-width="4" stroke-linecap="round"/></svg>
<span>模型</span></a></li><li><a href=/%E9%93%BE%E6%8E%A5/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/linux/>Linux</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B02-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E8%BD%AC%E8%BD%BD/>archlinux-安装笔记2-常用软件转载</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 09, 2014</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 29 分钟</time></div></footer></div></header><section class=article-content><blockquote><p>本文出自<a class=link href=http://svtter.github.io target=_blank rel=noopener>svtter.github.io</a></p></blockquote><div class=codehilite><pre><span></span><span class=nt>1</span> <span class=nt>Installing</span> <span class=nt>Arch</span> <span class=nt>Linux</span>
<span class=o>*</span> <span class=nt>1</span><span class=p>.</span><span class=nc>1</span> <span class=nt>Pre-Installation</span>
<span class=nt>是i686</span> <span class=nt>架构吗</span><span class=err>（</span><span class=nt>Pentium</span> <span class=nt>II</span> <span class=nt>or</span> <span class=nt>AMD</span> <span class=nt>K6-2以上</span><span class=err>）？</span><span class=nt>安装方式CD</span><span class=o>?</span> <span class=nt>FTP</span><span class=err>？</span>
<span class=o>*</span> <span class=nt>1</span><span class=p>.</span><span class=nc>2</span> <span class=nt>Acquiring</span> <span class=nt>Arch</span> <span class=nt>Linux</span>
<span class=nt>从这里寻找速度最快的镜像</span><span class=err>：</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>wiki</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span><span class=nt>index</span><span class=p>.</span><span class=nc>php</span><span class=o>/</span><span class=nt>Mirror</span>
<span class=o>*</span> <span class=nt>1</span><span class=p>.</span><span class=nc>3</span> <span class=nt>Preparing</span> <span class=nt>Installation</span> <span class=nt>Media</span>
<span class=nt>MD5</span> <span class=nt>校验</span><span class=err>，</span><span class=nt>烧录</span><span class=err>。</span>
<span class=o>*</span> <span class=nt>1</span><span class=p>.</span><span class=nc>4</span> <span class=nt>Using</span> <span class=nt>the</span> <span class=nt>CD-ROM</span>
<span class=nt>设置好光驱启动</span><span class=err>。</span>
<span class=o>*</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span> <span class=nt>Common</span> <span class=nt>Installation</span> <span class=nt>Procedure</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>1</span> <span class=nt>Loading</span> <span class=nt>a</span> <span class=nt>non-US</span> <span class=nt>Keymap</span>
<span class=nt>用km</span> <span class=nt>工具选择非英语键盘</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>2</span> <span class=nt>Running</span> <span class=nt>Setup</span>
<span class=err>#</span> <span class=o>/</span><span class=nt>archlinux</span><span class=o>/</span><span class=nt>setup</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>3</span> <span class=nt>Configure</span> <span class=nt>Network</span> <span class=o>(</span><span class=nt>FTP</span> <span class=nt>Install</span> <span class=nt>only</span><span class=o>)</span>
<span class=nt>仅适用于FTP</span> <span class=nt>安装方式</span><span class=err>，</span><span class=nt>CD</span> <span class=nt>安装没有必要配置好网络</span><span class=err>。</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>4</span> <span class=nt>Prepare</span> <span class=nt>Hard</span> <span class=nt>Drive</span>
<span class=nt>给磁盘分好区</span><span class=err>，</span><span class=nt>root分区</span><span class=o>(/)</span><span class=nt>放在主分区比较好</span><span class=err>（</span><span class=nt>放到逻辑分区也可以</span><span class=err>），</span>
<span class=nt>如果有</span> <span class=nt>Windows</span> <span class=nt>系统</span><span class=err>，</span><span class=nt>那它也要占据一个主分区</span><span class=err>。</span><span class=nt>个人的250G硬盘是这样分区的</span><span class=err>：</span>
<span class=err>#</span> <span class=nt>cfdisk</span>
<span class=nt>sda1</span>          <span class=o>/</span><span class=nt>boot</span>        <span class=nt>150M</span>             <span class=nt>xfs</span>
<span class=nt>sda2</span>          <span class=nt>Windows</span>      <span class=nt>18G</span>              <span class=nt>ntfs</span>
<span class=nt>sda3</span>          <span class=nt>FreeBSD</span>      <span class=nt>32G</span>              <span class=nt>ufs</span>
<span class=nt>sda5</span>          <span class=o>/</span>            <span class=nt>600M</span>             <span class=nt>xfs</span>
<span class=nt>sda6</span>          <span class=nt>SWAP</span>         <span class=nt>2xRam</span>            <span class=nt>xfs</span>  <span class=o>(</span><span class=nt>SWAP分区的大小推荐为内存大小的2倍</span><span class=o>)</span>
<span class=nt>sda7</span>          <span class=o>/</span><span class=nt>var</span>         <span class=nt>20G</span>              <span class=nt>xfs</span>
<span class=nt>sda8</span>          <span class=o>/</span><span class=nt>tmp</span>         <span class=nt>5G</span>               <span class=nt>xfs</span>
<span class=nt>sda9</span>          <span class=o>/</span><span class=nt>opt</span>         <span class=nt>10G</span>              <span class=nt>xfs</span>
<span class=nt>sda10</span>         <span class=o>/</span><span class=nt>usr</span>         <span class=nt>20G</span>              <span class=nt>xfs</span>
<span class=nt>sda11</span>         <span class=o>/</span><span class=nt>home</span>        <span class=nt>105G</span>              <span class=nt>xfs</span>
<span class=nt>sda12</span>         <span class=nt>Files</span>        <span class=nt>不大于32G</span>        <span class=nt>fat32</span>
<span class=nt>如果需要加密磁盘</span><span class=err>，</span><span class=nt>并启用开机验证</span><span class=err>，</span><span class=nt>推荐使用luks</span> <span class=err>：</span>
<span class=nt>通常加密</span> <span class=nt>root</span> <span class=nt>分区和</span> <span class=o>/</span><span class=nt>home</span> <span class=nt>分区</span>
<span class=err>#</span> <span class=nt>modprobe</span> <span class=nt>dm-crypt</span>
<span class=err>#</span> <span class=nt>modprobe</span> <span class=nt>aes-i586</span>
<span class=err>#</span> <span class=nt>cryptsetup</span> <span class=err>–</span><span class=nt>y</span> <span class=nt>luksFormat</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda3</span>
<span class=nt>输入密码</span><span class=err>，</span><span class=nt>确认</span><span class=err>。</span>
<span class=err>#</span> <span class=nt>cryptsetup</span> <span class=err>–</span><span class=nt>y</span> <span class=nt>luksFormat</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda10</span>
<span class=nt>输入密码</span><span class=err>，</span><span class=nt>确认</span><span class=err>。</span>
<span class=err>#</span> <span class=nt>cryptsetup</span> <span class=nt>luksOpen</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda3</span> <span class=nt>root</span>
<span class=nt>解开root</span> <span class=nt>分区</span><span class=err>，</span><span class=nt>并建立一个映射</span><span class=err>：</span><span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>mapping</span><span class=o>/</span><span class=nt>root</span>
<span class=err>#</span> <span class=nt>cryptsetup</span> <span class=nt>luksOpen</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda10</span> <span class=nt>home</span>
<span class=nt>解开</span> <span class=o>/</span><span class=nt>home</span> <span class=nt>分区</span><span class=err>，</span><span class=nt>并建立一个映射</span><span class=err>：</span><span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>mapping</span><span class=o>/</span><span class=nt>home</span>
<span class=nt>参看</span><span class=err>：</span><span class=nt>http</span><span class=o>://</span><span class=nt>wiki</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span><span class=nt>index</span><span class=p>.</span><span class=nc>php</span><span class=o>/</span><span class=nt>LUKS_Encrypted_Root</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>5</span> <span class=nt>Partition</span> <span class=nt>Hard</span> <span class=nt>Drives</span>
<span class=nt>可以跳过了</span><span class=err>。</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>6</span> <span class=nt>Set</span> <span class=nt>Filesystem</span> <span class=nt>Mountpoints</span>
<span class=nt>如果用luks</span> <span class=nt>加密了分区</span><span class=err>，</span><span class=nt>那么</span> <span class=o>/</span> <span class=nt>分区需要挂载到</span><span class=err>：</span><span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>mapping</span><span class=o>/</span><span class=nt>root</span><span class=err>；</span>
<span class=o>/</span><span class=nt>home</span> <span class=nt>需要挂载到</span><span class=err>：</span><span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>mapping</span><span class=o>/</span><span class=nt>home</span><span class=o>.</span>
<span class=nt>同时选择一个合适的文件系统</span><span class=err>（</span><span class=nt>JFS</span><span class=err>，</span><span class=nt>XFS</span><span class=err>，</span><span class=nt>Reiserfs</span><span class=o>...</span><span class=err>）。</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>7</span> <span class=nt>Select</span> <span class=nt>Packages</span>
<span class=nt>至少选择</span> <span class=nt>Base</span> <span class=nt>安装</span><span class=err>。</span><span class=nt>如果需要一个可编译环境</span><span class=err>，</span><span class=nt>要选上devel和lib</span><span class=err>；</span><span class=nt>如果需要ADSL拨号</span>
<span class=nt>或WiFi支持</span><span class=err>，</span><span class=nt>要选上support</span><span class=err>。</span>
<span class=nt>确定后会看到所有将要安装的包</span><span class=err>，</span><span class=nt>可以在这里去掉一些暂时不想安装的包</span><span class=err>。</span><span class=nt>要是不清楚就</span>
<span class=nt>不管了</span><span class=err>，</span><span class=nt>几个M的大小而已</span><span class=err>。</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>8</span> <span class=nt>Install</span> <span class=nt>Packages</span>
<span class=nt>只要烧录的光碟不是太差</span><span class=err>，</span><span class=nt>基本上都能正常安装的</span><span class=err>。</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>9</span> <span class=nt>Configure</span> <span class=nt>System</span>
<span class=nt>配置系统是必须和关键的</span><span class=err>，</span><span class=nt>应当允许hwdetect</span> <span class=nt>script自动检测硬件</span><span class=err>，</span><span class=nt>并生成相应配置</span><span class=err>。</span>
<span class=nt>根据启动时的实际情况选择是否需要对RAID</span><span class=err>，</span><span class=nt>LVM2</span><span class=err>，</span><span class=nt>和encrypted</span> <span class=nt>volumes的支持</span><span class=err>，</span><span class=nt>以及</span>
<span class=nt>其它必要的支持</span><span class=err>。</span>
<span class=nt>选择熟悉的编辑器后</span><span class=err>，</span><span class=nt>对</span> <span class=o>/</span><span class=nt>etc</span> <span class=nt>下的生成的配置文件作适当的修正</span><span class=err>：</span>
<span class=nt>rc</span><span class=p>.</span><span class=nc>conf</span><span class=err>：</span><span class=nt>设置时区为Asia</span><span class=o>/</span><span class=nt>Hong_Kong</span><span class=err>，</span><span class=nt>检查eth0的配置是合适</span>
<span class=nt>mkinitcpio</span><span class=p>.</span><span class=nc>conf</span><span class=err>：</span><span class=nt>在最后一行的HOOKS</span> <span class=nt>中去除不必要的支持</span>
<span class=nt>hosts</span> <span class=err>：</span><span class=nt>设置主机名和域名</span>
<span class=nt>locale</span><span class=p>.</span><span class=nc>gen</span><span class=err>：</span><span class=nt>设置本机要支持的locale</span> <span class=err>（</span><span class=nt>zh_CN</span><span class=p>.</span><span class=nc>utf8</span><span class=o>,</span><span class=nt>zh_CN</span><span class=p>.</span><span class=nc>gbk</span><span class=err>，</span><span class=nt>or</span> <span class=nt>zh_TW</span><span class=p>.</span><span class=nc>utf8</span><span class=err>）</span>
<span class=nt>root</span> <span class=nt>PassWord</span><span class=err>：</span><span class=nt>为root</span> <span class=nt>设置管理密码</span>
<span class=nt>pacman</span> <span class=nt>Mirrors</span><span class=err>：</span><span class=nt>设置安装源</span><span class=err>。</span><span class=nt>找一个高速镜像站点</span><span class=err>，</span><span class=nt>比如</span><span class=err>：</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>mirrors</span><span class=p>.</span><span class=nc>lcuc</span><span class=p>.</span><span class=nc>org</span><span class=p>.</span><span class=nc>cn</span><span class=o>/</span><span class=nt>archlinux</span><span class=o>/</span> <span class=err>；</span><span class=nt>http</span><span class=o>://</span><span class=nt>ftp</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span> <span class=err>；</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>ftp</span><span class=p>.</span><span class=nc>belnet</span><span class=p>.</span><span class=nc>be</span><span class=o>/</span><span class=nt>packages</span><span class=o>/</span><span class=nt>archlinux</span><span class=o>/</span> <span class=err>；</span><span class=nt>http</span><span class=o>://</span><span class=nt>ftp</span><span class=p>.</span><span class=nc>gigabit</span><span class=p>.</span><span class=nc>nu</span><span class=o>/</span><span class=err>；</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>archlinux</span><span class=p>.</span><span class=nc>puzzle</span><span class=p>.</span><span class=nc>ch</span> <span class=err>；</span><span class=nt>http</span><span class=o>://</span><span class=nt>mirror</span><span class=p>.</span><span class=nc>cs</span><span class=p>.</span><span class=nc>vt</span><span class=p>.</span><span class=nc>edu</span><span class=o>/</span><span class=nt>pub</span><span class=o>/</span><span class=nt>ArchLinux</span><span class=o>/</span> <span class=err>；</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>ftp</span><span class=p>.</span><span class=nc>heanet</span><span class=p>.</span><span class=nc>ie</span><span class=o>/</span><span class=nt>mirrors</span><span class=o>/</span><span class=nt>ftp</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span><span class=err>；</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>distro</span><span class=p>.</span><span class=nc>ibiblio</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span><span class=nt>pub</span><span class=o>/</span><span class=nt>linux</span><span class=o>/</span><span class=nt>distributions</span><span class=o>/</span><span class=nt>archlinux</span><span class=o>/</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>10</span> <span class=nt>Install</span> <span class=nt>Kernel</span>
<span class=nt>略</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>11</span> <span class=nt>Install</span> <span class=nt>Bootloader</span>
<span class=nt>推荐GRUB</span><span class=err>。</span><span class=nt>配置好menu</span><span class=p>.</span><span class=nc>lst</span><span class=err>。</span>
<span class=nt>如果root</span> <span class=nt>分区用luks</span> <span class=nt>加密过了</span><span class=err>，</span><span class=nt>那么要把menu</span><span class=p>.</span><span class=nc>lst</span> <span class=nt>修正为</span><span class=err>：</span>
<span class=err>#</span> <span class=o>(</span><span class=nt></span><span class=o>)</span> <span class=nt>Arch</span> <span class=nt>Linux</span>
<span class=nt>title</span> <span class=nt>Arch</span> <span class=nt>Linux</span>
<span class=nt>root</span> <span class=o>(</span><span class=nt>hd0</span><span class=o>,</span><span class=nt></span><span class=o>)</span>
<span class=nt>kernel</span> <span class=o>/</span><span class=nt>vmlinuz26</span> <span class=nt>root</span><span class=o>=/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda3</span> <span class=nt>ro</span>
<span class=nt>initrd</span> <span class=o>/</span><span class=nt>kernel26</span><span class=p>.</span><span class=nc>img</span>
<span class=nt>注意</span><span class=err>：</span><span class=nt>Bootloader</span> <span class=nt>需要安装到MBR</span><span class=err>（</span><span class=nt>即</span> <span class=nt>sda</span> <span class=nt>下</span><span class=err>），</span><span class=nt>而不是</span> <span class=o>/</span><span class=nt>boot</span> <span class=nt>所在的分区</span><span class=err>（</span><span class=nt>sda1</span><span class=err>）。</span>
<span class=nt>o</span> <span class=nt>1</span><span class=p>.</span><span class=nc>5</span><span class=p>.</span><span class=nc>12</span> <span class=nt>Exit</span> <span class=nt>Install</span>
<span class=nt>退出安装程式后</span><span class=err>，</span><span class=nt>取出安装光盘</span><span class=err>。</span>
<span class=err>#</span> <span class=nt>head</span> <span class=nt>-n</span> <span class=nt>300</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>urandom</span> <span class=o>|</span> <span class=nt>tail</span> <span class=nt>-n</span> <span class=nt>256</span> <span class=o>&gt;/</span><span class=nt>mnt</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>home</span><span class=p>.</span><span class=nc>key</span>
<span class=err>#</span> <span class=nt>cryptsetup</span> <span class=nt>luksAddKey</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda10</span> <span class=o>/</span><span class=nt>mnt</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>home</span><span class=p>.</span><span class=nc>key</span>
<span class=nt>输入密码</span><span class=err>，</span><span class=nt>确认</span><span class=err>。</span>
<span class=err>#</span> <span class=nt>echo</span> <span class=nt>home</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda10</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>home</span><span class=p>.</span><span class=nc>key</span> <span class=o>&gt;&gt;/</span><span class=nt>mnt</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>crypttab</span>
<span class=nt>开机时</span><span class=err>，</span><span class=nt>用home</span><span class=p>.</span><span class=nc>key</span> <span class=nt>解开</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda10</span>
<span class=err>#</span> <span class=nt>sed</span> <span class=nt>-i</span> <span class=o>/</span><span class=nt>swap</span><span class=o>/</span><span class=nt>d</span> <span class=o>/</span><span class=nt>mnt</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>fstab</span>   <span class=err>（</span><span class=nt>删除fstab</span> <span class=nt>文件中含有swap</span> <span class=nt>的一栏</span><span class=err>）</span>
<span class=p>#</span><span class=nn>echo</span> <span class=nt>swap</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda2</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>urandom</span> <span class=s2>"-c   aes-cbc-essiv:sha256 -h sha256 -s 256"</span> <span class=o>&gt;&gt;/</span><span class=nt>mnt</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>crypttab</span>
<span class=err>#</span> <span class=nt>echo</span> <span class=s2>"mkswap /dev/mapper/swap"</span> <span class=o>&gt;&gt;/</span><span class=nt>mnt</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>rc</span><span class=p>.</span><span class=nc>local</span>
<span class=nt>以上两个命令是设置swap</span> <span class=nt>加密分区</span><span class=err>。</span>
<span class=nt>另外直接在</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>crypttab</span> <span class=nt>中加入如下内容也起相同作用</span><span class=err>：</span>
<span class=nt>swap</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>sda2</span>  <span class=nt>SWAP</span> <span class=nt>-c</span> <span class=nt>aes-cbc-essiv</span><span class=p>:</span><span class=nd>sha256</span> <span class=nt>-h</span> <span class=nt>sha256</span> <span class=nt>-s</span> <span class=nt>256</span>
<span class=err>#</span> <span class=nt>reboot</span>
<span class=nt>2</span>  <span class=nt>基础配置</span>
<span class=o>*</span> <span class=nt>2</span><span class=p>.</span><span class=nc>1</span>  <span class=nt>Internet</span> <span class=nt>Access</span>
<span class=nt>如果是局域网</span><span class=err>，</span><span class=nt>视讯宽等无需拨号的网络环境</span><span class=err>，</span><span class=nt>只需要在</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>rc</span><span class=p>.</span><span class=nc>conf中设置好</span><span class=err>：</span>
<span class=nt>eth0</span><span class=o>=</span><span class=s2>"dhcp"</span>
<span class=nt>重启电脑后</span><span class=err>，</span><span class=nt>即可正常上网了</span><span class=err>。</span>
<span class=nt>如果是用PPPOE协议拨号上网</span><span class=err>（</span><span class=nt>如ADSL</span><span class=err>），</span><span class=nt>需安装rp-pppoe安装包</span><span class=err>，</span><span class=nt>然后</span><span class=err>：</span>
<span class=err>#</span> <span class=nt>pppoe-setup</span>
<span class=err>#</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>rc</span><span class=p>.</span><span class=nc>d</span><span class=o>/</span><span class=nt>adsl</span> <span class=nt>start</span>
<span class=err>#</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>rc</span><span class=p>.</span><span class=nc>d</span><span class=o>/</span><span class=nt>adsl</span> <span class=nt>stop</span>
<span class=nt>或者</span><span class=err>，</span><span class=nt>使用更好的ppp</span> <span class=nt>安装包</span><span class=err>（</span><span class=nt>参照WiKi</span> <span class=err>）</span>
<span class=o>*</span> <span class=nt>2</span><span class=p>.</span><span class=nc>2</span>  <span class=nt>更新安装包列表</span>
<span class=err>#</span> <span class=nt>pacman</span> <span class=err>–</span><span class=nt>Syu</span>
<span class=nt>更新安装包列表</span><span class=err>，</span><span class=nt>并升级已安装的包和内核</span><span class=err>，</span><span class=nt>比自己make</span> <span class=nt>world要快多了</span>
<span class=err>#</span> <span class=nt>reboot</span>
<span class=err>#</span> <span class=nt>pacman-optimize</span>
<span class=nt>这是优化pacman系统</span><span class=err>，</span><span class=nt>如果安装时仅选择了base安装</span><span class=err>，</span><span class=nt>那么优化可能不会成功</span><span class=err>，</span><span class=nt>因为缺少</span>
<span class=nt>diffutils安装包</span><span class=o>(</span><span class=nt>它在devel里面</span><span class=o>)</span><span class=err>，</span><span class=nt>安装它就可以了</span><span class=err>：</span>
<span class=err>#</span> <span class=nt>pacman</span> <span class=nt>-S</span> <span class=nt>diffutils</span>
<span class=nt>安装AUR</span> <span class=nt>工具</span><span class=err>（</span><span class=nt>建议安装</span><span class=err>，</span><span class=nt>好软件多多</span><span class=err>）：</span>
<span class=err>#</span> <span class=nt>vi</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>pacman</span><span class=p>.</span><span class=nc>conf</span><span class=o>,</span> <span class=nt>加入</span><span class=o>:</span>
<span class=cp>[</span><span class=nx>archlinuxfr</span><span class=cp>]</span>
<span class=nt>Server</span> <span class=o>=</span> <span class=nt>http</span><span class=o>://</span><span class=nt>repo</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>fr</span><span class=o>/</span><span class=nt>i686</span><span class=o>/</span>
<span class=err>#</span> <span class=nt>pacman</span> <span class=nt>-Sy</span> <span class=nt>yaourt</span>   <span class=o>(</span><span class=nt>安装一个Pacman前端</span><span class=err>，</span><span class=nt>如果碰到服务器调整</span><span class=err>，</span><span class=nt>那就装不了啦</span><span class=err>）</span>
<span class=err>#</span> <span class=nt>yaourt</span> <span class=nt>-S</span> <span class=nt>tupac</span>     <span class=o>(</span><span class=nt>速度更快的Pacman前端</span><span class=err>，</span><span class=nt>依赖于yaourt</span><span class=o>)</span>
<span class=err>#</span> <span class=nt>tupac</span> <span class=nt>-S</span> <span class=nt>aurvote</span>
<span class=nt>可以通过aurvote对喜欢的AUR软件投票</span><span class=err>，</span><span class=nt>如果票数够多了</span><span class=err>，</span><span class=nt>该软件就会被加入Community</span><span class=err>。</span>
<span class=nt>用</span><span class=err>“</span><span class=nt>aurvote</span> <span class=nt>-h</span><span class=err>”</span><span class=nt>来查看使用帮助</span><span class=err>。</span>
<span class=nt>如果要对yaourt和tupac这两个软件投票</span><span class=err>，</span><span class=nt>可以这样做</span><span class=err>：</span>
<span class=o>(</span><span class=nt>1</span><span class=o>)</span> <span class=nt>到</span> <span class=nt>http</span><span class=o>://</span><span class=nt>aur</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span><span class=nt>account</span><span class=p>.</span><span class=nc>php</span> <span class=nt>注册一个帐号</span>
<span class=o>(</span><span class=nt>2</span><span class=o>)</span> <span class=nt>vi</span> <span class=o>~/</span><span class=p>.</span><span class=nc>aruvote</span><span class=err>，</span><span class=nt>加入</span>
<span class=nt>user</span><span class=o>=</span><span class=nt>YourName</span>
<span class=nt>pass</span><span class=o>=</span><span class=nt>YourPassWord</span>
<span class=o>(</span><span class=nt>3</span><span class=o>)</span> <span class=nt>aurvote</span> <span class=nt>-v</span> <span class=nt>yaourt</span> <span class=nt>tupac</span>
<span class=o>*</span> <span class=nt>2</span><span class=p>.</span><span class=nc>3</span>  <span class=nt>安装多线程多协议的下载工具aria2</span>
<span class=err>#</span> <span class=nt>pacman</span> <span class=nt>-S</span> <span class=nt>aria2</span>
<span class=err>#</span> <span class=nt>echo</span> <span class=s2>"XferCommand = /usr/bin/aria2c –s 3 %u"</span> <span class=o>&gt;&gt;/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>pacman</span><span class=p>.</span><span class=nc>conf</span>
<span class=nt>用aria2替换默认的wget来安装软件</span><span class=err>，</span><span class=nt>如果带宽足够大</span><span class=err>，</span><span class=nt>就不需要用aria2了</span><span class=err>。</span>
<span class=o>*</span> <span class=nt>2</span><span class=p>.</span><span class=nc>4</span> <span class=nt>根据个人习惯安装其它Shell</span><span class=err>（</span><span class=nt>如zsh</span><span class=err>，</span><span class=nt>ksh</span><span class=err>），</span><span class=nt>当然使用默认的Bash也很好</span>
<span class=o>$</span> <span class=nt>sudo</span> <span class=nt>pacman</span> <span class=nt>-S</span> <span class=nt>zsh</span>
<span class=nt>关于ZSH的介绍</span><span class=err>，</span><span class=nt>可以参照Wiki</span><span class=o>:</span>
<span class=nt>http</span><span class=o>://</span><span class=nt>wiki</span><span class=p>.</span><span class=nc>archlinux</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span><span class=nt>index</span><span class=p>.</span><span class=nc>php</span><span class=o>/</span><span class=nt>Zsh</span>
<span class=nt>可从中获取配置好的</span> <span class=p>.</span><span class=nc>zshrc</span> <span class=nt>文件</span><span class=err>，</span><span class=nt>放入</span><span class=o>$</span><span class=nt>HOME中</span><span class=err>。</span>
<span class=o>$</span> <span class=nt>chsh</span> <span class=nt>-s</span> <span class=o>/</span><span class=nt>bin</span><span class=o>/</span><span class=nt>zsh</span>
<span class=o>$</span> <span class=nt>source</span> <span class=o>~/</span><span class=p>.</span><span class=nc>zshrc</span>
<span class=o>*</span> <span class=nt>2</span><span class=p>.</span><span class=nc>5</span>  <span class=nt>安装sudo</span><span class=err>，</span><span class=nt>用普通用户进入系统</span>
<span class=nt>创建一个账户</span><span class=err>：</span>
<span class=err>#</span> <span class=nt>useradd</span> <span class=err>–</span><span class=nt>mG</span> <span class=nt>users</span><span class=o>,</span><span class=nt>audio</span><span class=o>,</span><span class=nt>optical</span><span class=o>,</span><span class=nt>storage</span><span class=o>,</span><span class=nt>wheel</span> <span class=nt>-s</span> <span class=o>/</span><span class=nt>bin</span><span class=o>/</span><span class=nt>zsh</span> <span class=nt>yourname</span>
<span class=nt>创建一个限制用户</span><span class=err>，</span><span class=nt>有声音支持</span><span class=err>，</span><span class=nt>有HAL</span> <span class=nt>支持</span><span class=err>，</span><span class=nt>能切换到root</span> <span class=nt>权限</span>
<span class=err>#</span> <span class=nt>passwd</span> <span class=nt>yourname</span>  <span class=o>(</span><span class=nt>如果还没有为root创建密码</span><span class=err>，</span><span class=nt>要先</span> <span class=p>#</span><span class=nn>passwd</span> <span class=nt>root</span><span class=o>)</span>
<span class=err>#</span> <span class=nt>cd</span> <span class=o>/</span><span class=nt>home</span><span class=o>/</span><span class=nt>YOUNAME</span><span class=o>/</span> <span class=o>&&</span> <span class=nt>cp</span> <span class=o>~/</span><span class=p>.</span><span class=nc>zshrc</span> <span class=o>./</span> <span class=o>&&</span> <span class=nt>chown</span> <span class=nt>YOUENAME</span> <span class=o>./</span><span class=p>.</span><span class=nc>zshrc</span>
<span class=err>#</span> <span class=nt>pacman</span> <span class=nt>-S</span> <span class=nt>sudo</span>
<span class=err>#</span> <span class=nt>vi</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>sudoers</span>
<span class=nt>加入</span><span class=err>：</span><span class=nt>yourname</span> <span class=nt>ALL</span><span class=o>=(</span><span class=nt>ALL</span><span class=o>)</span> <span class=nt>NOPASSWD</span><span class=o>:</span> <span class=nt>SETENV</span><span class=o>:</span> <span class=nt>ALL</span>
<span class=nt>或直接对用户组作出相应设置</span><span class=err>。</span>
<span class=nt>如果主机上会有多个终端同时在用</span><span class=err>，</span><span class=nt>还要加入</span><span class=s2>"visudo"</span><span class=nt>到</span><span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>sudoers</span>
<span class=nt>sudo</span> <span class=nt>命令补全</span><span class=err>（</span><span class=nt>注意</span><span class=err>，</span><span class=nt>仅适用于Bash</span><span class=err>）：</span>
<span class=err>#</span> <span class=nt>pacman</span> <span class=nt>-S</span> <span class=nt>bash-completion</span>
<span class=err>#</span> <span class=nt>echo</span> <span class=nt>source</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>bash_completion</span> <span class=o>&gt;&gt;/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>profile</span>
<span class=err>#</span> <span class=nt>source</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>profile</span>   <span class=err>（</span><span class=nt>或exit</span><span class=o>,</span> <span class=nt>用普通用户重登录</span><span class=err>）</span>
<span class=o>*</span> <span class=nt>2</span><span class=p>.</span><span class=nc>6</span> <span class=nt>开启控制台鼠标</span> <span class=o>(</span><span class=nt>gpm</span> <span class=nt>支持</span><span class=o>)</span> <span class=err>，</span><span class=nt>方便控制台下浏览网页</span>
<span class=nt>在控制台下浏览网页的工具有</span><span class=err>：</span><span class=nt>elinks</span><span class=o>(</span><span class=nt>英文网页</span><span class=o>),</span> <span class=nt>w3m</span><span class=err>（</span><span class=nt>在CCE下可浏览中文网页</span><span class=err>）：</span>
<span class=o>$</span> <span class=nt>sudo</span> <span class=nt>pacman</span> <span class=nt>elinks</span> <span class=nt>w3m</span> <span class=nt>cce</span>
<span class=nt>用elinks等工具</span><span class=err>，</span><span class=nt>在控制台下浏览网页</span><span class=err>，</span><span class=nt>如果没有鼠标支持</span><span class=err>，</span><span class=nt>实在是很郁闷的事情</span><span class=err>：</span>
<span class=o>$</span> <span class=nt>sudo</span> <span class=nt>pacman</span> <span class=nt>-S</span> <span class=nt>gpm</span>
<span class=o>$</span> <span class=nt>sudo</span> <span class=nt>vi</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>conf</span><span class=p>.</span><span class=nc>d</span><span class=o>/</span><span class=nt>gpm</span><span class=o>,</span> <span class=nt>加入</span><span class=o>:</span>
<span class=nt>GPM_ARGS</span><span class=o>=</span><span class=s2>"-m /dev/misc/psaux -t ps2"</span>   <span class=o>(</span><span class=nt>PS</span><span class=o>/</span><span class=nt>2</span><span class=o>)</span> <span class=nt>or</span>
<span class=nt>GPM_ARGS</span><span class=o>=</span><span class=s2>"-m /dev/input/mice -t imps2"</span>  <span class=o>(</span><span class=nt>USB</span><span class=o>)</span>
<span class=o>$</span> <span class=nt>sudo</span> <span class=nt>gpm</span> <span class=nt>-m</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>input</span><span class=o>/</span><span class=nt>psaux</span> <span class=nt>-t</span> <span class=nt>ps2</span>   <span class=o>(</span><span class=nt>PS</span><span class=o>/</span><span class=nt>2</span><span class=o>)</span> <span class=nt>or</span>
<span class=o>$</span> <span class=nt>sudo</span> <span class=nt>gpm</span> <span class=nt>-m</span> <span class=o>/</span><span class=nt>dev</span><span class=o>/</span><span class=nt>input</span><span class=o>/</span><span class=nt>mice</span> <span class=nt>-t</span> <span class=nt>imps2</span><span class=s2>"  (USB)</span>
<span class=s2>如果已经正常工作，把gpm 加到rc.conf中的DAEMONS 数组中，让它开机自动运行。</span>
<span class=s2>* 2.7 Post Installation Tips</span>
<span class=s2>(1) Colorize your PS1 and Console</span>
<span class=s2>编辑SHELL的配置文件（如 ~/.bashrc），加入：</span>
<span class=s2>export LS_COLORS=&#39;no=00:fi=00:di=01;37;44:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.xcf=01;35:*.pcx=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.avi=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.mov=01;35:*.qt=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.mp3=01;32:*.wav=01;32:*.mid=01;32:*.midi=01;32:*.au=01;32:*.ogg=01;32:*.flac=01;32:*.aac=01;32:&#39;;</span>
<span class=s2>关于提示符的修改，参看一下：http://bbs.linuxsir.org/showthread.php?t=223.44</span>
<span class=s2>(2) 实现彩色版的 Manpages</span>
<span class=s2>$ sudo pacman -S most </span>
<span class=s2>$ vi /etc/man.conf file， change the PAGER and BROWSER variable to: </span>
<span class=s2>PAGER   /usr/bin/most -s </span>
<span class=s2>BROWSER  /usr/bin/most –s </span>
<span class=s2>$ vi ~/.mostrc，add: </span>
<span class=s2>color normal brightwhite black</span>
<span class=s2>color status yellow blue</span>
<span class=s2>color underline white lightblue </span>
<span class=s2>color overstrike brightcyan black</span>
<span class=s2>不过用most是有一些不便之处的，这时可以试试下面的方法，真的挺不错：</span>
<span class=s2>1. 在你的主目录创建 .terminfo 目录，并转到该目录：</span>
<span class=s2>mkdir ~/.terminfo/ && cd ~/.terminfo</span>
<span class=s2>2. 从作者网站获取 terminfo 描述文件：</span>
<span class=s2>wget http://nion.modprobe.de/mostlike.txt</span>
<span class=s2>3. 使用 tic 命令编译 mostlike.txt 文件（编译后可删除）：</span>
<span class=s2>tic mostlike.txt</span>
<span class=s2>4. 在SHELL的配置文件中定义别名：</span>
<span class=s2>alias man="</span><span class=nt>TERMINFO</span><span class=o>=~/</span><span class=p>.</span><span class=nc>terminfo</span><span class=o>/</span> <span class=nt>LESS</span><span class=o>=</span><span class=nt>C</span> <span class=nt>TERM</span><span class=o>=</span><span class=nt>mostlike</span> <span class=nt>PAGER</span><span class=o>=</span><span class=nt>less</span> <span class=nt>man</span><span class=s2>"</span>
<span class=s2>现在使用 man 指令就可以读到彩色版的 Manpages 了。如果你需要修改 terminfo 文件，则可以使用 infocmp mostlike。</span>
<span class=s2>(3) Timesaving Command-aliases</span>
<span class=s2>编辑SHELL的配置文件（如 ~/.bashrc），加入： </span>
<span class=s2>alias ls=&#39;ls --color=auto&#39; </span>
<span class=s2>alias la=&#39;ls -a --color=auto&#39; </span>
<span class=s2>alias ll=&#39;ls -aoth --color=auto&#39;</span>
<span class=s2>alias p=&#39;sudo pacman&#39; </span>
<span class=s2>alias t=&#39;sudo tupac&#39; </span>
<span class=s2>alias x=&#39;startx&#39; </span>
<span class=s2>alias pq=&#39;pacman -Q |grep&#39;</span>
<span class=s2>alias pa=&#39;sudo pacman -S&#39; </span>
<span class=s2>alias pas=&#39;sudo pacman -Ss&#39; </span>
<span class=s2>alias pau=&#39;sudo pacman -Syu&#39; </span>
<span class=s2>alias pay=&#39;sudo pacman -Sy&#39; </span>
<span class=s2>alias pao=”sudo pacman-optimize” </span>
<span class=s2>alias pasch=&#39;pacman -Sl | cut -d&#39; &#39; -f2 | grep &#39; </span>
<span class=s2>alias tp=&#39;sudo tupac -S&#39; </span>
<span class=s2>alias tps=&#39;sudo tupac -Ss&#39; </span>
<span class=s2>alias tpu=&#39;sudo tupac -Syu&#39; </span>
<span class=s2>alias tpy=&#39;sudo tupac -Sy&#39; </span>
<span class=s2>alias vi=&#39;vim&#39; </span>
<span class=s2>alias v=&#39;sudo vim&#39; </span>
<span class=s2>alias ps=&#39;ps ax&#39;</span>
<span class=s2>alias m=&#39;less –s&#39;</span>
<span class=s2>3  安装一个桌面</span>
<span class=s2>* 3.1 xorg</span>
<span class=s2>$ sudo pacman -S xorg</span>
<span class=s2>$ sudo X –configure </span>
<span class=s2>$ sudo vi xorg.conf.new    (作出适当的修正) </span>
<span class=s2>$ X -config xorg.conf.new  (测试一下配置文件是否能正常工作，用Ctrl+Alt+Backspace退出X)</span>
<span class=s2>$ cp xorg.conf.new /etc/X11/xorg.conf</span>
<span class=s2>如果发现“X -configure”不能正确配置某些硬件（比如鼠标），可以试试hwd命令：</span>
<span class=s2>$ sudo pacman -S hwd && sudo hwd -xa</span>
<span class=s2>它会在/etc/X11/自动生成一个xorg.conf，并备份原有的文件。</span>
<span class=s2>* 3.2 安装显卡驱动</span>
<span class=s2>装完Xorg后，就已经有了一个通用的VESA驱动了。不过对图形加速支持得不太好。</span>
<span class=s2>一般显卡的开源驱动可以用：pacman -Ss xf86-video 来搜索到。不过要想较好的支持3D</span>
<span class=s2>性能，还需要使用厂商提供的驱动：</span>
<span class=s2>ATI显示芯片：tupac -S catalyst ，参考http://wiki.archlinux.org/index.php/ATI</span>
<span class=s2>Nvidia显示芯片可用：tupac -Ss nvidia 来搜索，并参考：http://wiki.archlinux.org/index.php/NVIDIA</span>
<span class=s2>不过个人认为，对于Nvidia的显卡，最好是直接使用其官方网站上的驱动，下载地址是：</span>
<span class=s2>http://www.nvidia.cn/Download/index.aspx?lang=cn</span>
<span class=s2>下载最新的Linux驱动(当前是NVIDIA-Linux-x86-169.09-pkg1.run)，然后：</span>
<span class=s2>$ sudo sh NVIDIA-Linux-x86-169.09-pkg1.run</span>
<span class=s2>*3.3 安装字体</span>
<span class=s2>$ sudo pacman –Sy ttf  ｜less  （从安装包列表中查找可用的字体包） </span>
<span class=s2>$ sudo pacman –S sdl_ttf font-bh-ttf ttf-dejavu ttf-fireflysung ttf-ms-fonts</span>
<span class=s2>当前的开源字体已经相当不错了，尤其是文泉驿字体。</span>
<span class=s2>安装文泉驿点阵宋体和正黑体。当前已经进入Community 了。</span>
<span class=s2>$ tupac -S wqy-bitmapfont wqy-zenhei</span>
<span class=s2>$ sudo vi /etc/X11/xorg.conf ，增加字体路径 </span>
<span class=s2>如果没有安装 fontconfig ，就用 pacman 安装一下，然后，</span>
<span class=s2>下载本文附件：fonts.conf.tar.gz ，并解压到 $HOME下：</span>
<span class=s2>$ tar zxf fonts.conf.tar.gz  -C ~/</span>
<span class=s2>这会在 $HOME下产生一个 .fonts.conf 文件，可以优化中文显示。</span>
<span class=s2>如果磁盘上有Windows系统，也可以：</span>
<span class=s2>$ sudo mkdir /usr/share/fonts/msfonts </span>
<span class=s2>复制一些Windows 字体到此目录下，如：msyh, simhei, simyou </span>
<span class=s2>并自行编辑.fonts.conf 文件。当然了，最好不要使用Windows字体，因为是有版权的。</span>
<span class=s2>*3.4 安装一个顺手的整合桌面环境或窗口管理器</span>
<span class=s2>o 3.4.1 gnome</span>
<span class=s2>$ sudo pacman -S gnome  （gnome-extra是附加软件，自行选择安装）</span>
<span class=s2>o 3.4.2 kde</span>
<span class=s2>$ sudo pacman -S kde</span>
<span class=s2>o 3.4.3 xfce + idesk</span>
<span class=s2>$ sudo pacman -S xfce4 idesk (xfce4-goodies是附加软件，自行选择安装)</span>
<span class=s2>o 3.4.4 e17 + idesk</span>
<span class=s2>$ sudo pacman -S e17 idesk</span>
<span class=s2>o 3.4.5 fvwm + idesk</span>
<span class=s2>$ sudo pacman -S fvwm idesk (如果要安装最新版本，需自行下载编译安装)</span>
<span class=s2>o 3.4.6 openbox + rox-filer + lxpanel + idesk</span>
<span class=s2>$ sudo pacman -S openbox rox lxpanel idesk</span>
<span class=s2>o 3.4.7 windowmaker + rox-filer + *dockapp + idesk</span>
<span class=s2>$ sudo pacman -S windowmaker rox lxpanel idesk</span>
<span class=s2>$ pacman -Ss dock , 然后安装中意的dockapp</span>
<span class=s2>安装上面任一桌面后，可能还要安装和启用一个顺手的登录管理器，主要有：</span>
<span class=s2>XDM，GDM，KDM，Entrance, SLIM.</span>
<span class=s2>如果要启用gdm，需注释掉/etc/inittab 中“x:5:respawn:/usr/bin/xdm –nodaemon” </span>
<span class=s2>这一行，另在/etc/rc.conf 中的 DAEMONS行中加入 gdm，可使开机时自动运行。</span>
<span class=s2>~/.profile 文件中的命令是gdm 登录时会默认调用的。其它与之相似。</span>
<span class=s2>如果不用登录管理器，就配置好~/.xinitrc,用"</span><span class=nt>startx</span><span class=s2>"命令，直接从Console下进入。</span>
<span class=s2>参考：</span>
<span class=s2>http://wiki.archlinux.org/index.php/{Gnome,Kde,Xfce,E17,Openbox,GDM,KDM,SLIM}</span>
<span class=s2>http://www.fvwm.org</span>
<span class=s2>http://slim.berlios.de</span>
<span class=s2>http://icculus.org/openbox/index.php/Main_Page</span>
<span class=s2>http://www.windowmaker.info</span>
<span class=s2>http://roscidus.com</span>
<span class=s2>http://idesk.sourceforge.net</span>
<span class=s2>* 3.5 安装中文输入法（fcitx,or scim）</span>
<span class=s2>o 3.5.1 fcitx</span>
<span class=s2>$ sudo pacman -S fcitx </span>
<span class=s2>$ cat &gt;&gt;~/.profile &lt;&lt;EOF </span>
<span class=s2>&gt; LC_CTYPE="</span><span class=nt>zh_CN</span><span class=p>.</span><span class=nc>utf8</span><span class=s2>" </span>
<span class=s2>&gt; export XMODIFIERS=@im=fcitx </span>
<span class=s2>&gt; export GTK_IM_MODULE=xim </span>
<span class=s2>&gt; export QT_IM_MODULE=xim </span>
<span class=s2>&gt; fcitx & </span>
<span class=s2>&gt; EOF</span>
<span class=s2>o 3.5.2 scim</span>
<span class=s2>$ sudo pacman -S scim-tables   (或安装scim-fcitx。要用拼音，安装scim-pinying)</span>
<span class=s2>$ cat &gt;&gt;~/.profile &lt;&lt;EOF </span>
<span class=s2>&gt; LC_CTYPE="</span><span class=nt>zh_CN</span><span class=p>.</span><span class=nc>utf8</span><span class=s2>" </span>
<span class=s2>&gt; export XMODIFIERS=@im=SCIM</span>
<span class=s2>&gt; export GTK_IM_MODULE="</span><span class=nt>scim</span><span class=s2>"</span>
<span class=s2>&gt; export QT_IM_MODULE="</span><span class=nt>scim</span><span class=s2>"</span>
<span class=s2>&gt; scim -f socket -c socket -d</span>
<span class=s2>&gt; EOF</span>
<span class=s2># cp ~/.profile ~/.xinitrc </span>
<span class=s2># echo exec gnome-session &gt;&gt;~/.xinitrc  </span>
<span class=s2>这是startx 调用的配置文件。用“&gt;&gt;”,确保了gnome-session是最后被执行的命令。 </span>
<span class=s2># startx</span>
<span class=s2>4  安装常用软件</span>
<span class=s2>* 4.1 X下的虚拟终端</span>
<span class=s2>roxterm,tilda和yakuake都是相当棒的虚拟终端。</span>
<span class=s2>toxterm同gnome-terminal相似，却要小巧得多。</span>
<span class=s2>Tilda 可用于 GNOME、Xfce 桌面，而 Yakuake 主要用于 KDE 桌面。它们都具有热键控制，</span>
<span class=s2>桌面嵌入，背景透明，动画效果，标签页功能和可定制性。</span>
<span class=s2>个人偏好tilda，直接用Pacman命令安装：</span>
<span class=s2># pacman -S tilda （不过最近Gnome的MetaCity似乎对Tilda不太友好，老是找不到焦点）</span>
<span class=s2>* 4.2 网络浏览</span>
<span class=s2>使用经过优化的更小巧快速的 swiftfox 来代替Firefox。</span>
<span class=s2>如果安装了elinks，可以先：</span>
<span class=s2>$ elinks http://getswift.com/installer.htm</span>
<span class=s2>看看有哪些版本可以下载，结合电脑处理器的类型下载，如Pentium 4的CPU：</span>
<span class=s2>$ aria2c –s 4 http://getswiftfox.com/builds/installer/pentium4/install-swiftfox.sh -d /tmp </span>
<span class=s2>$ vi /tmp/ install-swiftfox.sh  （作出适当的修正，不作修正也可） </span>
<span class=s2>$ sudo sh /tmp/install-swiftfox.sh</span>
<span class=s2>也可以选择其他的网络浏览器，比如 Opera：</span>
<span class=s2># pacman -S opera</span>
<span class=s2>* 4.3 图像编辑</span>
<span class=s2>(1) Linux下的Photoshop: GIMP，要安装它可以执行命令：</span>
<span class=s2># pacman -S gimp</span>
<span class=s2>你可以通过”应用程序 → 图像 → GIMP“来运行 GIMP。</span>
<span class=s2>(2)矢量图形编辑软件可以使用 Inkscape：</span>
<span class=s2># pacman -S inkscape</span>
<span class=s2>(3)命令行的可以装上 ImageMagick：</span>
<span class=s2># pacman -S imagemagick</span>
<span class=s2>(4)用来捕获图像的 Scrot：</span>
<span class=s2># pacman -S scrot</span>
<span class=s2>(5)轻量级的图像查看软件 GQview：</span>
<span class=s2>pacman -S gqview</span>
<span class=s2>或者 GNOME 默认的 Eog：</span>
<span class=s2>pacman -S eog</span>
<span class=s2>* 4.4 Linux下的Office软件</span>
<span class=s2>(1) OpenOffice.org ：</span>
<span class=s2># pacman -S openoffice-base openoffice-zh_cn</span>
<span class=s2>为了让 OpenOffice.org 运行于 GTK 2 模式，向SHELL的配置文件（如 ~/.bashrc） 添加：</span>
<span class=s2>export OOO_FORCE_DESKTOP=gnome</span>
<span class=s2>(2) 永中Office:</span>
<span class=s2>国产软件，听说对MS Office文档格式的支持要比OpenOffice好，如果Word，Exel的文件较多，</span>
<span class=s2>可以考虑这个，就是安装略显麻烦。</span>
<span class=s2>$ cd ~</span>
<span class=s2>$ aria2c -s 4 http://218.90.147.70/EverMore/EIOffice2007/EIO2007_Trial_ZH_Lin.tar.gz  （电信）or:</span>
<span class=s2>$ aria2c -s 4 http://218.104.51.66/EverMore/EIOffice2007/EIO2007_Trial_ZH_Lin.tar.gz   (网通)</span>
<span class=s2>$ tar zxf EIO2007_Trial_ZH_Lin.tar.gz</span>
<span class=s2>用su命令登录root，再进入解压后文件夹（好像是4开头的）；</span>
<span class=s2># ./setup.sh        （进入永中Office的图形界面安装，指定一下安装目录）</span>
<span class=s2>安装完成后，要以root身份运行一下永中：</span>
<span class=s2># eio; exit</span>
<span class=s2>$ cd ~ ; seteio     (为普通用户配置下永中)</span>
<span class=s2>$ eio               (从终端运行永中Office，或者从菜单中运行也可以)</span>
<span class=s2>* 4.5 即时通讯</span>
<span class=s2>要与朋友即时聊天，我们可以选用 Pidgin，它支持 Gtalk、MSN、QQ 等多种协议：</span>
<span class=s2>pacman -S pidgin</span>
<span class=s2>当然，Skype 也不可错过：</span>
<span class=s2>pacman -S skype-staticqt</span>
<span class=s2>* 4.6 音影播放</span>
<span class=s2>(1)音乐播放软件我选择 Quod Libet，你可以凭自己的喜好来安装：</span>
<span class=s2># pacman -S quodlibet</span>
<span class=s2>其他的音乐播放器有 MPD、Audacious、Exaile、Amarok 等。</span>
<span class=s2>(2)看电影的话，可用mplayer，同时也加上浏览器插件和常用解码器：</span>
<span class=s2># pacman -S mplayer mplayer-plugin codecs gstreamer0.10-bad gstreamer0.10-ugly gstreamer0.10-ffmpeg gstreamer0.10-mad gstreamer0.10-mpeg2dec</span>
<span class=s2>如果需要 MPlayer 的前端，那么可以安装 SMPlayer：</span>
<span class=s2># pacman -S smplayer</span>
<span class=s2>当然，另一个选择 VLC 也挺好：</span>
<span class=s2># pacman -S vlc</span>
<span class=s2>* 4.7 下载工具</span>
<span class=s2>命令行下载工具，有 wget。此外，aria2 也不错，它支持断点续传和多线程下载：</span>
<span class=s2>pacman -S aria2</span>
<span class=s2>BitTorrent 下载工具，我们选用 Deluge：</span>
<span class=s2>pacman -S deluge</span>
<span class=s2>其他的包括 Azureus、rTorrent 等。</span>
<span class=s2>另外，我们把 aMule 也安装上：</span>
<span class=s2>pacman -S amule</span>
<span class=s2>为了能够让 aMule 直接从 Firefox 浏览器中处理 ed2k 链接，我们在 Firefox 的 </span>
<span class=s2>about:config 中新建字符串 network.protocol-handler.app.ed2k，并将其设为 </span>
<span class=s2>/usr/bin/ed2k。</span>
<span class=s2>* 4.8 文本编辑与排版</span>
<span class=s2>(1)如果要求简单的话，可以选用 Gedit：</span>
<span class=s2>pacman -S gedit</span>
<span class=s2>(2)安装 Vim，要图形界面的话，可以加上 Gvim：</span>
<span class=s2>pacman -S vim gvim</span>
<span class=s2>(3)Emacs 迷们可以执行：</span>
<span class=s2>pacman -S emacs</span>
<span class=s2>Emacs CVS 版本可在 community 中找到。</span>
<span class=s2>(4)世界第一流的排版工具集 TexLive</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Texlive</span>
<span class=s2>也可额外安装 TeX 的集成编辑环境：Kile, or Lyx</span>
<span class=s2>* 4.9 安装VirtualBox虚拟机</span>
<span class=s2>$ sudo tupac -S virtualbox_bin   (从AUR安装VirtualBox 的PUEL版本)</span>
<span class=s2>$ sudo vbox_build_module  (创建VirtualBox的内核)</span>
<span class=s2>$ sudo gpasswd -a YourName vboxusers  (将你的名字加入vboxusers用户组)</span>
<span class=s2>$ sudo modprobe  vboxdrv  （如果要立刻开始用，需要加载vboxdrv模块）</span>
<span class=s2>$ sudo vim /etc/rc.conf：</span>
<span class=s2>MODULES中加入vboxdrv，使开机时加载vboxdrv模块.</span>
<span class=s2>$ VirtalBox   (从终端运行virtualbox，或从桌面的菜单中运行它)</span>
<span class=s2>有时，会因为没有libstdc++5 这个库文件，而使virtualbox不能运行。安装它就是了：</span>
<span class=s2>$ sudo pacman -S libstdc++5</span>
<span class=s2>* 4.10 wine──在Unix/Linux系统上实现Windows API  </span>
<span class=s2>Wine用Unix的方式实现（或代替了）Windows API ，所以通过Wine可以在Unix-Like系统上运行 Windows 程序及游戏。</span>
<span class=s2>Wine-Doors是一款基于Gnome桌面的Windows软件安装管理包，是Wine 的辅助工具，</span>
<span class=s2>使用非常方便，只需在软件列表中选择要安装的软件，Wine-Doors就会帮你搞定一切，</span>
<span class=s2>不再需要自己动手来配置Wine。什么Office 2003，Photoshop都不在话下了。</span>
<span class=s2>$ sudo tupac -S wine wine-doors</span>
<span class=s2>$ winecfg        (配置好Wine)</span>
<span class=s2>$ sudo wine iexplore http://www.winehq.org  （安装Wine Gecko IE engine）</span>
<span class=s2>$  cp /usr/share/fonts/wenquanyi/wqy-zenhei/wqy-zenhei.ttf ~/.wine/drive_c/windows/fonts</span>
<span class=s2>给Wine提供一个中文字体：WenQuanYi Zen Hei</span>
<span class=s2>$ vi ~/zh.reg, add:      （编辑Wine中文字体支持的注册表文件，否则中文网页会乱码）</span>
<span class=s2>REGEDIT4</span>
<span class=cp>[</span><span class=nx>HKEY_LOCAL_MACHINE</span><span class=o>\</span><span class=nx>Software</span><span class=o>\</span><span class=nx>Microsoft</span><span class=o>\</span><span class=nx>Windows</span> <span class=nx>NT</span><span class=o>\</span><span class=nx>CurrentVersion</span><span class=o>\</span><span class=nx>FontSubstitutes</span><span class=cp>]</span><span class=s2></span>
<span class=s2>"</span><span class=nt>Arial</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Arial</span> <span class=nt>CE</span><span class=o>,</span><span class=nt>238</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Arial</span> <span class=nt>CYR</span><span class=o>,</span><span class=nt>204</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Arial</span> <span class=nt>Greek</span><span class=o>,</span><span class=nt>161</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Arial</span> <span class=nt>TUR</span><span class=o>,</span><span class=nt>162</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Courier</span> <span class=nt>New</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Courier</span> <span class=nt>New</span> <span class=nt>CE</span><span class=o>,</span><span class=nt>238</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Courier</span> <span class=nt>New</span> <span class=nt>CYR</span><span class=o>,</span><span class=nt>204</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Courier</span> <span class=nt>New</span> <span class=nt>Greek</span><span class=o>,</span><span class=nt>161</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Courier</span> <span class=nt>New</span> <span class=nt>TUR</span><span class=o>,</span><span class=nt>162</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>FixedSys</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Helv</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Helvetica</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>MS</span> <span class=nt>Sans</span> <span class=nt>Serif</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>MS</span> <span class=nt>Shell</span> <span class=nt>Dlg</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>MS</span> <span class=nt>Shell</span> <span class=nt>Dlg</span> <span class=nt>2</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>System</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Tahoma</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Times</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Times</span> <span class=nt>New</span> <span class=nt>Roman</span> <span class=nt>CE</span><span class=o>,</span><span class=nt>238</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Times</span> <span class=nt>New</span> <span class=nt>Roman</span> <span class=nt>CYR</span><span class=o>,</span><span class=nt>204</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Times</span> <span class=nt>New</span> <span class=nt>Roman</span> <span class=nt>Greek</span><span class=o>,</span><span class=nt>161</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Times</span> <span class=nt>New</span> <span class=nt>Roman</span> <span class=nt>TUR</span><span class=o>,</span><span class=nt>162</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>"</span><span class=nt>Tms</span> <span class=nt>Rmn</span><span class=s2>"="</span><span class=nt>WenQuanYi</span> <span class=nt>Zen</span> <span class=nt>Hei</span><span class=s2>"</span>
<span class=s2>$ regedit zh.reg    (将中文字体配置写入Wine的注册表)</span>
<span class=s2>$ wine iexplore http://www.126.com     (试验一下中文效果)</span>
<span class=s2>需要注意的是，如果从abs系统编译了并升级安装到了最新的Wine，一定要运行“wineprefixcreate” 来更新Wine的注册表。</span>
<span class=s2>* 4.11  其他工具</span>
<span class=s2>(1)光盘刻录</span>
<span class=s2>KDE下建议选择 K3b，可以通过以下指令安装：</span>
<span class=s2>pacman -S k3b dvd+rw-tools</span>
<span class=s2>为了让当前用户能够使用光盘刻录设备，需要将其添加到 optical 用户组中：</span>
<span class=s2>gpasswd -a YOURNAME optical</span>
<span class=s2>如果是Gnome用户，建议安装gnomebaker，不亚于k3b:</span>
<span class=s2>pacman -S gnomebaker</span>
<span class=s2>(2) FTP上传</span>
<span class=s2>可选择命令行的 Lftp：</span>
<span class=s2>pacman -S lftp</span>
<span class=s2>图形化的有 gFTP、FileZilla 等。</span>
<span class=s2>FTP下载其实不必特意安装什么，因为wget，aria2都是支持FTP协议的。</span>
<span class=s2>(3)文档查看</span>
<span class=s2>查看 PDF 文档，可以安装 Evince：pacman -S evince</span>
<span class=s2>也可以用Adobe公司的acroread：pacman -S acroread</span>
<span class=s2>或轻量级的xpdf：pacman -S xpdf xpdf-chinese-simplified xpdf-chinese-traditional</span>
<span class=s2>CHM 文档，可以选用kchmviewer</span>
<span class=s2>(4)新闻阅读</span>
<span class=s2>RSS 离线阅读软件，用 Liferea：</span>
<span class=s2>pacman -S liferea</span>
<span class=s2>(5)邮件收发</span>
<span class=s2>电子邮件客户端，可以选择 Thunderbird：</span>
<span class=s2>pacman -S thunderbird thunderbird-i18n</span>
<span class=s2>或者采用：mutt + msmtp + getmail</span>
<span class=s2>(6)图形界面的进程查看器 (gps)</span>
<span class=s2>$ sudo pacman –S gps </span>
<span class=s2>$ gps </span>
<span class=s2>如果是文字界面的话，可用下面的命令： </span>
<span class=s2>$ ps ax</span>
<span class=s2>(7)计算器：</span>
<span class=s2>pacman -S gcalctool</span>
<span class=s2>(8)压缩/解压 rar、zip 等格式：</span>
<span class=s2>pacman -S p7zip q7z    (安装7zip，q7z是其GUI程序)</span>
<span class=s2>pacman -S unrar unzip</span>
<span class=s2>另外，图形化的可以用 File-roller：</span>
<span class=s2>pacman -S file-roller</span>
<span class=s2>(9)词典翻译</span>
<span class=s2>安装 StarDict：</span>
<span class=s2>pacman -S stardict</span>
<span class=s2>同时，词典文件需从 StarDict 官方网站下载，并释放到 /usr/share/stardict/dic/ 目录。</span>
<span class=s2>(10)Java 支持：</span>
<span class=s2>pacman -S jre</span>
<span class=s2>(11)Flash 插件：</span>
<span class=s2>pacman -S flashplugin</span>
<span class=s2>* 4.11 安装主题</span>
<span class=s2>GDM 可以安装 Arch Boomerang Underlight 这套清爽的主题。下载后，执行：</span>
<span class=s2>$ tar zxvf arch-boomerang-underlight-gdm.tar.gz</span>
<span class=s2>$ mv arch-underlight-* /usr/share/gdm/themes/</span>
<span class=s2>$ sudo gdmsetup   (需要在X下执行，需要事先安装gdm)</span>
<span class=s2>或者，如果在使用Gnome，就在”系统 → 系统管理 → 登录窗口“中将样式更改为主题模式，</span>
<span class=s2>并选择已安装的主题即可。</span>
<span class=s2>参看：http://www.gnome-look.org/</span>
<span class=s2>还可以打造一个 Mac OS X 风格的界面，参看：http://sourceforge.net/projects/mac4lin</span>
<span class=s2>5  常见问题</span>
<span class=s2>* 5.1 声音问题</span>
<span class=s2>安装ALSA。实际上，ALSA 已被包含到 2.6 版的内核中。因此，只需安装 ALSA 的相关工具即可：</span>
<span class=s2>pacman -S alsa-utils</span>
<span class=s2>接着，将当前用户添加到 audio 用户组，以便使用声卡设备：</span>
<span class=s2>gpasswd -a YOURNAME audio</span>
<span class=s2>同时，将 alsa 添加到 /etc/rc.conf 配置文件的 DAEMONS 中：</span>
<span class=s2>DAEMONS=(syslog-ng network netfs crond gdm alsa)</span>
<span class=s2>值得注意的是，ALSA 默认是静音状态，需要先打开音量。另外，也可点击”系统 → 首选</span>
<span class=s2>项 → 音效“进行测试。</span>
<span class=s2>$ sudo pacman -S alsa-lib alsa-oss alsa-utils (oss 包解决声卡独占问题) </span>
<span class=s2>$ sudo alsaconf   (设置声卡) </span>
<span class=s2>$ sudo alsamixer </span>
<span class=s2>$ sudo alsactl store  (设置和保存音量，并在 /etc/rc.conf中的 DAEMONS行加入alsa) </span>
<span class=s2>$ amixer set Master 75 unmute </span>
<span class=s2>$ amixer set PCM 75 unmute  (75 好像是原声，再高的话，声音会失真)</span>
<span class=s2>* 5.2 笔记本电脑可能遇到的问题</span>
<span class=s2>(1) 触摸板问题</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Touchpad_Synaptics</span>
<span class=s2>(2) 摄像头问题</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Webcam_Setup</span>
<span class=s2>(3) 无线上网问题</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Wireless</span>
<span class=s2>(4) 快捷键问题</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Extra_Keyboard_Keys</span>
<span class=s2>* 5.3 打印机设置</span>
<span class=s2>(1) 当前最流行的底层基础打印系统：CUPS  (适用于所有打印机)</span>
<span class=s2>Unix-Like系统下的打印系统中，最具易用性的当数CUPS (The Common UNIX Printing System )，即</span>
<span class=s2>Unix通用打印系统。在过去，Unix-Like系统下的打印问题是老大难。CUPS的出现使这个问题得到了</span>
<span class=s2>极大的缓解。</span>
<span class=s2>安装：</span>
<span class=s2># pacman -S cups ghostscript gsfonts</span>
<span class=s2>CUPS系统运行记录：</span>
<span class=s2>编辑/etc/cups/cupsd.conf，设置LogLevel的等级：</span>
<span class=s2>LogLevel debug2</span>
<span class=s2>如果出现错误，就可以察看调试信息了：</span>
<span class=s2>$ tail -n 100 -f /var/log/cups/error_log</span>
<span class=s2>看看系统已经加载了哪些模组（Modules）：</span>
<span class=s2># lsmode |less</span>
<span class=s2>再来看看系统中有哪些可以使用的模组：</span>
<span class=s2># modprobe -l |less</span>
<span class=s2>为内核加载打印机模组后，连接好打印机机，并打开电源：</span>
<span class=s2>i) USB 接口打印机</span>
<span class=s2># modprobe usblp                      （2.6.x 内核）</span>
<span class=s2># modprobe printer                    （2.4.x 内核）</span>
<span class=s2># tail /var/log/messages.log          （看看安装成功了没有）</span>
<span class=s2>ii) 并口打印机</span>
<span class=s2># modprobe lp parport parport_pc      （2.6.x 内核）</span>
<span class=s2># modprobe parport parport_pc         （2.4.x 内核）</span>
<span class=s2># tail /var/log/messages.log          （看看安装成功了没有）</span>
<span class=s2>将这些模组加入/etc/rc.conf中的MODULES中去，以便开机时自动加载。</span>
<span class=s2>启动 CUPS ：</span>
<span class=s2># /etc/rc.d/cups start       （可将cups加入/etc/rc.conf中的DAEMONS中去，以便开机时自动加载）</span>
<span class=s2>这个时候，就可以用CUPS在控制台下做一些简单的打印了，如：</span>
<span class=s2>$ cat ~/.xinitrc &gt; /dev/usb/lp0      (USB接口打印机)</span>
<span class=s2>当然仅仅依靠CUPS打印，如果在X下，肯定是不方便的。主要是因为缺少驱动，Linux下的打印驱动是PPD文件。</span>
<span class=s2>(2) 打印驱动： Foomatic</span>
<span class=s2>Foomatic是一个数据库驱动的打印系统，它将Unix下的通用后台打印系统与开源的打印机驱动整合在一起。</span>
<span class=s2>只要有任一在开源驱动下能够正常工作的打印机，它就能支持了。它支持CUPS, LPRng, LPD, GNUlpr, Solaris LP,</span>
<span class=s2>PPR, PDQ, CPS 这些底层的打印系统，也能直接打印（既是驱动也是打印工具）。</span>
<span class=s2>Foomatic打印速度快，打印质量也挺不错。不过缺点是，有个别的打印机可能没有PPD文件驱动。</span>
<span class=s2># pacman -S foomatic-***</span>
<span class=s2>Foomatic包含五个安装包：</span>
<span class=s2>foomatic-filters (帮助后台打印系统将PostScript转成打印机语言)，</span>
<span class=s2>foomatic-db (foomatic-db-engine生成PPD文件时要用到的一切资料)，</span>
<span class=s2>foomatic-db-PPD (已经获支持的打印驱动)</span>
<span class=s2>foomatic-db-engine (将 Foomatic XMLo数据库中的数据生成PPD文件)，</span>
<span class=s2>foomatic-db-hpijs (专为HP打印驱动生成Foomatic XML 数据)。</span>
<span class=s2>一般来说，安装前四个包就可以了。如果没有惠普打印机，就不必安装foomatic-db-hpijs了。</span>
<span class=s2>(4) 打印驱动：hplip</span>
<span class=s2>惠普DeskJet, OfficeJet, Photosmart, Business Inkjet 和一些 LaserJet 打印机型号，需要安装hplip。只用于惠普打印机。</span>
<span class=s2>也可同时安装上面的Foomatic，对比一下两者的打印速度。</span>
<span class=s2># pacman -S hplip</span>
<span class=s2>(5) 打印驱动：Gutenprint</span>
<span class=s2>也许以上的打印驱动仍然不行（不过安装foomatic一定是必要的，能提高打印速度）。在配置CUPS时（即将讲到）</span>
<span class=s2>没有找到自己的打印机型号。那么可能还需要接着安装Gutenprint。</span>
<span class=s2>Gutenprint 是GIMP的打印扩充功能模块，过去叫"</span><span class=nt>gimp-print</span><span class=s2>"，它能够为GIMP提供流行的打印驱动，能</span>
<span class=s2>让佳能、爱普生、惠普、利盟、索尼、奥林巴斯，以及其他基于PCL技术的打印机，打印出更出色的品质。用于高品质的图像打印是在好不过了。</span>
<span class=s2>它支持的打印机型号列表可见于：http://gutenprint.sourceforge.net/p_Supported_Printers.php3</span>
<span class=s2>不过Gutenprint的打印品质是没得说，但速度就不敢恭维了。但有foomatic的支持就会快很多。</span>
<span class=s2># pacman -S gutenprint</span>
<span class=s2>(6)  在X下配置CUPS</span>
<span class=s2>打印基础系统CUPS和打印驱动安装好的，就要开始配置打印机了。</span>
<span class=s2>可以通过配置CUPS来配置打印机。配置CUPS的方法适用于一切打印机及其驱动。因此推荐使用。</span>
<span class=s2>进入X，打开一个网络浏览器，访问：</span>
<span class=s2>http://localhost:631      （也可以用在/etc/hosts中设置好的hostname来代替localhost）</span>
<span class=s2>按照提示，一步一步的配置好打印机：</span>
<span class=s2>Manage Printers ---&gt; Add Printer ---&gt; root密码验证 ---&gt; 输入打印机名称 ---&gt; 选择设备类型</span>
<span class=s2>（打印机型号及其接口：USB接口 or 并口打印机） ---&gt; 选择你的打印机 ---&gt; 通过打印机型号来选择适当的打印机驱动，并Add</span>
<span class=s2>（如果打印驱动的名称中出现了foomatic字样，一定要优先选择） ---&gt; 打印选项的设置 ---&gt; 完成</span>
<span class=s2>也可以使用另外的配置界面，不过可能要另外安装：</span>
<span class=s2>tupac -S gnome-cups-manager     (Gnome下)</span>
<span class=s2>tupac -S gtklp                  (KDE下)</span>
<span class=s2>(5) 打印机共享</span>
<span class=s2>i) Linux to Linux</span>
<span class=s2>服务器端：编辑 /etc/cups/cupsd.conf 中“Location”一段，以允许客户端的访问，重启cups服务。</span>
<span class=s2>客户端：编辑 /etc/cups/cupsd.conf 中“ServerName”一段，以允许访问服务器端。执行命令：lpq</span>
<span class=s2>ii) Linux to Windows</span>
<span class=s2>两端都应当安装Samba。参看Wiki。</span>
<span class=s2>iii) Windows to Linux</span>
<span class=s2>两端都应当安装Samba。参看Wiki</span>
<span class=s2>*******</span>
<span class=s2>所有关于打印的问题，请一定要参看：</span>
<span class=s2>http://wiki.archlinux.org/index.php/CUPS</span>
<span class=s2>http://www.cups.org/</span>
<span class=s2>http://gimp-print.sourceforge.net/</span>
<span class=s2>http://www.linuxprinting.org/printer_list.cgi</span>
<span class=s2>http://www.linux-foundation.org/en/OpenPrinting/Database/Foomatic</span>
<span class=s2>http://savannah.nongnu.org/projects/foomatic-gui/</span>
<span class=s2>http://wiki.gentoo.tw/mediawiki/index.php/Printing-howto</span>
<span class=s2>另可参看http://www.redhat.net.cn/online/linuxbook/1/16.htm</span>
<span class=s2>* 5.4 服务的访问控制</span>
<span class=s2>/etc/hosts.allow 和/etc/hosts.deny </span>
<span class=s2>这两个文件是tcpd 服务器的配置文件，tcpd 服务器可以控制外部IP 对本机服务的访问。 </span>
<span class=s2>这两个配置文件的格式如下： </span>
<span class=s2>#服务进程名:主机列表:当规则匹配时可选的命令操作 </span>
<span class=s2>server_name:hosts-list</span><span class=cp>[</span><span class=p>:</span><span class=nx>command</span><span class=cp>]</span><span class=s2> </span>
<span class=s2>/etc/hosts.allow 控制可以访问本机的IP 地址，/etc/hosts.deny 控制禁止访问本机的IP。 </span>
<span class=s2>如果两个文件的配置有冲突，以/etc/hosts.deny 为准。下面是一个/etc/hosts.allow 的示例： </span>
<span class=s2>ALL: 127.0.0.1: ALLOW     #允许本机访问本机所有服务进程 </span>
<span class=s2>smbd: 192.168.0.0/255.255.255.0   #允许192.168.0.网段的IP 访问smbd 服务 </span>
<span class=s2>ALL 关键字匹配所有情况，EXCEPT 匹配除了某些项之外的情况，PARANOID 匹配你想控 </span>
<span class=s2>制的IP 地址和它的域名不匹配时(域名伪装)的情况。</span>
<span class=s2>* 5.5 启动加速</span>
<span class=s2>编辑 /etc/rc.conf ，在 “ DAEMONS ”行的一些不急着需要用的后台程序前加上@，使后台运行。</span>
<span class=s2>* 5.6  中文Java 支持</span>
<span class=s2>$JAVA_HOME/jre/lib/fonts/  下建一个fallback 的目录，然后建一个中文字体的软链接过去。</span>
<span class=s2>* 5.7  可移动设备的自动挂载（HAL + dbus or ivman） 及中文名支持</span>
<span class=s2>$ sudo pacman -S hal dbus acpid（hal 依赖 dbus，acpid 可管理设备的电源。） </span>
<span class=s2>$ sudo vi /etc/rc.conf ，在 DAEMONS行 加入hal，如: </span>
<span class=s2>DAEMONS=(syslog-ng acpid hal network !netfs @crond @alsa gdm) </span>
<span class=s2>注意：如果daemons 列表中有dbus，要移除它，以免出错。hal 会自动加载dbus。 </span>
<span class=s2>$ sudo gpasswd –a username optical </span>
<span class=s2>$ sudo gpasswd –a username storage </span>
<span class=s2>把你的用户加入到 optical，storage 这几个组里面。前文中已经加入过了，可跳过。</span>
<span class=s2>如果用ivman来替代dbus，则需要将用户名加入到plugdev组中。</span>
<span class=s2>$ sudo vi /etc/fstab，注释掉下面两行： </span>
<span class=s2>/dev/cdrom /mnt/cdrom  iso9660 ro,user,noauto,unhide 0     0 </span>
<span class=s2>/dev/dvd /mnt/dvd   udf  ro,user,noauto,unhide 0      0 </span>
<span class=s2>$ sudo vi /etc/hal/fdi/policy/preferences.fdi，可加入一些很有用的规则，</span>
<span class=s2>如自动挂载NTFS文件系统，自动挂载可移动设备，性能优化，U盘的中文名支持等：</span>
<span class=s2>&lt;?xml version="</span><span class=nt>1</span><span class=p>.</span><span class=nc></span><span class=s2>" encoding="</span><span class=nt>UTF-8</span><span class=s2>"?&gt; </span>
<span class=s2>&lt;deviceinfo version="</span><span class=nt></span><span class=p>.</span><span class=nc>2</span><span class=s2>"&gt;</span>
<span class=s2>    &lt;device&gt;</span>
<span class=s2>        &lt;match key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>fstype</span><span class=s2>" string="</span><span class=nt>ntfs</span><span class=s2>"&gt;</span>
<span class=s2>            &lt;append key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>mount</span><span class=p>.</span><span class=nc>valid_options</span><span class=s2>" </span>
<span class=s2>            type="</span><span class=nt>strlist</span><span class=s2>"&gt;dmask=000&lt;/append&gt;</span>
<span class=s2>            &lt;append key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>mount</span><span class=p>.</span><span class=nc>valid_options</span><span class=s2>" </span>
<span class=s2>            type="</span><span class=nt>strlist</span><span class=s2>"&gt;fmask=111&lt;/append&gt;</span>
<span class=s2>        &lt;/match&gt;</span>
<span class=s2>    &lt;/device&gt;</span>
<span class=s2>    &lt;device&gt;</span>
<span class=s2>    &lt;!-- Use UTF-8 charset for vfat --&gt;</span>
<span class=s2>       &lt;match key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>fstype</span><span class=s2>" string="</span><span class=nt>vfat</span><span class=s2>"&gt;</span>
<span class=s2>           &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>iocharset</span><span class=o>=</span><span class=nt>utf8</span><span class=s2>" </span>
<span class=s2>           type="</span><span class=nt>bool</span><span class=s2>"&gt;true&lt;/merge&gt;</span>
<span class=s2>       &lt;/match&gt;</span>
<span class=s2>   &lt;/device&gt;</span>
<span class=s2>   &lt;device&gt;</span>
<span class=s2>       &lt;match key="</span><span class=nt>storage</span><span class=p>.</span><span class=nc>hotpluggable</span><span class=s2>" bool="</span><span class=nt>false</span><span class=s2>"&gt;</span>
<span class=s2>          &lt;match key="</span><span class=nt>storage</span><span class=p>.</span><span class=nc>removable</span><span class=s2>" bool="</span><span class=nt>false</span><span class=s2>"&gt;</span>
<span class=s2>            &lt;merge key="</span><span class=nt>storage</span><span class=p>.</span><span class=nc>automount_enabled_hint</span><span class=s2>" type="</span><span class=nt>bool</span><span class=s2>"&gt;false&lt;/merge&gt;</span>
<span class=s2>          &lt;/match&gt;</span>
<span class=s2>       &lt;/match&gt;</span>
<span class=s2>   &lt;/device&gt;</span>
<span class=s2> &lt;device&gt; </span>
<span class=s2>   &lt;match key="</span><span class=nt>block</span><span class=p>.</span><span class=nc>is_volume</span><span class=s2>" bool="</span><span class=nt>true</span><span class=s2>"&gt;</span>
<span class=s2>     &lt;match key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>size</span><span class=s2>" compare_lt="</span><span class=nt>8000000000</span><span class=s2>"&gt;</span>
<span class=s2>       &lt;match key="</span><span class=p>@</span><span class=k>block</span><span class=p>.</span><span class=nc>storage_device</span><span class=p>:</span><span class=nd>storage</span><span class=p>.</span><span class=nc>hotpluggable</span><span class=s2>" bool="</span><span class=nt>true</span><span class=s2>"&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>sync</span><span class=s2>" type="</span><span class=nt>bool</span><span class=s2>"&gt;true&lt;/merge&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>noatime</span><span class=s2>" </span>
<span class=s2>         type="</span><span class=nt>bool</span><span class=s2>"&gt;true&lt;/merge&gt;</span>
<span class=s2>        &lt;/match&gt;</span>
<span class=s2>        &lt;match key="</span><span class=p>@</span><span class=k>block</span><span class=p>.</span><span class=nc>storage_device</span><span class=p>:</span><span class=nd>storage</span><span class=p>.</span><span class=nc>removable</span><span class=s2>" bool="</span><span class=nt>true</span><span class=s2>"&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>sync</span><span class=s2>" type="</span><span class=nt>bool</span><span class=s2>"&gt;true&lt;/merge&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>noatime</span><span class=s2>" </span>
<span class=s2>          type="</span><span class=nt>bool</span><span class=s2>"&gt;true&lt;/merge&gt;</span>
<span class=s2>        &lt;/match&gt;</span>
<span class=s2>      &lt;/match&gt;</span>
<span class=s2>     &lt;match key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>size</span><span class=s2>" compare_ge="</span><span class=nt>8000000000</span><span class=s2>"&gt;</span>
<span class=s2>       &lt;match key="</span><span class=p>@</span><span class=k>block</span><span class=p>.</span><span class=nc>storage_device</span><span class=p>:</span><span class=nd>storage</span><span class=p>.</span><span class=nc>hotpluggable</span><span class=s2>" bool="</span><span class=nt>true</span><span class=s2>"&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>sync</span><span class=s2>" </span>
<span class=s2>          type="</span><span class=nt>bool</span><span class=s2>"&gt;false&lt;/merge&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>noatime</span><span class=s2>" </span>
<span class=s2>         type="</span><span class=nt>bool</span><span class=s2>"&gt;false&lt;/merge&gt;</span>
<span class=s2>       &lt;/match&gt;</span>
<span class=s2>       &lt;match key="</span><span class=p>@</span><span class=k>block</span><span class=p>.</span><span class=nc>storage_device</span><span class=p>:</span><span class=nd>storage</span><span class=p>.</span><span class=nc>removable</span><span class=s2>" bool="</span><span class=nt>true</span><span class=s2>"&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>sync</span><span class=s2>" </span>
<span class=s2>          type="</span><span class=nt>bool</span><span class=s2>"&gt;false&lt;/merge&gt;</span>
<span class=s2>         &lt;merge key="</span><span class=nt>volume</span><span class=p>.</span><span class=nc>policy</span><span class=p>.</span><span class=nc>mount_option</span><span class=p>.</span><span class=nc>noatime</span><span class=s2>" </span>
<span class=s2>         type="</span><span class=nt>bool</span><span class=s2>"&gt;false&lt;/merge&gt;</span>
<span class=s2>       &lt;/match&gt;</span>
<span class=s2>     &lt;/match&gt;</span>
<span class=s2>   &lt;/match&gt;</span>
<span class=s2> &lt;/device&gt;</span>
<span class=s2>&lt;/deviceinfo&gt;</span>
<span class=s2>参看：http://wiki.archlinux.org/index.php/HAL</span>
<span class=s2>注意，必须事先安装好ntfs-3g安装包，才能成功挂载NTFS分区。最后：</span>
<span class=s2>$ sudo /etc/rc.d/hal restart</span>
<span class=s2>即可正常使用HAL支持了，同时移动设备上的中文名（其实其它语言也可以）也可以得到支持。</span>
<span class=s2>如果以上不能工作，还可以安装pmount: </span>
<span class=s2>$ sudo pacman -Sy pmount</span>
<span class=s2>* 5.8 更改GNOME 菜单下的图标</span>
<span class=s2>可以编辑/usr/share/applications 中的相应文件</span>
<span class=s2>* 5.9 ArchLinux的包管理系统：Pacman</span>
<span class=s2>常用命令有：</span>
<span class=s2>pacman -Sy  abc                  #和源同步后安装名为abc的包 </span>
<span class=s2>pacman -S   abc                  #从本地数据库中得到abc的信息，下载安装abc包 </span>
<span class=s2>pacman -Sf  abc                  #强制安装包abc </span>
<span class=s2>pacman -Ss  abc                  #搜索有关abc信息的包 </span>
<span class=s2>pacman -Si  abc                  #从数据库中搜索包abc的信息 </span>
<span class=s2>pacman -Qi  abc                  #列出已安装的包abc的详细信息 </span>
<span class=s2>pacman -Syu                      #同步源，并更新系统 </span>
<span class=s2>pacman -Sy                       #仅同步源 </span>
<span class=s2>pacman -R   abc                  #删除abc包 </span>
<span class=s2>pacman -Rc  abc                  #删除abc包和依赖abc的包 </span>
<span class=s2>pacman -Rsc abc                  #删除abc包和abc依赖的包 </span>
<span class=s2>pacman -Sc                       #清理/var/cache/pacman/pkg目录下的旧包 </span>
<span class=s2>pacman -Scc                      #清除所有下载的包和数据库 </span>
<span class=s2>pacman -U   abc                  #安装下载的abs包，或新编译的abc包</span>
<span class=s2>pacman -Sd  abc                  #忽略依赖性问题，安装包abc </span>
<span class=s2>pacman pacman -Su --ignore foo   #升级时不升级包foo </span>
<span class=s2>pacman -Sg  abc                  #查询abc这个包组包含的软件包</span>
<span class=s2>* 5.10 Arch Build System (ABS)</span>
<span class=s2>利用abs 可以从源码自定义编译安装包。其过程如下： </span>
<span class=s2>(1) Synchronize your ABS tree with the server. </span>
<span class=s2># pacman -S cvsup </span>
<span class=s2># abs</span>
<span class=s2>(2) Create a new directory in /var/abs/local/ named after the package </span>
<span class=s2>you are going to create. </span>
<span class=s2>$ mkdir -p ~/abs/local/       (这里，推荐在个人的主目录下创建一个ABS的工作目录)</span>
<span class=s2>(3）Copy the PKGBUILD.proto prototype from /var/abs/ into your </span>
<span class=s2>newly created directory, remove the .proto suffix, and edit it to fit </span>
<span class=s2>the new package. </span>
<span class=s2>$ cp -r /var/abs/...  ~/abs/local/    (将你要编译的软件的PKGBUILD目录复制到个人目录下)</span>
<span class=s2>(4) Run makepkg in the working directory with the PKGBUILD file. </span>
<span class=s2>$ makepkg        (开始编译这前，可以编辑一下PKGBUILD文件，更改其默认安装目录到个人</span>
<span class=s2>主目录下，用“--prefix＝...”来指定安装目录)</span>
<span class=s2>(5) Install the newly built package with pacman.</span>
<span class=s2>$ pacman -U ..pkg.gz    (安装新编译好的包文件)</span>
<span class=s2>(6) Send the package to your friends for bragging rights (or give it to an Archer </span>
<span class=s2>so s/he can stick it in the master ABS tree).</span>
<span class=s2>* 5.11  创建一个光盘镜像</span>
<span class=s2>Linux 下创建一个光盘镜像真的很简单，基本上有两类方法：</span>
<span class=s2>(1) 镜像的源文件在光盘上</span>
<span class=s2>将光盘放入光驱，但不用 mount 指令加载它，然后：</span>
<span class=s2>dd if=/dev/dvd of=dvd.iso # for dvd </span>
<span class=s2>dd if=/dev/cdrom of=cd.iso # for cdrom </span>
<span class=s2>dd if=/dev/scd0 of=cd.iso # if cdrom is scsi </span>
<span class=s2>(2) 镜像的源文件在硬盘上或被 mount 到了硬盘上，比如在 /tmp/directory/：</span>
<span class=s2>mkisofs -o cd.iso /tmp/directory/ </span>
<span class=s2>如果这个源文件是一个DVD视频文件，那么要这样用：</span>
<span class=s2>mkisofs -dvd-video -o dvd.iso /tmp/directory/</span>
<span class=s2>关于mkisofs 的更多用法，还请参看手册：man mkisofs</span>
<span class=s2>关于DVD视频光盘的编辑和创建，请参看：</span>
<span class=s2>http://gecius.de/linux/dvd.html</span>
<span class=s2>http://gentoo-wiki.com/HOWTO_Create_a_DVD:Filesystem</span>
<span class=s2>6 服务器环境</span>
<span class=s2>* 6.1 FTP服务</span>
<span class=s2>(1) vsftpd</span>
<span class=s2>FTP服务器的安装比较简单。直接用Pacman安装即可。当然，还必须配置好，才可正常安全的使用。</span>
<span class=s2>vsftpd的使用和配置，可参考：</span>
<span class=s2>http://vsftpd.beasts.org/</span>
<span class=s2>http://gentoo-wiki.com/HOWTO_vsftpd</span>
<span class=s2>http://www.uplinux.com/www/net/02/117.shtml</span>
<span class=s2>(2) pureftpd</span>
<span class=s2>参考http://www.pureftpd.org/project/pure-ftpd</span>
<span class=s2>    http://www.chinaunix.net/jh/15/2424.html</span>
<span class=s2>* 6.2 HTTP服务</span>
<span class=s2>(1) 提供Web服务的程序</span>
<span class=s2>能提供WEB服务的开源程序主要有：Apache httpd, Lighttpd, 和Nginx。</span>
<span class=s2>Apache稳定，安全，使用者最多，但是运行时对内存、CPU的开销也是最高的。</span>
<span class=s2>在静态网页支持上，lighttpd/nginx 比 apache 优胜很多。</span>
<span class=s2>如果不考虑虚拟主机的安全设置问题，Nginx无疑是最好的选择，其次是Lighttpd。</span>
<span class=s2>i) Apache httpd: 参见http://httpd.apache.org/</span>
<span class=s2>ii) Lighttpd: 参见http://wiki.archlinux.org/index.php/Lighttpd_For_Both_SSL_And_Non-SSL</span>
<span class=s2>iii) Nginx: 参见http://wiki.codemongers.com/Main</span>
<span class=s2>(2) 动态网页的程序接口(CGI)：FastCGI：</span>
<span class=s2>是HTTP服务器与机器上其他程序进行通信的一个接口。这个“其他程序”可以使用任何计算机语言</span>
<span class=s2>来编写，它通过CGI这个接口从HTTP服务器取得输入，然后把运行的结果又通过CGI这个接口交给HTTP</span>
<span class=s2>服务器，而HTTP服务器把这个结果送给浏览器。提供Web服务的程序都有CGI模块。</span>
<span class=s2>不过CGI技术的通用性与效率不高，所以有了性能大幅提升的FastCGI。FastCGI要求提供Web服务的</span>
<span class=s2>程序整合fcgi模块。</span>
<span class=s2>参见http://wiki.archlinux.org/index.php/Apache_fastcgi</span>
<span class=s2>    http://wiki.archlinux.org/index.php/Fastcgi_and_lighttpd</span>
<span class=s2>(3) 动态网页的脚本语言</span>
<span class=s2>PHP：参见http://wiki.archlinux.org/index.php/PHP</span>
<span class=s2>Python: 在动态网页上的应用与PHP相似。</span>
<span class=s2>JSP：Java语言支持，需安装JDK</span>
<span class=s2>(4) 数据库</span>
<span class=s2>MySQL:  当前国内用的较多的数据库。适合小访问量或个人使用。</span>
<span class=s2>PostgreSQL:  世界上最先进，最稳定的数据库。能充分发挥出机器的潜能。更加适合大企业环境。</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/PostgreSQL</span>
<span class=s2>(5) HTTP服务器的架构</span>
<span class=s2>i) 不带数据库支持的轻量级WEB：Nginx/lighttpd + PHP/Python + FastCGI</span>
<span class=s2>ii) 有数据库支持：Apache/lighttpd + PHP/Python + MySQL/PostgreSQL，也可再追加JSP的支持。</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/LAMP</span>
<span class=s2>参见http://wiki.archlinux.org/index.php/Apache_fastcgi</span>
<span class=s2>    http://wiki.archlinux.org/index.php/Fastcgi_and_lighttpd</span>
<span class=s2>    http://www.knowsky.com/3232.html</span>
<span class=s2>iii) 更加高效、可靠、稳定的WEB服务器。下面的架构图比较不错：</span>
<span class=s2>--------      ------------      -------------        ----------------        --------------</span>
<span class=s2>|客户端| ===&gt; |负载均衡器| ===&gt; |反向**/缓存| ===&gt;   |WEB服务器|     ===&gt;  |数据库服务器|</span>
<span class=s2>--------      ------------      -------------        ----------------        --------------</span>
<span class=s2>                  Nginx            Squid              Apache/lighttpd        MySQL/PostgreSQL</span>
<span class=s2>                                                      +(PHP+eAccelerator)     + memcache</span>
<span class=s2>参看http://huangjt.jobui.com/blog/80186.html</span>
<span class=s2>(6) 用WebDav替代传统的FTP服务</span>
<span class=s2>WebDav是一个使用XML技术的基于HTTP协议的扩展协议，具备HTTP的所有优点，力图提供</span>
<span class=s2>一个网页编辑的统一接口。用它替代传统的FTP服务，可以避免FTP存在的一些中文问题。</span>
<span class=s2>参看：http://wiki.archlinux.org/index.php/Simple_WebDav_Setup</span>
<span class=s2>      http://wiki.archlinux.org/index.php/WebDAV_authentication</span>
<span class=s2>* 6.3 邮件服务</span>
<span class=s2>PostFix：参看http://wiki.archlinux.org/index.php/PostFix_Howto</span>
<span class=s2>* 6.4 文件共享</span>
<span class=s2>文件共享的方法较多，机器上只要安装了任一网络文件系统就可以共享了。网络文件系统有：</span>
<span class=s2>ftpfs, sshfs, shfs, smbfs, nfs, etc. </span>
<span class=s2>当然，使用http服务来共享文件也未尝不可。</span>
<span class=s2>(1) Shfs</span>
<span class=s2>sshfs可以开机自动挂载，关机和重启时也可以自动卸载sshfs文件系统，但是它不能用mount来</span>
<span class=s2>直接指定-t参数来挂载，因此也不能直接加到/etc/fstab中，而且用df也不能列出那样的分区。</span>
<span class=s2>但是shfs解决了这个问题，它能像挂载普通分区那样挂载sshfs文件系统。它是通过内核的shfs</span>
<span class=s2>模块来实现的，</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Shfs</span>
<span class=s2>(2) Samba</span>
<span class=s2>可帮助实现跨平台（Linux &lt;---&gt;Windows) 的文件共享和打印共享。</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Setting_up_Samba</span>
<span class=s2>    http://www.samba.org/</span>
<span class=s2>(3) NFS</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Nfs</span>
<span class=s2>(2) rsync</span>
<span class=s2>Rsync用于两台机器上文件的同步备份，它本身不算是共享程序，但它能起到共享的作用。通常与ssh合用。</span>
<span class=s2>参看http://samba.anu.edu.au/rsync/</span>
<span class=s2>    http://dz.adj.idv.tw/thread-48-1-4.html</span>
<span class=s2>* 6.5 远程登录</span>
<span class=s2>(1) OpenSSH/OpenSSH-chroot</span>
<span class=s2>用 OpenSSH-chroot 基于Openssh，但添加了新特性，即可以创建一个chrootjail。chrootjail是单独划分</span>
<span class=s2>出的一个空间，以限制远程登录者活动不超出此范围，更不会影响到主系统。所以比用 Openssh 更安全。</span>
<span class=s2># pacman -S openssh-chroot</span>
<span class=s2># mkdir /var/openssh_chroot</span>
<span class=s2># chroot_create /var/openssh_chroot   (将chrootjail放到/var/openssh_chroot，或其它地方)</span>
<span class=s2># chroot_adduser USERNAME /var/openssh_chroot  (创建远程登录者帐户，并为其指定chrootjail)</span>
<span class=s2># /etc/rc.d/sshd restart  (手动重启sshd服务，也可将sshd添加到/etc/rc.conf中的DAEMON中去)</span>
<span class=s2>如果远程机器是Unix-Like系统，可用：ssh &lt;username&gt;@localhost 来登入；如果是Windows, 可使用</span>
<span class=s2>Putty, or pietty。</span>
<span class=s2>参看http://wiki.archlinux.org/index.php/Openssh-chroot</span>
<span class=s2>(2) OpenVPN</span>
<span class=s2>* 6.6 安全问题</span>
<span class=s2>(1) 防火墙 (Iptables)</span>
<span class=s2>这个实在不是几句话能讲明白的。不过想提醒几句：要使Iptables发挥出最大作用，最好是在一台</span>
<span class=s2>旧电脑装上NAT+Iptables，充当网关，然后自己的电脑跟此网关相连接。</span>
<span class=s2>参看：http://wiki.archlinux.org/index.php/Firewalls</span>
<span class=s2>      http://wiki.archlinux.org/index.php/Simple_stateful_firewall_HOWTO</span>
<span class=s2>      http://gentoo-wiki.com/HOWTO_Iptables_for_newbies</span>
<span class=s2>      http://iptables-tutorial.frozentux.net/iptables-tutorial.html</span>
<span class=s2>      http://wiki.archlinux.org/index.php/High_Performance_Firewall/Nat_with_iptables_and_VLANs_and_iproute2</span>
<span class=s2>(2) 入侵监测 (Snort)</span>
<span class=s2>这个太复杂了。</span>
<span class=s2>有兴趣可以看一看Toby Kohlenberg等编写的专著"</span><span class=nt>Snort</span><span class=o>:</span> <span class=nt>Intrusion</span> <span class=nt>Detection</span> <span class=nt>and</span> <span class=nt>Prevention</span> <span class=nt>Toolkit</span><span class=err>"。</span>
<span class=nt>电子书下载</span><span class=err>：</span><span class=nt>http</span><span class=o>://</span><span class=nt>rapidshare</span><span class=p>.</span><span class=nc>com</span><span class=o>/</span><span class=nt>files</span><span class=o>/</span><span class=nt>27449819</span><span class=o>/</span><span class=nt>Snort_Intrusion_Detection_and_Prevention_Toolkit_ertu</span><span class=p>.</span><span class=nc>rar</span>
<span class=nt>参看http</span><span class=o>://</span><span class=nt>www</span><span class=p>.</span><span class=nc>snort</span><span class=p>.</span><span class=nc>org</span><span class=o>/</span>
</pre></div></section><footer class=article-footer><section class=article-tags><a href=/tags/linux/>Linux</a>
<a href=/tags/archlinux/>ArchLinux</a>
<a href=/tags/database/>Database</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/%E6%88%91%E7%9A%84-linux-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/><div class=article-details><h2 class=article-title>我的 Linux 开发环境</h2></div></a></article><article><a href=/p/%E5%AE%9A%E5%88%B6arm-linux%E9%95%9C%E5%83%8F/><div class=article-details><h2 class=article-title>定制ARM-Linux镜像</h2></div></a></article><article><a href=/p/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E5%9C%A8centos%E4%B8%8B%E7%9A%84gvim%E4%B8%AD%E4%BD%BF%E7%94%A8ibus%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87/><div class=article-details><h2 class=article-title>解决无法在CentOS下的gvim中使用ibus输入中文</h2></div></a></article><article><a href=/p/%E5%AE%89%E8%A3%85-gnu/linux/><div class=article-details><h2 class=article-title>安装 GNU/Linux</h2></div></a></article><article><a href=/p/ssh-%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F/><div class=article-details><h2 class=article-title>ssh 显示图像</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//svtter.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Svtter's Blog</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>