<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on Svtter's Blog</title><link>https://svtter.cn/categories/linux/</link><description>Recent content in Linux on Svtter's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 02 Jun 2019 01:00:00 +0800</lastBuildDate><atom:link href="https://svtter.cn/categories/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>我的 Linux 开发环境</title><link>https://svtter.cn/p/%E6%88%91%E7%9A%84-linux-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</link><pubDate>Sun, 02 Jun 2019 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/%E6%88%91%E7%9A%84-linux-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</guid><description>&lt;p>GNU/Linux 操作系统数量繁多，对于新手直接使用进行开发十分不友好。但是，随着
许多工具的发展，Linux 入门已经没有那么困难，这里简单介绍笔者的几个开发环境，
供读者参考。&lt;/p>
&lt;h2 id="操作系统以及桌面环境">操作系统以及桌面环境
&lt;/h2>&lt;p>推荐使用 &lt;code>Linux Mint&lt;/code> 辅以 &lt;code>Cinnamon Edition&lt;/code> 桌面环境，
根据笔者五年的使用经验，这个桌面环境非常稳定，不容易出问题，
且基本的配置都可以提供。&lt;/p>
&lt;p>这里建议：&lt;/p>
&lt;ol>
&lt;li>既然是开发环境，就不要折腾。&lt;/li>
&lt;li>使用效率最高的开发环境&lt;/li>
&lt;/ol>
&lt;p>有些人会推荐使用 i3 等非常粗暴的开发环境，可以说，笔者的个人感觉是，i3 等
基于 openbox 就只是个图形界面，而不是一个桌面环境。&lt;/p>
&lt;p>除此之外，也可以考虑 gnome 桌面环境。KDE 是不建议使用的，笔者没能配置好，也比较
吃配置。基于 QT 的桌面环境也不够自由。&lt;/p>
&lt;h2 id="终端环境">终端环境
&lt;/h2>&lt;p>&lt;code>fish&lt;/code> 是一个新的 shell，不过&lt;code>zsh&lt;/code>更加好用一些。可以考虑安装&lt;code>oh-my-zsh&lt;/code>来加强
自己的&lt;code>shell&lt;/code>，不过这个事情已经被网上的文章讲烂了。我这里更建议使用&lt;code>antigen&lt;/code>
来配置自己的&lt;code>zsh&lt;/code>，并且通过&lt;code>github&lt;/code>或者&lt;code>gitee&lt;/code>进行网络同步，从而在多个环境下
可以使用同一套配置。&lt;/p>
&lt;h2 id="编辑器">编辑器
&lt;/h2>&lt;p>&lt;code>vscode&lt;/code>，&lt;code>pycharm&lt;/code>这些东西都是可以用的。&lt;/p>
&lt;h2 id="办公软件">办公软件
&lt;/h2>&lt;p>可以考虑使用 &lt;a class="link" href="https://shimo.im" target="_blank" rel="noopener"
>石墨&lt;/a>，或者&lt;a class="link" href="https//docs.qq.com" target="_blank" rel="noopener"
>腾讯文档&lt;/a>。&lt;/p>
&lt;p>可以做 ppt 啥的。自带的&lt;code>libreoffice&lt;/code>体验不是很好，不是很建议使用。不过按照发展
速度，这些东西迟早会赶上来的。&lt;/p>
&lt;h2 id="im">IM
&lt;/h2>&lt;p>electron 版本的微信虽然可以勉强用一下，但是笔者还是建议多使用邮箱
网易和腾讯均可。&lt;/p>
&lt;hr>
&lt;p>在使用 Linux 的过程中，可以不断的优化自己的使用环境。Linux 给予了用户最大的自由，
这也意味着用户需要对自己的行为负责。&lt;/p>
&lt;h3 id="20201230">2020/12/30
&lt;/h3>&lt;p>现在我已经不使用 Linux 桌面环境了，基本上都是采用 虚拟机 的方式来使用 Linux。因此 Vim、Zsh 这些工具才是主要的软件环境。
2020年，Linux 桌面环境对于使用 &lt;code>word&lt;/code>, &lt;code>excel&lt;/code>, &lt;code>ppt&lt;/code> 以及 微信，钉钉，QQ 的人仍然不是很友好。&lt;/p>
&lt;!-- 尽管 2020年中美贸易战使得 Linux 进入了人们的视野，但是对于一个非开发者而言，Linux 不够用。 --></description></item><item><title>安装 GNU/Linux</title><link>https://svtter.cn/p/%E5%AE%89%E8%A3%85-gnu/linux/</link><pubDate>Fri, 12 Oct 2018 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/%E5%AE%89%E8%A3%85-gnu/linux/</guid><description>&lt;p>之前一直搞不清楚 UEFI 和 Legacy 区别在哪里，今天搞了一下 Manjaro 终于搞明白了；比较好笑的是，我参考的是 Ubuntu 的文档。&lt;br>
&lt;a class="link" href="https://help.ubuntu.com/community/UEFI" target="_blank" rel="noopener"
>https://help.ubuntu.com/community/UEFI&lt;/a>&lt;/p>
&lt;p>安装 &lt;code>Manjaro&lt;/code> 的时候，一直都有个安装引导程序到某处，很纳闷，为啥我这里有这个东西，别人截图就没有。后来更换了&lt;code>rufus&lt;/code>的写入的模式，也就是 &lt;code>UEFI only&lt;/code>。然后重新以 &lt;code>UEFI&lt;/code> 模式载入，终于，引导不再有之前的“安装引导程序“了。&lt;/p>
&lt;p>感动不已，于是在这里记录一下。&lt;br>
&lt;a class="link" href="https://askubuntu.com/questions/63610/how-do-i-remove-ubuntu-in-the-bios-boot-menu-uefi" target="_blank" rel="noopener"
>https://askubuntu.com/questions/63610/how-do-i-remove-ubuntu-in-the-bios-boot-menu-uefi&lt;/a>&lt;/p></description></item><item><title>ssh 显示图像</title><link>https://svtter.cn/p/ssh-%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F/</link><pubDate>Thu, 20 Sep 2018 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/ssh-%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F/</guid><description>&lt;p>原来一直认为ssh仅仅是一个字符界面，最近发现其实可以传输xserver中的图像。&lt;/p>
&lt;p>方法很简单，只需要在ssh的选项中添加&lt;code>-Y&lt;/code>就可以了。比如原来的ssh命令是这样：&lt;/p>
&lt;pre class="wp-block-code">&lt;code lang="bash" class="language-bash">ssh ubuntu@localhost&lt;/code>&lt;/pre>
&lt;p>现在改成这样&lt;/p>
&lt;pre class="wp-block-code">&lt;code lang="bash" class="language-bash">ssh -Y ubuntu@localhost&lt;/code>&lt;/pre>
&lt;p>非常简单有效。&lt;/p>
&lt;p>另外，远程查看Ubuntu中的图像，可以使用&lt;code>eog&lt;/code>命令。安装：&lt;/p>
&lt;pre class="wp-block-code">&lt;code lang="bash" class="language-bash">sudo apt install eog&lt;/code>&lt;/pre>
&lt;p>安装完成后，直接运行&lt;code>eog ./test.png&lt;/code>即可。这对于服务器调试相当方便了！&lt;/p>
&lt;p>SSH 可选的加速策略&lt;/p>
&lt;pre class="wp-block-code">&lt;code class=""> -C Requests compression of all data (including stdin, stdout,
stderr, and data for forwarded X11 and TCP connections). The
compression algorithm is the same used by gzip(1), and the
“level” can be controlled by the CompressionLevel option for pro-
tocol version 1. Compression is desirable on modem lines and
other slow connections, but will only slow down things on fast
networks. The default value can be set on a host-by-host basis
in the configuration files; see the Compression option.&lt;/code>&lt;/pre></description></item><item><title>Ubuntu 脱坑指南</title><link>https://svtter.cn/p/ubuntu-%E8%84%B1%E5%9D%91%E6%8C%87%E5%8D%97/</link><pubDate>Tue, 29 May 2018 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/ubuntu-%E8%84%B1%E5%9D%91%E6%8C%87%E5%8D%97/</guid><description>&lt;p>希望本文能够给读者较少一些不必要的困扰。书写顺序较为随意，以&lt;/p>
&lt;p>“从安装到使用”这个为主线行文。&lt;/p>
&lt;h2 id="安装时">安装时
&lt;/h2>&lt;blockquote>
&lt;p>本文不在此具体介绍如何安装&lt;code>Ubuntu&lt;/code>。对于安装过程的建议，本文会写在&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>内容之中。安装之前，建议阅读本文。&lt;/p>&lt;/blockquote>
&lt;h3 id="使用非定制的iso">使用非定制的ISO
&lt;/h3>&lt;p>不要使用Lubuntu，Kubuntu甚至Gnome Ubuntu这些更改了默认桌面环境的Ubuntu。&lt;/p>
&lt;p>对于新手而言，Ubuntu本身就很脆弱，使用这些定制的ISO，不仅不利于提升用户&lt;/p>
&lt;p>体验，反而会在非重点的地方极大的消耗时间。对了，Kylin也是不推荐的，尽管&lt;/p>
&lt;p>官方甚至都把它挂在了首页。&lt;/p>
&lt;p>唯一建议使用的ISO是&lt;a class="link" href="https://www.ubuntu.com/download/desktop" target="_blank" rel="noopener"
>官方下载地址&lt;/a>。&lt;/p>
&lt;h3 id="使用英文系统">使用英文系统
&lt;/h3>&lt;p>中文系统可能会导致许多问题。比如，如果一个软件不支持中文路径，你可能需要&lt;/p>
&lt;p>排查很久才能想到这个问题。除此之外还有其他的一些问题，比如在命令行中进入&lt;/p>
&lt;p>一个目录，你可能需要切换输入法，然后再切换回来，十分不方便。还有一些暗含&lt;/p>
&lt;p>的问题，我已经记不清了，也没有精力去探索这些问题，因为我们的目的是“脱坑”。&lt;/p>
&lt;p>因此，使用英文作为系统语言可以解决很多问题。唯一引入的问题可能是英文的阅&lt;/p>
&lt;p>读障碍。我想这应该是一个需要克服的问题。&lt;/p>
&lt;blockquote>
&lt;p>如果使用英文調不出輸入法，可以嘗試添加中文支持，再去掉&lt;/p>&lt;/blockquote>
&lt;h3 id="不要挑战花式安装">不要挑战花式安装
&lt;/h3>&lt;p>我这里的花式安装是指，&lt;code>/home&lt;/code>做一个分区，&lt;code>/boot&lt;/code>做一个分区这种事；还有就&lt;/p>
&lt;p>是在固态上放一个区，在其他位置再放一个区等。这种事情不要做。是的，不要做。&lt;/p>
&lt;p>在我看来，这种事情毫无意义，对于新手而言，基本上不会有时间让系统稳定到&lt;/p>
&lt;p>硬盘不够用。&lt;/p>
&lt;p>把根目录&lt;code>/&lt;/code>挂到一个大分区下，100G，所有问题就都解决了。当空间不足需要重装，&lt;/p>
&lt;p>恭喜，你可能已经不是新手了，很多问题都可以不再按照此指南进行了。你可以&lt;/p>
&lt;p>尝试按照你自己的意图去配置系统了。&lt;/p>
&lt;h2 id="使用">使用
&lt;/h2>&lt;p>下面是使用部分。使用部分是，第一次进行安装之后，第一次进入桌面。&lt;/p>
&lt;h3 id="不要添加第三方ppa">不要添加第三方PPA
&lt;/h3>&lt;p>我把这条忠告写在最前面。如果你不知道什么叫做第三方ppa，那么很好，&lt;/p>
&lt;p>我的意思是，在你了解它是什么之前，不要通过&lt;code>apt&lt;/code>与&lt;code>software center&lt;/code>&lt;/p>
&lt;p>以外的方式安装软件。这可以很大程度的保护你的软件包管理工具。修复&lt;/p>
&lt;p>软件包管理工具需要消耗的时间可能很多，而且问题往往是链式的，总会&lt;/p>
&lt;p>给新手造成“我以为我解决了”这样的错觉。&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>sudo add-apt-repository ppa:kelleyk/emacs&lt;/code> 这就是我所说的PPA。&lt;/p>
&lt;p>Vim 和 Emacs 都是我的最爱。&lt;/p>&lt;/blockquote>
&lt;h3 id="不要在输入法上耗费太多时间">不要在输入法上耗费太多时间
&lt;/h3>&lt;p>输入法如果花费一上午都没有解决的话，建议放弃。因为Ubuntu官方的版本&lt;/p>
&lt;p>有时候给出的中文输入法都可能无法使用。&lt;/p>
&lt;p>如果真的需要输入中文，可以先考虑使用中文搜索引擎做pinyin的转换。不过&lt;/p>
&lt;p>你真的需要中文，并且在Ubuntu下做文字处理的工作吗？&lt;/p>
&lt;h3 id="多运行apt-get-update">多运行&lt;code>apt-get update&lt;/code>
&lt;/h3>&lt;p>是的。更换国内源这个事情我是建议的，个人对于&lt;code>tsinghua&lt;/code>的源非常喜欢，&lt;/p>
&lt;p>尽管它崩的概率也有点高，不过在&lt;code>ipv6&lt;/code>以及速度上都太令人满意了。&lt;/p>
&lt;p>源的不稳定可能造成的问题是，没有完全将软件依赖更新好。&lt;/p>
&lt;p>如果你不知道我在说什么，没关系，&lt;code>apt&lt;/code>命令出现问题时，多运行&lt;code>apt-get update&lt;/code>&lt;/p>
&lt;p>就可以了。&lt;/p>
&lt;h3 id="官方文档为主">官方文档为主
&lt;/h3>&lt;p>Ubuntu的很多问题，都是国内博主在写文章时比较随意造成的（我也挖这种坑）。&lt;/p>
&lt;p>在进行软件安装的时候，新手往往在国内搜索某个教程就复制粘贴了。这是非常&lt;/p>
&lt;p>容易出问题的，且不论安全性，甚至教程本身都无法使得软件正常运行。这里面&lt;/p>
&lt;p>包含很多种可能：文章不再更新，系统已经不适配；教程缺斤少两等等。&lt;/p>
&lt;p>安装软件先以官方文档为主，也就是软件的官方网站，一般都会有文档。文档可能&lt;/p>
&lt;p>不好读，但是起码能够减少问题。其次是Ubuntu官方的安装指南；再其次是google&lt;/p>
&lt;p>第一位的安装指南（前提是新手能明白每一步都在做什么）；没有最后。&lt;/p>
&lt;blockquote>
&lt;p>能用&lt;code>apt-get install&lt;/code>解决的问题，不要通过&lt;code>make&lt;/code>解决。&lt;/p>&lt;/blockquote>
&lt;h3 id="尽量不使用sudo">尽量不使用&lt;code>sudo&lt;/code>
&lt;/h3>&lt;p>除非是按照官方文档进行操作（不排除无良软件开发者挖坑导致运行时出问题），&lt;/p>
&lt;p>否则使用&lt;code>sudo&lt;/code>，这个超级用户权限，可能带来很多问题。比如运行库版本不匹配，&lt;/p>
&lt;p>图形界面挂掉等等。&lt;/p>
&lt;h2 id="常见问题解决方案">常见问题解决方案
&lt;/h2>&lt;p>这里列出一些常见问题，以及解决的方法。&lt;/p>
&lt;h3 id="所有问题">所有问题
&lt;/h3>&lt;p>重启。&lt;/p>
&lt;h3 id="图形界面崩">图形界面崩
&lt;/h3>&lt;p>&lt;code>sudo apt-get install --reinstall ubuntu-desktop&lt;/code>&lt;/p>
&lt;h2 id="补充">补充
&lt;/h2>&lt;p>其他常见问题可以通过&lt;code>blog#svtter.cn&lt;/code>与我沟通，我将做出补充。&lt;/p></description></item><item><title>获取本机ipv6地址</title><link>https://svtter.cn/p/%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAipv6%E5%9C%B0%E5%9D%80/</link><pubDate>Wed, 28 Feb 2018 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAipv6%E5%9C%B0%E5%9D%80/</guid><description>&lt;p>获取本机ipv6地址，最简单的方法：&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>cat /proc/net/if_inet6
&lt;/pre>
&lt;/div>
&lt;p>还可以使用python的&lt;code>netinterface&lt;/code>包。&lt;/p>
&lt;p>&lt;code>ifconfig&lt;/code>也是从这个文件进行获取的，只是优化了一下格式。&lt;/p>
&lt;h2 id="reference">reference
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.lilydjwg.me/2012/6/6/get-ipv4-and-ipv6-addresses-of-local-host-in-a-programming-way.34055.html" target="_blank" rel="noopener"
>https://blog.lilydjwg.me/2012/6/6/get-ipv4-and-ipv6-addresses-of-local-host-in-a-programming-way.34055.html&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>使用 grub customizer 调教grub</title><link>https://svtter.cn/p/%E4%BD%BF%E7%94%A8-grub-customizer-%E8%B0%83%E6%95%99grub/</link><pubDate>Wed, 28 Feb 2018 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/%E4%BD%BF%E7%94%A8-grub-customizer-%E8%B0%83%E6%95%99grub/</guid><description>&lt;p>调整grub总是需要搜索某个文件，某个配置，相当麻烦，近期找了一个比较不错的图形化配置管理器，&lt;code>grub customizer&lt;/code>，可以调整启动的内核，以及启动的画面，非常好用，安利一发。&lt;/p>
&lt;h2 id="安装">安装
&lt;/h2>&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>sudo add-apt-repository ppa:danielrichter2007/grub-customizer
sudo apt-get update
sudo apt-get install grub-customizer
&lt;/pre>
&lt;/div>
&lt;h2 id="使用截图">使用截图
&lt;/h2>&lt;p>【日后补上】&lt;/p>
&lt;h2 id="reference">reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="http://ubuntuhandbook.org/index.php/2016/04/install-grub-customizer-ubuntu-16-04-lts/" target="_blank" rel="noopener"
>http://ubuntuhandbook.org/index.php/2016/04/install-grub-customizer-ubuntu-16-04-lts/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://blog.csdn.net/lu_embedded/article/details/44353499" target="_blank" rel="noopener"
>grub讲解&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>定制ARM-Linux镜像</title><link>https://svtter.cn/p/%E5%AE%9A%E5%88%B6arm-linux%E9%95%9C%E5%83%8F/</link><pubDate>Sat, 25 Feb 2017 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/%E5%AE%9A%E5%88%B6arm-linux%E9%95%9C%E5%83%8F/</guid><description>&lt;p>简单看了看ARM-Linux镜像的相关内容，发现一个比较坑的地方，就是，不同架构的Linux是&lt;/p>
&lt;p>不能直接&lt;code>chroot&lt;/code>的，除非经过处理，比如&lt;code>qemu&lt;/code>。使用这种模拟器可以进行解释执行。&lt;/p>
&lt;p>&amp;lt;未完待续&amp;gt;&lt;/p></description></item><item><title>Linux-makefile写法</title><link>https://svtter.cn/p/linux-makefile%E5%86%99%E6%B3%95/</link><pubDate>Wed, 24 Dec 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-makefile%E5%86%99%E6%B3%95/</guid><description>&lt;blockquote>
&lt;p>本文出自&lt;a class="link" href="http://svtter.github.io" target="_blank" rel="noopener"
>svtter.github.io&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>本文可以随意转载，但是转载请保留本信息.&lt;/p>&lt;/blockquote>
&lt;p>makefile写法有复杂的有简单的，我这里提到的主要为了做一些简单的开发，所以还是说些简单的事情。&lt;/p>
&lt;p>&lt;strong>使用makefile之前，要学会使用bash的一些东西。鸟哥的私房菜虽然说是介绍Linux，但是总感觉很多都是介绍bash，以及和&lt;/strong>&lt;/p>
&lt;p>&lt;strong>bash配合使用的一些命令。。。&lt;/strong>&lt;/p>
&lt;h2 id="变量的写法">变量的写法
&lt;/h2>&lt;ul>
&lt;li>定义的时候直接使用&lt;code>VAR = main.o&lt;/code>即可这种格式即可&lt;/li>
&lt;li>使用的时候使用&lt;code>${VAR}&lt;/code>这种形式来使用，类似于php中的变量。&lt;/li>
&lt;/ul>
&lt;p>另外， 位于&lt;code>makefile&lt;/code>外面的变量也是可以使用的，使用的时候使用如下格式&lt;code>VAR = main.o make&lt;/code>即可，这样就相当于在makefile&lt;/p>
&lt;p>定义了一个VAR变量。在外定义的变量是优先于makefile里面的变量的，就像是一个预订义的函数一般。&lt;/p>
&lt;p>此外，&lt;code>$@&lt;/code>表示当前的目标。如果在clean那里面，&lt;code>$@&lt;/code>指的是&lt;code>clean&lt;/code>&lt;/p>
&lt;h2 id="make--命令写法">&lt;code>make + 命令&lt;/code>写法
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>比如make clean的写法，就是在makefile文件中添加&lt;/p>
&lt;blockquote>
&lt;p>clean:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>rm .. (类似bash的使用方法，这个地方也可以使用变量）&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;p>相对的，install等等的方法就类似于这个上面的写法了。&lt;/p>
&lt;p>写到这里也是明白了为什么vim里面有个make命令，却没有各种编译命令了= =&lt;/p>
&lt;p>然后附加一个自己写的第一个&lt;code>makefile&lt;/code>:（为了读者更加容易理解，我没有使用变量）&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">t2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">o&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">o&lt;/span>
&lt;span class="n">cc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">o&lt;/span> &lt;span class="n">t2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">o&lt;/span>
&lt;span class="o">./&lt;/span>&lt;span class="n">run&lt;/span>
&lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">o&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">c&lt;/span>
&lt;span class="n">cc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">c&lt;/span>
&lt;span class="n">t2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">o&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">t2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">c&lt;/span>
&lt;span class="n">cc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">t2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">c&lt;/span>
&lt;span class="n">clean&lt;/span>&lt;span class="o">:&lt;/span>
&lt;span class="n">rm&lt;/span> &lt;span class="o">*.&lt;/span>&lt;span class="n">o&lt;/span>
&lt;span class="n">rm&lt;/span> &lt;span class="n">run&lt;/span>
&lt;/pre>
&lt;/div>
&lt;p>test.c:&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cm">/* #include "t2.h" */&lt;/span>
&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="n">test&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">test&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">argc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">argv&lt;/span>&lt;span class="p">[])&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">output&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"%d %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;p>t2.c:&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">output&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"This function is in t2.c&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;p>文件目录是：&lt;/p>
&lt;p>– file&lt;/p>
&lt;p>– makefile&lt;/p>
&lt;p>– test.c&lt;/p>
&lt;p>– t2.c&lt;/p>
&lt;ul>
&lt;li>使用make可以创建链接文件并且运行。&lt;/li>
&lt;li>使用&lt;code>make clean&lt;/code>可以删除生成的文件。&lt;/li>
&lt;/ul></description></item><item><title>Linux-软中断通信</title><link>https://svtter.cn/p/linux-%E8%BD%AF%E4%B8%AD%E6%96%AD%E9%80%9A%E4%BF%A1/</link><pubDate>Tue, 23 Dec 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E8%BD%AF%E4%B8%AD%E6%96%AD%E9%80%9A%E4%BF%A1/</guid><description>&lt;blockquote>
&lt;p>本文出自&lt;a class="link" href="http://svtter.github.io" target="_blank" rel="noopener"
>svtter.github.io&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>本文可以随意转载，但是转载请保留本信息.&lt;/p>&lt;/blockquote>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;unistd.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;signal.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;unistd.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;wait.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">waiting&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">stop&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">alarming&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">wait_mark&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">wait_mark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SIGINT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stop&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SIGALRM&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">alarming&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">waiting&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">kill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">kill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"parent process is killed!&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">wait_mark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stop&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SIGINT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">SIG_IGN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wait_mark&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"child process2 is killed by parent!&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">wait_mark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stop&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">signal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SIGINT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">SIG_IGN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wait_mark&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"child process1 is killed by parent!&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">waiting&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wait_mark&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">kill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">getpid&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">SIGALRM&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">alarming&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">wait_mark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">stop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">wait_mark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h2 id="执行结果">执行结果
&lt;/h2>&lt;p>&lt;a class="link" href="" >e3.png&lt;/a>&lt;/p></description></item><item><title>archlinux-安装笔记2-常用软件转载</title><link>https://svtter.cn/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B02-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E8%BD%AC%E8%BD%BD/</link><pubDate>Tue, 09 Dec 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B02-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E8%BD%AC%E8%BD%BD/</guid><description>&lt;blockquote>
&lt;p>本文出自&lt;a class="link" href="http://svtter.github.io" target="_blank" rel="noopener"
>svtter.github.io&lt;/a>&lt;/p>&lt;/blockquote>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="nt">1&lt;/span> &lt;span class="nt">Installing&lt;/span> &lt;span class="nt">Arch&lt;/span> &lt;span class="nt">Linux&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">1&lt;/span> &lt;span class="nt">Pre-Installation&lt;/span>
&lt;span class="nt">是i686&lt;/span> &lt;span class="nt">架构吗&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">Pentium&lt;/span> &lt;span class="nt">II&lt;/span> &lt;span class="nt">or&lt;/span> &lt;span class="nt">AMD&lt;/span> &lt;span class="nt">K6-2以上&lt;/span>&lt;span class="err">）？&lt;/span>&lt;span class="nt">安装方式CD&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="nt">FTP&lt;/span>&lt;span class="err">？&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">2&lt;/span> &lt;span class="nt">Acquiring&lt;/span> &lt;span class="nt">Arch&lt;/span> &lt;span class="nt">Linux&lt;/span>
&lt;span class="nt">从这里寻找速度最快的镜像&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">wiki&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">php&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">Mirror&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">3&lt;/span> &lt;span class="nt">Preparing&lt;/span> &lt;span class="nt">Installation&lt;/span> &lt;span class="nt">Media&lt;/span>
&lt;span class="nt">MD5&lt;/span> &lt;span class="nt">校验&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">烧录&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">4&lt;/span> &lt;span class="nt">Using&lt;/span> &lt;span class="nt">the&lt;/span> &lt;span class="nt">CD-ROM&lt;/span>
&lt;span class="nt">设置好光驱启动&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span> &lt;span class="nt">Common&lt;/span> &lt;span class="nt">Installation&lt;/span> &lt;span class="nt">Procedure&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">1&lt;/span> &lt;span class="nt">Loading&lt;/span> &lt;span class="nt">a&lt;/span> &lt;span class="nt">non-US&lt;/span> &lt;span class="nt">Keymap&lt;/span>
&lt;span class="nt">用km&lt;/span> &lt;span class="nt">工具选择非英语键盘&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">2&lt;/span> &lt;span class="nt">Running&lt;/span> &lt;span class="nt">Setup&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">archlinux&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">setup&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">3&lt;/span> &lt;span class="nt">Configure&lt;/span> &lt;span class="nt">Network&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">FTP&lt;/span> &lt;span class="nt">Install&lt;/span> &lt;span class="nt">only&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nt">仅适用于FTP&lt;/span> &lt;span class="nt">安装方式&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">CD&lt;/span> &lt;span class="nt">安装没有必要配置好网络&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">4&lt;/span> &lt;span class="nt">Prepare&lt;/span> &lt;span class="nt">Hard&lt;/span> &lt;span class="nt">Drive&lt;/span>
&lt;span class="nt">给磁盘分好区&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">root分区&lt;/span>&lt;span class="o">(/)&lt;/span>&lt;span class="nt">放在主分区比较好&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">放到逻辑分区也可以&lt;/span>&lt;span class="err">），&lt;/span>
&lt;span class="nt">如果有&lt;/span> &lt;span class="nt">Windows&lt;/span> &lt;span class="nt">系统&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">那它也要占据一个主分区&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="nt">个人的250G硬盘是这样分区的&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cfdisk&lt;/span>
&lt;span class="nt">sda1&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">boot&lt;/span> &lt;span class="nt">150M&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda2&lt;/span> &lt;span class="nt">Windows&lt;/span> &lt;span class="nt">18G&lt;/span> &lt;span class="nt">ntfs&lt;/span>
&lt;span class="nt">sda3&lt;/span> &lt;span class="nt">FreeBSD&lt;/span> &lt;span class="nt">32G&lt;/span> &lt;span class="nt">ufs&lt;/span>
&lt;span class="nt">sda5&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nt">600M&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda6&lt;/span> &lt;span class="nt">SWAP&lt;/span> &lt;span class="nt">2xRam&lt;/span> &lt;span class="nt">xfs&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">SWAP分区的大小推荐为内存大小的2倍&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nt">sda7&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">var&lt;/span> &lt;span class="nt">20G&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda8&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">tmp&lt;/span> &lt;span class="nt">5G&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda9&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">opt&lt;/span> &lt;span class="nt">10G&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda10&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">usr&lt;/span> &lt;span class="nt">20G&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda11&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span> &lt;span class="nt">105G&lt;/span> &lt;span class="nt">xfs&lt;/span>
&lt;span class="nt">sda12&lt;/span> &lt;span class="nt">Files&lt;/span> &lt;span class="nt">不大于32G&lt;/span> &lt;span class="nt">fat32&lt;/span>
&lt;span class="nt">如果需要加密磁盘&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">并启用开机验证&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">推荐使用luks&lt;/span> &lt;span class="err">：&lt;/span>
&lt;span class="nt">通常加密&lt;/span> &lt;span class="nt">root&lt;/span> &lt;span class="nt">分区和&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span> &lt;span class="nt">分区&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">modprobe&lt;/span> &lt;span class="nt">dm-crypt&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">modprobe&lt;/span> &lt;span class="nt">aes-i586&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cryptsetup&lt;/span> &lt;span class="err">–&lt;/span>&lt;span class="nt">y&lt;/span> &lt;span class="nt">luksFormat&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda3&lt;/span>
&lt;span class="nt">输入密码&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">确认&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cryptsetup&lt;/span> &lt;span class="err">–&lt;/span>&lt;span class="nt">y&lt;/span> &lt;span class="nt">luksFormat&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda10&lt;/span>
&lt;span class="nt">输入密码&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">确认&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cryptsetup&lt;/span> &lt;span class="nt">luksOpen&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda3&lt;/span> &lt;span class="nt">root&lt;/span>
&lt;span class="nt">解开root&lt;/span> &lt;span class="nt">分区&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">并建立一个映射&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">mapping&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">root&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cryptsetup&lt;/span> &lt;span class="nt">luksOpen&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda10&lt;/span> &lt;span class="nt">home&lt;/span>
&lt;span class="nt">解开&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span> &lt;span class="nt">分区&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">并建立一个映射&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">mapping&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span>
&lt;span class="nt">参看&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">wiki&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">php&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">LUKS_Encrypted_Root&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span> &lt;span class="nt">Partition&lt;/span> &lt;span class="nt">Hard&lt;/span> &lt;span class="nt">Drives&lt;/span>
&lt;span class="nt">可以跳过了&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">6&lt;/span> &lt;span class="nt">Set&lt;/span> &lt;span class="nt">Filesystem&lt;/span> &lt;span class="nt">Mountpoints&lt;/span>
&lt;span class="nt">如果用luks&lt;/span> &lt;span class="nt">加密了分区&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">那么&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nt">分区需要挂载到&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">mapping&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">root&lt;/span>&lt;span class="err">；&lt;/span>
&lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span> &lt;span class="nt">需要挂载到&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">mapping&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span>&lt;span class="o">.&lt;/span>
&lt;span class="nt">同时选择一个合适的文件系统&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">JFS&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">XFS&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">Reiserfs&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="err">）。&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">7&lt;/span> &lt;span class="nt">Select&lt;/span> &lt;span class="nt">Packages&lt;/span>
&lt;span class="nt">至少选择&lt;/span> &lt;span class="nt">Base&lt;/span> &lt;span class="nt">安装&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="nt">如果需要一个可编译环境&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">要选上devel和lib&lt;/span>&lt;span class="err">；&lt;/span>&lt;span class="nt">如果需要ADSL拨号&lt;/span>
&lt;span class="nt">或WiFi支持&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">要选上support&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">确定后会看到所有将要安装的包&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">可以在这里去掉一些暂时不想安装的包&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="nt">要是不清楚就&lt;/span>
&lt;span class="nt">不管了&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">几个M的大小而已&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">8&lt;/span> &lt;span class="nt">Install&lt;/span> &lt;span class="nt">Packages&lt;/span>
&lt;span class="nt">只要烧录的光碟不是太差&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">基本上都能正常安装的&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">9&lt;/span> &lt;span class="nt">Configure&lt;/span> &lt;span class="nt">System&lt;/span>
&lt;span class="nt">配置系统是必须和关键的&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">应当允许hwdetect&lt;/span> &lt;span class="nt">script自动检测硬件&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">并生成相应配置&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">根据启动时的实际情况选择是否需要对RAID&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">LVM2&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">和encrypted&lt;/span> &lt;span class="nt">volumes的支持&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">以及&lt;/span>
&lt;span class="nt">其它必要的支持&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">选择熟悉的编辑器后&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">对&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span> &lt;span class="nt">下的生成的配置文件作适当的修正&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="nt">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">conf&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">设置时区为Asia&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">Hong_Kong&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">检查eth0的配置是合适&lt;/span>
&lt;span class="nt">mkinitcpio&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">conf&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">在最后一行的HOOKS&lt;/span> &lt;span class="nt">中去除不必要的支持&lt;/span>
&lt;span class="nt">hosts&lt;/span> &lt;span class="err">：&lt;/span>&lt;span class="nt">设置主机名和域名&lt;/span>
&lt;span class="nt">locale&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">gen&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">设置本机要支持的locale&lt;/span> &lt;span class="err">（&lt;/span>&lt;span class="nt">zh_CN&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">utf8&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">zh_CN&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">gbk&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">or&lt;/span> &lt;span class="nt">zh_TW&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">utf8&lt;/span>&lt;span class="err">）&lt;/span>
&lt;span class="nt">root&lt;/span> &lt;span class="nt">PassWord&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">为root&lt;/span> &lt;span class="nt">设置管理密码&lt;/span>
&lt;span class="nt">pacman&lt;/span> &lt;span class="nt">Mirrors&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">设置安装源&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="nt">找一个高速镜像站点&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">比如&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">mirrors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">lcuc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">cn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">archlinux&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="err">；&lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="err">；&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">belnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">be&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">packages&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">archlinux&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="err">；&lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">gigabit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">nu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">；&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">puzzle&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">ch&lt;/span> &lt;span class="err">；&lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">mirror&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">cs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">vt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">edu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">pub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">ArchLinux&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="err">；&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">heanet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">ie&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">mirrors&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">；&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">distro&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">ibiblio&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">pub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">linux&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">distributions&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">archlinux&lt;/span>&lt;span class="o">/&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">10&lt;/span> &lt;span class="nt">Install&lt;/span> &lt;span class="nt">Kernel&lt;/span>
&lt;span class="nt">略&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">11&lt;/span> &lt;span class="nt">Install&lt;/span> &lt;span class="nt">Bootloader&lt;/span>
&lt;span class="nt">推荐GRUB&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="nt">配置好menu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">lst&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">如果root&lt;/span> &lt;span class="nt">分区用luks&lt;/span> &lt;span class="nt">加密过了&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">那么要把menu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">lst&lt;/span> &lt;span class="nt">修正为&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">Arch&lt;/span> &lt;span class="nt">Linux&lt;/span>
&lt;span class="nt">title&lt;/span> &lt;span class="nt">Arch&lt;/span> &lt;span class="nt">Linux&lt;/span>
&lt;span class="nt">root&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">hd0&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nt">kernel&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">vmlinuz26&lt;/span> &lt;span class="nt">root&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda3&lt;/span> &lt;span class="nt">ro&lt;/span>
&lt;span class="nt">initrd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">kernel26&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">img&lt;/span>
&lt;span class="nt">注意&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">Bootloader&lt;/span> &lt;span class="nt">需要安装到MBR&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">即&lt;/span> &lt;span class="nt">sda&lt;/span> &lt;span class="nt">下&lt;/span>&lt;span class="err">），&lt;/span>&lt;span class="nt">而不是&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">boot&lt;/span> &lt;span class="nt">所在的分区&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">sda1&lt;/span>&lt;span class="err">）。&lt;/span>
&lt;span class="nt">o&lt;/span> &lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">12&lt;/span> &lt;span class="nt">Exit&lt;/span> &lt;span class="nt">Install&lt;/span>
&lt;span class="nt">退出安装程式后&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">取出安装光盘&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">head&lt;/span> &lt;span class="nt">-n&lt;/span> &lt;span class="nt">300&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">urandom&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nt">tail&lt;/span> &lt;span class="nt">-n&lt;/span> &lt;span class="nt">256&lt;/span> &lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="nt">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">key&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cryptsetup&lt;/span> &lt;span class="nt">luksAddKey&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda10&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">key&lt;/span>
&lt;span class="nt">输入密码&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">确认&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">echo&lt;/span> &lt;span class="nt">home&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda10&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">key&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;/&lt;/span>&lt;span class="nt">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">crypttab&lt;/span>
&lt;span class="nt">开机时&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">用home&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">key&lt;/span> &lt;span class="nt">解开&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda10&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">sed&lt;/span> &lt;span class="nt">-i&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">swap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">d&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">fstab&lt;/span> &lt;span class="err">（&lt;/span>&lt;span class="nt">删除fstab&lt;/span> &lt;span class="nt">文件中含有swap&lt;/span> &lt;span class="nt">的一栏&lt;/span>&lt;span class="err">）&lt;/span>
&lt;span class="p">#&lt;/span>&lt;span class="nn">echo&lt;/span> &lt;span class="nt">swap&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda2&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">urandom&lt;/span> &lt;span class="s2">"-c aes-cbc-essiv:sha256 -h sha256 -s 256"&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;/&lt;/span>&lt;span class="nt">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">crypttab&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">echo&lt;/span> &lt;span class="s2">"mkswap /dev/mapper/swap"&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;/&lt;/span>&lt;span class="nt">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">local&lt;/span>
&lt;span class="nt">以上两个命令是设置swap&lt;/span> &lt;span class="nt">加密分区&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">另外直接在&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">crypttab&lt;/span> &lt;span class="nt">中加入如下内容也起相同作用&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="nt">swap&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sda2&lt;/span> &lt;span class="nt">SWAP&lt;/span> &lt;span class="nt">-c&lt;/span> &lt;span class="nt">aes-cbc-essiv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nd">sha256&lt;/span> &lt;span class="nt">-h&lt;/span> &lt;span class="nt">sha256&lt;/span> &lt;span class="nt">-s&lt;/span> &lt;span class="nt">256&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">reboot&lt;/span>
&lt;span class="nt">2&lt;/span> &lt;span class="nt">基础配置&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">1&lt;/span> &lt;span class="nt">Internet&lt;/span> &lt;span class="nt">Access&lt;/span>
&lt;span class="nt">如果是局域网&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">视讯宽等无需拨号的网络环境&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">只需要在&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">conf中设置好&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="nt">eth0&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">"dhcp"&lt;/span>
&lt;span class="nt">重启电脑后&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">即可正常上网了&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">如果是用PPPOE协议拨号上网&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">如ADSL&lt;/span>&lt;span class="err">），&lt;/span>&lt;span class="nt">需安装rp-pppoe安装包&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">然后&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pppoe-setup&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">adsl&lt;/span> &lt;span class="nt">start&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">adsl&lt;/span> &lt;span class="nt">stop&lt;/span>
&lt;span class="nt">或者&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">使用更好的ppp&lt;/span> &lt;span class="nt">安装包&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">参照WiKi&lt;/span> &lt;span class="err">）&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">2&lt;/span> &lt;span class="nt">更新安装包列表&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="err">–&lt;/span>&lt;span class="nt">Syu&lt;/span>
&lt;span class="nt">更新安装包列表&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">并升级已安装的包和内核&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">比自己make&lt;/span> &lt;span class="nt">world要快多了&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">reboot&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman-optimize&lt;/span>
&lt;span class="nt">这是优化pacman系统&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">如果安装时仅选择了base安装&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">那么优化可能不会成功&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">因为缺少&lt;/span>
&lt;span class="nt">diffutils安装包&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nt">它在devel里面&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">安装它就可以了&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">diffutils&lt;/span>
&lt;span class="nt">安装AUR&lt;/span> &lt;span class="nt">工具&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">建议安装&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">好软件多多&lt;/span>&lt;span class="err">）：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">vi&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">pacman&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">conf&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nt">加入&lt;/span>&lt;span class="o">:&lt;/span>
&lt;span class="cp">[&lt;/span>&lt;span class="nx">archlinuxfr&lt;/span>&lt;span class="cp">]&lt;/span>
&lt;span class="nt">Server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">fr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">i686&lt;/span>&lt;span class="o">/&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-Sy&lt;/span> &lt;span class="nt">yaourt&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">安装一个Pacman前端&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">如果碰到服务器调整&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">那就装不了啦&lt;/span>&lt;span class="err">）&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">yaourt&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">tupac&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">速度更快的Pacman前端&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">依赖于yaourt&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">tupac&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">aurvote&lt;/span>
&lt;span class="nt">可以通过aurvote对喜欢的AUR软件投票&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">如果票数够多了&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">该软件就会被加入Community&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">用&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nt">aurvote&lt;/span> &lt;span class="nt">-h&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="nt">来查看使用帮助&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">如果要对yaourt和tupac这两个软件投票&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">可以这样做&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="o">(&lt;/span>&lt;span class="nt">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">到&lt;/span> &lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">aur&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">account&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">php&lt;/span> &lt;span class="nt">注册一个帐号&lt;/span>
&lt;span class="o">(&lt;/span>&lt;span class="nt">2&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">vi&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">aruvote&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">加入&lt;/span>
&lt;span class="nt">user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nt">YourName&lt;/span>
&lt;span class="nt">pass&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nt">YourPassWord&lt;/span>
&lt;span class="o">(&lt;/span>&lt;span class="nt">3&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">aurvote&lt;/span> &lt;span class="nt">-v&lt;/span> &lt;span class="nt">yaourt&lt;/span> &lt;span class="nt">tupac&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">3&lt;/span> &lt;span class="nt">安装多线程多协议的下载工具aria2&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">aria2&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">echo&lt;/span> &lt;span class="s2">"XferCommand = /usr/bin/aria2c –s 3 %u"&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">pacman&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">conf&lt;/span>
&lt;span class="nt">用aria2替换默认的wget来安装软件&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">如果带宽足够大&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">就不需要用aria2了&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">4&lt;/span> &lt;span class="nt">根据个人习惯安装其它Shell&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">如zsh&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">ksh&lt;/span>&lt;span class="err">），&lt;/span>&lt;span class="nt">当然使用默认的Bash也很好&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">sudo&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">zsh&lt;/span>
&lt;span class="nt">关于ZSH的介绍&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">可以参照Wiki&lt;/span>&lt;span class="o">:&lt;/span>
&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">wiki&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">archlinux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">php&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">Zsh&lt;/span>
&lt;span class="nt">可从中获取配置好的&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nc">zshrc&lt;/span> &lt;span class="nt">文件&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">放入&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="nt">HOME中&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">chsh&lt;/span> &lt;span class="nt">-s&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">zsh&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">source&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">zshrc&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">5&lt;/span> &lt;span class="nt">安装sudo&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">用普通用户进入系统&lt;/span>
&lt;span class="nt">创建一个账户&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">useradd&lt;/span> &lt;span class="err">–&lt;/span>&lt;span class="nt">mG&lt;/span> &lt;span class="nt">users&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">audio&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">optical&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">storage&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">wheel&lt;/span> &lt;span class="nt">-s&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">zsh&lt;/span> &lt;span class="nt">yourname&lt;/span>
&lt;span class="nt">创建一个限制用户&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">有声音支持&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">有HAL&lt;/span> &lt;span class="nt">支持&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">能切换到root&lt;/span> &lt;span class="nt">权限&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">passwd&lt;/span> &lt;span class="nt">yourname&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">如果还没有为root创建密码&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">要先&lt;/span> &lt;span class="p">#&lt;/span>&lt;span class="nn">passwd&lt;/span> &lt;span class="nt">root&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">YOUNAME&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">&amp;&amp;&lt;/span> &lt;span class="nt">cp&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">zshrc&lt;/span> &lt;span class="o">./&lt;/span> &lt;span class="o">&amp;&amp;&lt;/span> &lt;span class="nt">chown&lt;/span> &lt;span class="nt">YOUENAME&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">zshrc&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">sudo&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">vi&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sudoers&lt;/span>
&lt;span class="nt">加入&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">yourname&lt;/span> &lt;span class="nt">ALL&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="nt">ALL&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">NOPASSWD&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nt">SETENV&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nt">ALL&lt;/span>
&lt;span class="nt">或直接对用户组作出相应设置&lt;/span>&lt;span class="err">。&lt;/span>
&lt;span class="nt">如果主机上会有多个终端同时在用&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">还要加入&lt;/span>&lt;span class="s2">"visudo"&lt;/span>&lt;span class="nt">到&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">sudoers&lt;/span>
&lt;span class="nt">sudo&lt;/span> &lt;span class="nt">命令补全&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">注意&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">仅适用于Bash&lt;/span>&lt;span class="err">）：&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">bash-completion&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">echo&lt;/span> &lt;span class="nt">source&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">bash_completion&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">profile&lt;/span>
&lt;span class="err">#&lt;/span> &lt;span class="nt">source&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">profile&lt;/span> &lt;span class="err">（&lt;/span>&lt;span class="nt">或exit&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nt">用普通用户重登录&lt;/span>&lt;span class="err">）&lt;/span>
&lt;span class="o">*&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">6&lt;/span> &lt;span class="nt">开启控制台鼠标&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">gpm&lt;/span> &lt;span class="nt">支持&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="err">，&lt;/span>&lt;span class="nt">方便控制台下浏览网页&lt;/span>
&lt;span class="nt">在控制台下浏览网页的工具有&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">elinks&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nt">英文网页&lt;/span>&lt;span class="o">),&lt;/span> &lt;span class="nt">w3m&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nt">在CCE下可浏览中文网页&lt;/span>&lt;span class="err">）：&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">sudo&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">elinks&lt;/span> &lt;span class="nt">w3m&lt;/span> &lt;span class="nt">cce&lt;/span>
&lt;span class="nt">用elinks等工具&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">在控制台下浏览网页&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">如果没有鼠标支持&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nt">实在是很郁闷的事情&lt;/span>&lt;span class="err">：&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">sudo&lt;/span> &lt;span class="nt">pacman&lt;/span> &lt;span class="nt">-S&lt;/span> &lt;span class="nt">gpm&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">sudo&lt;/span> &lt;span class="nt">vi&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">conf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">gpm&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nt">加入&lt;/span>&lt;span class="o">:&lt;/span>
&lt;span class="nt">GPM_ARGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">"-m /dev/misc/psaux -t ps2"&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">PS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">2&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">or&lt;/span>
&lt;span class="nt">GPM_ARGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">"-m /dev/input/mice -t imps2"&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">USB&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">sudo&lt;/span> &lt;span class="nt">gpm&lt;/span> &lt;span class="nt">-m&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">input&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">psaux&lt;/span> &lt;span class="nt">-t&lt;/span> &lt;span class="nt">ps2&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">PS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">2&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="nt">or&lt;/span>
&lt;span class="o">$&lt;/span> &lt;span class="nt">sudo&lt;/span> &lt;span class="nt">gpm&lt;/span> &lt;span class="nt">-m&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nt">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">input&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">mice&lt;/span> &lt;span class="nt">-t&lt;/span> &lt;span class="nt">imps2&lt;/span>&lt;span class="s2">" (USB)&lt;/span>
&lt;span class="s2">如果已经正常工作，把gpm 加到rc.conf中的DAEMONS 数组中，让它开机自动运行。&lt;/span>
&lt;span class="s2">* 2.7 Post Installation Tips&lt;/span>
&lt;span class="s2">(1) Colorize your PS1 and Console&lt;/span>
&lt;span class="s2">编辑SHELL的配置文件（如 ~/.bashrc），加入：&lt;/span>
&lt;span class="s2">export LS_COLORS=&amp;#39;no=00:fi=00:di=01;37;44:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.xcf=01;35:*.pcx=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.avi=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.mov=01;35:*.qt=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.mp3=01;32:*.wav=01;32:*.mid=01;32:*.midi=01;32:*.au=01;32:*.ogg=01;32:*.flac=01;32:*.aac=01;32:&amp;#39;;&lt;/span>
&lt;span class="s2">关于提示符的修改，参看一下：http://bbs.linuxsir.org/showthread.php?t=223.44&lt;/span>
&lt;span class="s2">(2) 实现彩色版的 Manpages&lt;/span>
&lt;span class="s2">$ sudo pacman -S most &lt;/span>
&lt;span class="s2">$ vi /etc/man.conf file， change the PAGER and BROWSER variable to: &lt;/span>
&lt;span class="s2">PAGER /usr/bin/most -s &lt;/span>
&lt;span class="s2">BROWSER /usr/bin/most –s &lt;/span>
&lt;span class="s2">$ vi ~/.mostrc，add: &lt;/span>
&lt;span class="s2">color normal brightwhite black&lt;/span>
&lt;span class="s2">color status yellow blue&lt;/span>
&lt;span class="s2">color underline white lightblue &lt;/span>
&lt;span class="s2">color overstrike brightcyan black&lt;/span>
&lt;span class="s2">不过用most是有一些不便之处的，这时可以试试下面的方法，真的挺不错：&lt;/span>
&lt;span class="s2">1. 在你的主目录创建 .terminfo 目录，并转到该目录：&lt;/span>
&lt;span class="s2">mkdir ~/.terminfo/ &amp;&amp; cd ~/.terminfo&lt;/span>
&lt;span class="s2">2. 从作者网站获取 terminfo 描述文件：&lt;/span>
&lt;span class="s2">wget http://nion.modprobe.de/mostlike.txt&lt;/span>
&lt;span class="s2">3. 使用 tic 命令编译 mostlike.txt 文件（编译后可删除）：&lt;/span>
&lt;span class="s2">tic mostlike.txt&lt;/span>
&lt;span class="s2">4. 在SHELL的配置文件中定义别名：&lt;/span>
&lt;span class="s2">alias man="&lt;/span>&lt;span class="nt">TERMINFO&lt;/span>&lt;span class="o">=~/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">terminfo&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nt">LESS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nt">C&lt;/span> &lt;span class="nt">TERM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nt">mostlike&lt;/span> &lt;span class="nt">PAGER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nt">less&lt;/span> &lt;span class="nt">man&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">现在使用 man 指令就可以读到彩色版的 Manpages 了。如果你需要修改 terminfo 文件，则可以使用 infocmp mostlike。&lt;/span>
&lt;span class="s2">(3) Timesaving Command-aliases&lt;/span>
&lt;span class="s2">编辑SHELL的配置文件（如 ~/.bashrc），加入： &lt;/span>
&lt;span class="s2">alias ls=&amp;#39;ls --color=auto&amp;#39; &lt;/span>
&lt;span class="s2">alias la=&amp;#39;ls -a --color=auto&amp;#39; &lt;/span>
&lt;span class="s2">alias ll=&amp;#39;ls -aoth --color=auto&amp;#39;&lt;/span>
&lt;span class="s2">alias p=&amp;#39;sudo pacman&amp;#39; &lt;/span>
&lt;span class="s2">alias t=&amp;#39;sudo tupac&amp;#39; &lt;/span>
&lt;span class="s2">alias x=&amp;#39;startx&amp;#39; &lt;/span>
&lt;span class="s2">alias pq=&amp;#39;pacman -Q |grep&amp;#39;&lt;/span>
&lt;span class="s2">alias pa=&amp;#39;sudo pacman -S&amp;#39; &lt;/span>
&lt;span class="s2">alias pas=&amp;#39;sudo pacman -Ss&amp;#39; &lt;/span>
&lt;span class="s2">alias pau=&amp;#39;sudo pacman -Syu&amp;#39; &lt;/span>
&lt;span class="s2">alias pay=&amp;#39;sudo pacman -Sy&amp;#39; &lt;/span>
&lt;span class="s2">alias pao=”sudo pacman-optimize” &lt;/span>
&lt;span class="s2">alias pasch=&amp;#39;pacman -Sl | cut -d&amp;#39; &amp;#39; -f2 | grep &amp;#39; &lt;/span>
&lt;span class="s2">alias tp=&amp;#39;sudo tupac -S&amp;#39; &lt;/span>
&lt;span class="s2">alias tps=&amp;#39;sudo tupac -Ss&amp;#39; &lt;/span>
&lt;span class="s2">alias tpu=&amp;#39;sudo tupac -Syu&amp;#39; &lt;/span>
&lt;span class="s2">alias tpy=&amp;#39;sudo tupac -Sy&amp;#39; &lt;/span>
&lt;span class="s2">alias vi=&amp;#39;vim&amp;#39; &lt;/span>
&lt;span class="s2">alias v=&amp;#39;sudo vim&amp;#39; &lt;/span>
&lt;span class="s2">alias ps=&amp;#39;ps ax&amp;#39;&lt;/span>
&lt;span class="s2">alias m=&amp;#39;less –s&amp;#39;&lt;/span>
&lt;span class="s2">3 安装一个桌面&lt;/span>
&lt;span class="s2">* 3.1 xorg&lt;/span>
&lt;span class="s2">$ sudo pacman -S xorg&lt;/span>
&lt;span class="s2">$ sudo X –configure &lt;/span>
&lt;span class="s2">$ sudo vi xorg.conf.new (作出适当的修正) &lt;/span>
&lt;span class="s2">$ X -config xorg.conf.new (测试一下配置文件是否能正常工作，用Ctrl+Alt+Backspace退出X)&lt;/span>
&lt;span class="s2">$ cp xorg.conf.new /etc/X11/xorg.conf&lt;/span>
&lt;span class="s2">如果发现“X -configure”不能正确配置某些硬件（比如鼠标），可以试试hwd命令：&lt;/span>
&lt;span class="s2">$ sudo pacman -S hwd &amp;&amp; sudo hwd -xa&lt;/span>
&lt;span class="s2">它会在/etc/X11/自动生成一个xorg.conf，并备份原有的文件。&lt;/span>
&lt;span class="s2">* 3.2 安装显卡驱动&lt;/span>
&lt;span class="s2">装完Xorg后，就已经有了一个通用的VESA驱动了。不过对图形加速支持得不太好。&lt;/span>
&lt;span class="s2">一般显卡的开源驱动可以用：pacman -Ss xf86-video 来搜索到。不过要想较好的支持3D&lt;/span>
&lt;span class="s2">性能，还需要使用厂商提供的驱动：&lt;/span>
&lt;span class="s2">ATI显示芯片：tupac -S catalyst ，参考http://wiki.archlinux.org/index.php/ATI&lt;/span>
&lt;span class="s2">Nvidia显示芯片可用：tupac -Ss nvidia 来搜索，并参考：http://wiki.archlinux.org/index.php/NVIDIA&lt;/span>
&lt;span class="s2">不过个人认为，对于Nvidia的显卡，最好是直接使用其官方网站上的驱动，下载地址是：&lt;/span>
&lt;span class="s2">http://www.nvidia.cn/Download/index.aspx?lang=cn&lt;/span>
&lt;span class="s2">下载最新的Linux驱动(当前是NVIDIA-Linux-x86-169.09-pkg1.run)，然后：&lt;/span>
&lt;span class="s2">$ sudo sh NVIDIA-Linux-x86-169.09-pkg1.run&lt;/span>
&lt;span class="s2">*3.3 安装字体&lt;/span>
&lt;span class="s2">$ sudo pacman –Sy ttf ｜less （从安装包列表中查找可用的字体包） &lt;/span>
&lt;span class="s2">$ sudo pacman –S sdl_ttf font-bh-ttf ttf-dejavu ttf-fireflysung ttf-ms-fonts&lt;/span>
&lt;span class="s2">当前的开源字体已经相当不错了，尤其是文泉驿字体。&lt;/span>
&lt;span class="s2">安装文泉驿点阵宋体和正黑体。当前已经进入Community 了。&lt;/span>
&lt;span class="s2">$ tupac -S wqy-bitmapfont wqy-zenhei&lt;/span>
&lt;span class="s2">$ sudo vi /etc/X11/xorg.conf ，增加字体路径 &lt;/span>
&lt;span class="s2">如果没有安装 fontconfig ，就用 pacman 安装一下，然后，&lt;/span>
&lt;span class="s2">下载本文附件：fonts.conf.tar.gz ，并解压到 $HOME下：&lt;/span>
&lt;span class="s2">$ tar zxf fonts.conf.tar.gz -C ~/&lt;/span>
&lt;span class="s2">这会在 $HOME下产生一个 .fonts.conf 文件，可以优化中文显示。&lt;/span>
&lt;span class="s2">如果磁盘上有Windows系统，也可以：&lt;/span>
&lt;span class="s2">$ sudo mkdir /usr/share/fonts/msfonts &lt;/span>
&lt;span class="s2">复制一些Windows 字体到此目录下，如：msyh, simhei, simyou &lt;/span>
&lt;span class="s2">并自行编辑.fonts.conf 文件。当然了，最好不要使用Windows字体，因为是有版权的。&lt;/span>
&lt;span class="s2">*3.4 安装一个顺手的整合桌面环境或窗口管理器&lt;/span>
&lt;span class="s2">o 3.4.1 gnome&lt;/span>
&lt;span class="s2">$ sudo pacman -S gnome （gnome-extra是附加软件，自行选择安装）&lt;/span>
&lt;span class="s2">o 3.4.2 kde&lt;/span>
&lt;span class="s2">$ sudo pacman -S kde&lt;/span>
&lt;span class="s2">o 3.4.3 xfce + idesk&lt;/span>
&lt;span class="s2">$ sudo pacman -S xfce4 idesk (xfce4-goodies是附加软件，自行选择安装)&lt;/span>
&lt;span class="s2">o 3.4.4 e17 + idesk&lt;/span>
&lt;span class="s2">$ sudo pacman -S e17 idesk&lt;/span>
&lt;span class="s2">o 3.4.5 fvwm + idesk&lt;/span>
&lt;span class="s2">$ sudo pacman -S fvwm idesk (如果要安装最新版本，需自行下载编译安装)&lt;/span>
&lt;span class="s2">o 3.4.6 openbox + rox-filer + lxpanel + idesk&lt;/span>
&lt;span class="s2">$ sudo pacman -S openbox rox lxpanel idesk&lt;/span>
&lt;span class="s2">o 3.4.7 windowmaker + rox-filer + *dockapp + idesk&lt;/span>
&lt;span class="s2">$ sudo pacman -S windowmaker rox lxpanel idesk&lt;/span>
&lt;span class="s2">$ pacman -Ss dock , 然后安装中意的dockapp&lt;/span>
&lt;span class="s2">安装上面任一桌面后，可能还要安装和启用一个顺手的登录管理器，主要有：&lt;/span>
&lt;span class="s2">XDM，GDM，KDM，Entrance, SLIM.&lt;/span>
&lt;span class="s2">如果要启用gdm，需注释掉/etc/inittab 中“x:5:respawn:/usr/bin/xdm –nodaemon” &lt;/span>
&lt;span class="s2">这一行，另在/etc/rc.conf 中的 DAEMONS行中加入 gdm，可使开机时自动运行。&lt;/span>
&lt;span class="s2">~/.profile 文件中的命令是gdm 登录时会默认调用的。其它与之相似。&lt;/span>
&lt;span class="s2">如果不用登录管理器，就配置好~/.xinitrc,用"&lt;/span>&lt;span class="nt">startx&lt;/span>&lt;span class="s2">"命令，直接从Console下进入。&lt;/span>
&lt;span class="s2">参考：&lt;/span>
&lt;span class="s2">http://wiki.archlinux.org/index.php/{Gnome,Kde,Xfce,E17,Openbox,GDM,KDM,SLIM}&lt;/span>
&lt;span class="s2">http://www.fvwm.org&lt;/span>
&lt;span class="s2">http://slim.berlios.de&lt;/span>
&lt;span class="s2">http://icculus.org/openbox/index.php/Main_Page&lt;/span>
&lt;span class="s2">http://www.windowmaker.info&lt;/span>
&lt;span class="s2">http://roscidus.com&lt;/span>
&lt;span class="s2">http://idesk.sourceforge.net&lt;/span>
&lt;span class="s2">* 3.5 安装中文输入法（fcitx,or scim）&lt;/span>
&lt;span class="s2">o 3.5.1 fcitx&lt;/span>
&lt;span class="s2">$ sudo pacman -S fcitx &lt;/span>
&lt;span class="s2">$ cat &amp;gt;&amp;gt;~/.profile &amp;lt;&amp;lt;EOF &lt;/span>
&lt;span class="s2">&amp;gt; LC_CTYPE="&lt;/span>&lt;span class="nt">zh_CN&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">utf8&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2">&amp;gt; export XMODIFIERS=@im=fcitx &lt;/span>
&lt;span class="s2">&amp;gt; export GTK_IM_MODULE=xim &lt;/span>
&lt;span class="s2">&amp;gt; export QT_IM_MODULE=xim &lt;/span>
&lt;span class="s2">&amp;gt; fcitx &amp; &lt;/span>
&lt;span class="s2">&amp;gt; EOF&lt;/span>
&lt;span class="s2">o 3.5.2 scim&lt;/span>
&lt;span class="s2">$ sudo pacman -S scim-tables (或安装scim-fcitx。要用拼音，安装scim-pinying)&lt;/span>
&lt;span class="s2">$ cat &amp;gt;&amp;gt;~/.profile &amp;lt;&amp;lt;EOF &lt;/span>
&lt;span class="s2">&amp;gt; LC_CTYPE="&lt;/span>&lt;span class="nt">zh_CN&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">utf8&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2">&amp;gt; export XMODIFIERS=@im=SCIM&lt;/span>
&lt;span class="s2">&amp;gt; export GTK_IM_MODULE="&lt;/span>&lt;span class="nt">scim&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">&amp;gt; export QT_IM_MODULE="&lt;/span>&lt;span class="nt">scim&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">&amp;gt; scim -f socket -c socket -d&lt;/span>
&lt;span class="s2">&amp;gt; EOF&lt;/span>
&lt;span class="s2"># cp ~/.profile ~/.xinitrc &lt;/span>
&lt;span class="s2"># echo exec gnome-session &amp;gt;&amp;gt;~/.xinitrc &lt;/span>
&lt;span class="s2">这是startx 调用的配置文件。用“&amp;gt;&amp;gt;”,确保了gnome-session是最后被执行的命令。 &lt;/span>
&lt;span class="s2"># startx&lt;/span>
&lt;span class="s2">4 安装常用软件&lt;/span>
&lt;span class="s2">* 4.1 X下的虚拟终端&lt;/span>
&lt;span class="s2">roxterm,tilda和yakuake都是相当棒的虚拟终端。&lt;/span>
&lt;span class="s2">toxterm同gnome-terminal相似，却要小巧得多。&lt;/span>
&lt;span class="s2">Tilda 可用于 GNOME、Xfce 桌面，而 Yakuake 主要用于 KDE 桌面。它们都具有热键控制，&lt;/span>
&lt;span class="s2">桌面嵌入，背景透明，动画效果，标签页功能和可定制性。&lt;/span>
&lt;span class="s2">个人偏好tilda，直接用Pacman命令安装：&lt;/span>
&lt;span class="s2"># pacman -S tilda （不过最近Gnome的MetaCity似乎对Tilda不太友好，老是找不到焦点）&lt;/span>
&lt;span class="s2">* 4.2 网络浏览&lt;/span>
&lt;span class="s2">使用经过优化的更小巧快速的 swiftfox 来代替Firefox。&lt;/span>
&lt;span class="s2">如果安装了elinks，可以先：&lt;/span>
&lt;span class="s2">$ elinks http://getswift.com/installer.htm&lt;/span>
&lt;span class="s2">看看有哪些版本可以下载，结合电脑处理器的类型下载，如Pentium 4的CPU：&lt;/span>
&lt;span class="s2">$ aria2c –s 4 http://getswiftfox.com/builds/installer/pentium4/install-swiftfox.sh -d /tmp &lt;/span>
&lt;span class="s2">$ vi /tmp/ install-swiftfox.sh （作出适当的修正，不作修正也可） &lt;/span>
&lt;span class="s2">$ sudo sh /tmp/install-swiftfox.sh&lt;/span>
&lt;span class="s2">也可以选择其他的网络浏览器，比如 Opera：&lt;/span>
&lt;span class="s2"># pacman -S opera&lt;/span>
&lt;span class="s2">* 4.3 图像编辑&lt;/span>
&lt;span class="s2">(1) Linux下的Photoshop: GIMP，要安装它可以执行命令：&lt;/span>
&lt;span class="s2"># pacman -S gimp&lt;/span>
&lt;span class="s2">你可以通过”应用程序 → 图像 → GIMP“来运行 GIMP。&lt;/span>
&lt;span class="s2">(2)矢量图形编辑软件可以使用 Inkscape：&lt;/span>
&lt;span class="s2"># pacman -S inkscape&lt;/span>
&lt;span class="s2">(3)命令行的可以装上 ImageMagick：&lt;/span>
&lt;span class="s2"># pacman -S imagemagick&lt;/span>
&lt;span class="s2">(4)用来捕获图像的 Scrot：&lt;/span>
&lt;span class="s2"># pacman -S scrot&lt;/span>
&lt;span class="s2">(5)轻量级的图像查看软件 GQview：&lt;/span>
&lt;span class="s2">pacman -S gqview&lt;/span>
&lt;span class="s2">或者 GNOME 默认的 Eog：&lt;/span>
&lt;span class="s2">pacman -S eog&lt;/span>
&lt;span class="s2">* 4.4 Linux下的Office软件&lt;/span>
&lt;span class="s2">(1) OpenOffice.org ：&lt;/span>
&lt;span class="s2"># pacman -S openoffice-base openoffice-zh_cn&lt;/span>
&lt;span class="s2">为了让 OpenOffice.org 运行于 GTK 2 模式，向SHELL的配置文件（如 ~/.bashrc） 添加：&lt;/span>
&lt;span class="s2">export OOO_FORCE_DESKTOP=gnome&lt;/span>
&lt;span class="s2">(2) 永中Office:&lt;/span>
&lt;span class="s2">国产软件，听说对MS Office文档格式的支持要比OpenOffice好，如果Word，Exel的文件较多，&lt;/span>
&lt;span class="s2">可以考虑这个，就是安装略显麻烦。&lt;/span>
&lt;span class="s2">$ cd ~&lt;/span>
&lt;span class="s2">$ aria2c -s 4 http://218.90.147.70/EverMore/EIOffice2007/EIO2007_Trial_ZH_Lin.tar.gz （电信）or:&lt;/span>
&lt;span class="s2">$ aria2c -s 4 http://218.104.51.66/EverMore/EIOffice2007/EIO2007_Trial_ZH_Lin.tar.gz (网通)&lt;/span>
&lt;span class="s2">$ tar zxf EIO2007_Trial_ZH_Lin.tar.gz&lt;/span>
&lt;span class="s2">用su命令登录root，再进入解压后文件夹（好像是4开头的）；&lt;/span>
&lt;span class="s2"># ./setup.sh （进入永中Office的图形界面安装，指定一下安装目录）&lt;/span>
&lt;span class="s2">安装完成后，要以root身份运行一下永中：&lt;/span>
&lt;span class="s2"># eio; exit&lt;/span>
&lt;span class="s2">$ cd ~ ; seteio (为普通用户配置下永中)&lt;/span>
&lt;span class="s2">$ eio (从终端运行永中Office，或者从菜单中运行也可以)&lt;/span>
&lt;span class="s2">* 4.5 即时通讯&lt;/span>
&lt;span class="s2">要与朋友即时聊天，我们可以选用 Pidgin，它支持 Gtalk、MSN、QQ 等多种协议：&lt;/span>
&lt;span class="s2">pacman -S pidgin&lt;/span>
&lt;span class="s2">当然，Skype 也不可错过：&lt;/span>
&lt;span class="s2">pacman -S skype-staticqt&lt;/span>
&lt;span class="s2">* 4.6 音影播放&lt;/span>
&lt;span class="s2">(1)音乐播放软件我选择 Quod Libet，你可以凭自己的喜好来安装：&lt;/span>
&lt;span class="s2"># pacman -S quodlibet&lt;/span>
&lt;span class="s2">其他的音乐播放器有 MPD、Audacious、Exaile、Amarok 等。&lt;/span>
&lt;span class="s2">(2)看电影的话，可用mplayer，同时也加上浏览器插件和常用解码器：&lt;/span>
&lt;span class="s2"># pacman -S mplayer mplayer-plugin codecs gstreamer0.10-bad gstreamer0.10-ugly gstreamer0.10-ffmpeg gstreamer0.10-mad gstreamer0.10-mpeg2dec&lt;/span>
&lt;span class="s2">如果需要 MPlayer 的前端，那么可以安装 SMPlayer：&lt;/span>
&lt;span class="s2"># pacman -S smplayer&lt;/span>
&lt;span class="s2">当然，另一个选择 VLC 也挺好：&lt;/span>
&lt;span class="s2"># pacman -S vlc&lt;/span>
&lt;span class="s2">* 4.7 下载工具&lt;/span>
&lt;span class="s2">命令行下载工具，有 wget。此外，aria2 也不错，它支持断点续传和多线程下载：&lt;/span>
&lt;span class="s2">pacman -S aria2&lt;/span>
&lt;span class="s2">BitTorrent 下载工具，我们选用 Deluge：&lt;/span>
&lt;span class="s2">pacman -S deluge&lt;/span>
&lt;span class="s2">其他的包括 Azureus、rTorrent 等。&lt;/span>
&lt;span class="s2">另外，我们把 aMule 也安装上：&lt;/span>
&lt;span class="s2">pacman -S amule&lt;/span>
&lt;span class="s2">为了能够让 aMule 直接从 Firefox 浏览器中处理 ed2k 链接，我们在 Firefox 的 &lt;/span>
&lt;span class="s2">about:config 中新建字符串 network.protocol-handler.app.ed2k，并将其设为 &lt;/span>
&lt;span class="s2">/usr/bin/ed2k。&lt;/span>
&lt;span class="s2">* 4.8 文本编辑与排版&lt;/span>
&lt;span class="s2">(1)如果要求简单的话，可以选用 Gedit：&lt;/span>
&lt;span class="s2">pacman -S gedit&lt;/span>
&lt;span class="s2">(2)安装 Vim，要图形界面的话，可以加上 Gvim：&lt;/span>
&lt;span class="s2">pacman -S vim gvim&lt;/span>
&lt;span class="s2">(3)Emacs 迷们可以执行：&lt;/span>
&lt;span class="s2">pacman -S emacs&lt;/span>
&lt;span class="s2">Emacs CVS 版本可在 community 中找到。&lt;/span>
&lt;span class="s2">(4)世界第一流的排版工具集 TexLive&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Texlive&lt;/span>
&lt;span class="s2">也可额外安装 TeX 的集成编辑环境：Kile, or Lyx&lt;/span>
&lt;span class="s2">* 4.9 安装VirtualBox虚拟机&lt;/span>
&lt;span class="s2">$ sudo tupac -S virtualbox_bin (从AUR安装VirtualBox 的PUEL版本)&lt;/span>
&lt;span class="s2">$ sudo vbox_build_module (创建VirtualBox的内核)&lt;/span>
&lt;span class="s2">$ sudo gpasswd -a YourName vboxusers (将你的名字加入vboxusers用户组)&lt;/span>
&lt;span class="s2">$ sudo modprobe vboxdrv （如果要立刻开始用，需要加载vboxdrv模块）&lt;/span>
&lt;span class="s2">$ sudo vim /etc/rc.conf：&lt;/span>
&lt;span class="s2">MODULES中加入vboxdrv，使开机时加载vboxdrv模块.&lt;/span>
&lt;span class="s2">$ VirtalBox (从终端运行virtualbox，或从桌面的菜单中运行它)&lt;/span>
&lt;span class="s2">有时，会因为没有libstdc++5 这个库文件，而使virtualbox不能运行。安装它就是了：&lt;/span>
&lt;span class="s2">$ sudo pacman -S libstdc++5&lt;/span>
&lt;span class="s2">* 4.10 wine──在Unix/Linux系统上实现Windows API &lt;/span>
&lt;span class="s2">Wine用Unix的方式实现（或代替了）Windows API ，所以通过Wine可以在Unix-Like系统上运行 Windows 程序及游戏。&lt;/span>
&lt;span class="s2">Wine-Doors是一款基于Gnome桌面的Windows软件安装管理包，是Wine 的辅助工具，&lt;/span>
&lt;span class="s2">使用非常方便，只需在软件列表中选择要安装的软件，Wine-Doors就会帮你搞定一切，&lt;/span>
&lt;span class="s2">不再需要自己动手来配置Wine。什么Office 2003，Photoshop都不在话下了。&lt;/span>
&lt;span class="s2">$ sudo tupac -S wine wine-doors&lt;/span>
&lt;span class="s2">$ winecfg (配置好Wine)&lt;/span>
&lt;span class="s2">$ sudo wine iexplore http://www.winehq.org （安装Wine Gecko IE engine）&lt;/span>
&lt;span class="s2">$ cp /usr/share/fonts/wenquanyi/wqy-zenhei/wqy-zenhei.ttf ~/.wine/drive_c/windows/fonts&lt;/span>
&lt;span class="s2">给Wine提供一个中文字体：WenQuanYi Zen Hei&lt;/span>
&lt;span class="s2">$ vi ~/zh.reg, add: （编辑Wine中文字体支持的注册表文件，否则中文网页会乱码）&lt;/span>
&lt;span class="s2">REGEDIT4&lt;/span>
&lt;span class="cp">[&lt;/span>&lt;span class="nx">HKEY_LOCAL_MACHINE&lt;/span>&lt;span class="o">\&lt;/span>&lt;span class="nx">Software&lt;/span>&lt;span class="o">\&lt;/span>&lt;span class="nx">Microsoft&lt;/span>&lt;span class="o">\&lt;/span>&lt;span class="nx">Windows&lt;/span> &lt;span class="nx">NT&lt;/span>&lt;span class="o">\&lt;/span>&lt;span class="nx">CurrentVersion&lt;/span>&lt;span class="o">\&lt;/span>&lt;span class="nx">FontSubstitutes&lt;/span>&lt;span class="cp">]&lt;/span>&lt;span class="s2">&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Arial&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Arial&lt;/span> &lt;span class="nt">CE&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">238&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Arial&lt;/span> &lt;span class="nt">CYR&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">204&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Arial&lt;/span> &lt;span class="nt">Greek&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">161&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Arial&lt;/span> &lt;span class="nt">TUR&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">162&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Courier&lt;/span> &lt;span class="nt">New&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Courier&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">CE&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">238&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Courier&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">CYR&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">204&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Courier&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">Greek&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">161&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Courier&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">TUR&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">162&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">FixedSys&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Helv&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Helvetica&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">MS&lt;/span> &lt;span class="nt">Sans&lt;/span> &lt;span class="nt">Serif&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">MS&lt;/span> &lt;span class="nt">Shell&lt;/span> &lt;span class="nt">Dlg&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">MS&lt;/span> &lt;span class="nt">Shell&lt;/span> &lt;span class="nt">Dlg&lt;/span> &lt;span class="nt">2&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">System&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Tahoma&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Times&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Times&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">Roman&lt;/span> &lt;span class="nt">CE&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">238&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Times&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">Roman&lt;/span> &lt;span class="nt">CYR&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">204&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Times&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">Roman&lt;/span> &lt;span class="nt">Greek&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">161&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Times&lt;/span> &lt;span class="nt">New&lt;/span> &lt;span class="nt">Roman&lt;/span> &lt;span class="nt">TUR&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nt">162&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">"&lt;/span>&lt;span class="nt">Tms&lt;/span> &lt;span class="nt">Rmn&lt;/span>&lt;span class="s2">"="&lt;/span>&lt;span class="nt">WenQuanYi&lt;/span> &lt;span class="nt">Zen&lt;/span> &lt;span class="nt">Hei&lt;/span>&lt;span class="s2">"&lt;/span>
&lt;span class="s2">$ regedit zh.reg (将中文字体配置写入Wine的注册表)&lt;/span>
&lt;span class="s2">$ wine iexplore http://www.126.com (试验一下中文效果)&lt;/span>
&lt;span class="s2">需要注意的是，如果从abs系统编译了并升级安装到了最新的Wine，一定要运行“wineprefixcreate” 来更新Wine的注册表。&lt;/span>
&lt;span class="s2">* 4.11 其他工具&lt;/span>
&lt;span class="s2">(1)光盘刻录&lt;/span>
&lt;span class="s2">KDE下建议选择 K3b，可以通过以下指令安装：&lt;/span>
&lt;span class="s2">pacman -S k3b dvd+rw-tools&lt;/span>
&lt;span class="s2">为了让当前用户能够使用光盘刻录设备，需要将其添加到 optical 用户组中：&lt;/span>
&lt;span class="s2">gpasswd -a YOURNAME optical&lt;/span>
&lt;span class="s2">如果是Gnome用户，建议安装gnomebaker，不亚于k3b:&lt;/span>
&lt;span class="s2">pacman -S gnomebaker&lt;/span>
&lt;span class="s2">(2) FTP上传&lt;/span>
&lt;span class="s2">可选择命令行的 Lftp：&lt;/span>
&lt;span class="s2">pacman -S lftp&lt;/span>
&lt;span class="s2">图形化的有 gFTP、FileZilla 等。&lt;/span>
&lt;span class="s2">FTP下载其实不必特意安装什么，因为wget，aria2都是支持FTP协议的。&lt;/span>
&lt;span class="s2">(3)文档查看&lt;/span>
&lt;span class="s2">查看 PDF 文档，可以安装 Evince：pacman -S evince&lt;/span>
&lt;span class="s2">也可以用Adobe公司的acroread：pacman -S acroread&lt;/span>
&lt;span class="s2">或轻量级的xpdf：pacman -S xpdf xpdf-chinese-simplified xpdf-chinese-traditional&lt;/span>
&lt;span class="s2">CHM 文档，可以选用kchmviewer&lt;/span>
&lt;span class="s2">(4)新闻阅读&lt;/span>
&lt;span class="s2">RSS 离线阅读软件，用 Liferea：&lt;/span>
&lt;span class="s2">pacman -S liferea&lt;/span>
&lt;span class="s2">(5)邮件收发&lt;/span>
&lt;span class="s2">电子邮件客户端，可以选择 Thunderbird：&lt;/span>
&lt;span class="s2">pacman -S thunderbird thunderbird-i18n&lt;/span>
&lt;span class="s2">或者采用：mutt + msmtp + getmail&lt;/span>
&lt;span class="s2">(6)图形界面的进程查看器 (gps)&lt;/span>
&lt;span class="s2">$ sudo pacman –S gps &lt;/span>
&lt;span class="s2">$ gps &lt;/span>
&lt;span class="s2">如果是文字界面的话，可用下面的命令： &lt;/span>
&lt;span class="s2">$ ps ax&lt;/span>
&lt;span class="s2">(7)计算器：&lt;/span>
&lt;span class="s2">pacman -S gcalctool&lt;/span>
&lt;span class="s2">(8)压缩/解压 rar、zip 等格式：&lt;/span>
&lt;span class="s2">pacman -S p7zip q7z (安装7zip，q7z是其GUI程序)&lt;/span>
&lt;span class="s2">pacman -S unrar unzip&lt;/span>
&lt;span class="s2">另外，图形化的可以用 File-roller：&lt;/span>
&lt;span class="s2">pacman -S file-roller&lt;/span>
&lt;span class="s2">(9)词典翻译&lt;/span>
&lt;span class="s2">安装 StarDict：&lt;/span>
&lt;span class="s2">pacman -S stardict&lt;/span>
&lt;span class="s2">同时，词典文件需从 StarDict 官方网站下载，并释放到 /usr/share/stardict/dic/ 目录。&lt;/span>
&lt;span class="s2">(10)Java 支持：&lt;/span>
&lt;span class="s2">pacman -S jre&lt;/span>
&lt;span class="s2">(11)Flash 插件：&lt;/span>
&lt;span class="s2">pacman -S flashplugin&lt;/span>
&lt;span class="s2">* 4.11 安装主题&lt;/span>
&lt;span class="s2">GDM 可以安装 Arch Boomerang Underlight 这套清爽的主题。下载后，执行：&lt;/span>
&lt;span class="s2">$ tar zxvf arch-boomerang-underlight-gdm.tar.gz&lt;/span>
&lt;span class="s2">$ mv arch-underlight-* /usr/share/gdm/themes/&lt;/span>
&lt;span class="s2">$ sudo gdmsetup (需要在X下执行，需要事先安装gdm)&lt;/span>
&lt;span class="s2">或者，如果在使用Gnome，就在”系统 → 系统管理 → 登录窗口“中将样式更改为主题模式，&lt;/span>
&lt;span class="s2">并选择已安装的主题即可。&lt;/span>
&lt;span class="s2">参看：http://www.gnome-look.org/&lt;/span>
&lt;span class="s2">还可以打造一个 Mac OS X 风格的界面，参看：http://sourceforge.net/projects/mac4lin&lt;/span>
&lt;span class="s2">5 常见问题&lt;/span>
&lt;span class="s2">* 5.1 声音问题&lt;/span>
&lt;span class="s2">安装ALSA。实际上，ALSA 已被包含到 2.6 版的内核中。因此，只需安装 ALSA 的相关工具即可：&lt;/span>
&lt;span class="s2">pacman -S alsa-utils&lt;/span>
&lt;span class="s2">接着，将当前用户添加到 audio 用户组，以便使用声卡设备：&lt;/span>
&lt;span class="s2">gpasswd -a YOURNAME audio&lt;/span>
&lt;span class="s2">同时，将 alsa 添加到 /etc/rc.conf 配置文件的 DAEMONS 中：&lt;/span>
&lt;span class="s2">DAEMONS=(syslog-ng network netfs crond gdm alsa)&lt;/span>
&lt;span class="s2">值得注意的是，ALSA 默认是静音状态，需要先打开音量。另外，也可点击”系统 → 首选&lt;/span>
&lt;span class="s2">项 → 音效“进行测试。&lt;/span>
&lt;span class="s2">$ sudo pacman -S alsa-lib alsa-oss alsa-utils (oss 包解决声卡独占问题) &lt;/span>
&lt;span class="s2">$ sudo alsaconf (设置声卡) &lt;/span>
&lt;span class="s2">$ sudo alsamixer &lt;/span>
&lt;span class="s2">$ sudo alsactl store (设置和保存音量，并在 /etc/rc.conf中的 DAEMONS行加入alsa) &lt;/span>
&lt;span class="s2">$ amixer set Master 75 unmute &lt;/span>
&lt;span class="s2">$ amixer set PCM 75 unmute (75 好像是原声，再高的话，声音会失真)&lt;/span>
&lt;span class="s2">* 5.2 笔记本电脑可能遇到的问题&lt;/span>
&lt;span class="s2">(1) 触摸板问题&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Touchpad_Synaptics&lt;/span>
&lt;span class="s2">(2) 摄像头问题&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Webcam_Setup&lt;/span>
&lt;span class="s2">(3) 无线上网问题&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Wireless&lt;/span>
&lt;span class="s2">(4) 快捷键问题&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Extra_Keyboard_Keys&lt;/span>
&lt;span class="s2">* 5.3 打印机设置&lt;/span>
&lt;span class="s2">(1) 当前最流行的底层基础打印系统：CUPS (适用于所有打印机)&lt;/span>
&lt;span class="s2">Unix-Like系统下的打印系统中，最具易用性的当数CUPS (The Common UNIX Printing System )，即&lt;/span>
&lt;span class="s2">Unix通用打印系统。在过去，Unix-Like系统下的打印问题是老大难。CUPS的出现使这个问题得到了&lt;/span>
&lt;span class="s2">极大的缓解。&lt;/span>
&lt;span class="s2">安装：&lt;/span>
&lt;span class="s2"># pacman -S cups ghostscript gsfonts&lt;/span>
&lt;span class="s2">CUPS系统运行记录：&lt;/span>
&lt;span class="s2">编辑/etc/cups/cupsd.conf，设置LogLevel的等级：&lt;/span>
&lt;span class="s2">LogLevel debug2&lt;/span>
&lt;span class="s2">如果出现错误，就可以察看调试信息了：&lt;/span>
&lt;span class="s2">$ tail -n 100 -f /var/log/cups/error_log&lt;/span>
&lt;span class="s2">看看系统已经加载了哪些模组（Modules）：&lt;/span>
&lt;span class="s2"># lsmode |less&lt;/span>
&lt;span class="s2">再来看看系统中有哪些可以使用的模组：&lt;/span>
&lt;span class="s2"># modprobe -l |less&lt;/span>
&lt;span class="s2">为内核加载打印机模组后，连接好打印机机，并打开电源：&lt;/span>
&lt;span class="s2">i) USB 接口打印机&lt;/span>
&lt;span class="s2"># modprobe usblp （2.6.x 内核）&lt;/span>
&lt;span class="s2"># modprobe printer （2.4.x 内核）&lt;/span>
&lt;span class="s2"># tail /var/log/messages.log （看看安装成功了没有）&lt;/span>
&lt;span class="s2">ii) 并口打印机&lt;/span>
&lt;span class="s2"># modprobe lp parport parport_pc （2.6.x 内核）&lt;/span>
&lt;span class="s2"># modprobe parport parport_pc （2.4.x 内核）&lt;/span>
&lt;span class="s2"># tail /var/log/messages.log （看看安装成功了没有）&lt;/span>
&lt;span class="s2">将这些模组加入/etc/rc.conf中的MODULES中去，以便开机时自动加载。&lt;/span>
&lt;span class="s2">启动 CUPS ：&lt;/span>
&lt;span class="s2"># /etc/rc.d/cups start （可将cups加入/etc/rc.conf中的DAEMONS中去，以便开机时自动加载）&lt;/span>
&lt;span class="s2">这个时候，就可以用CUPS在控制台下做一些简单的打印了，如：&lt;/span>
&lt;span class="s2">$ cat ~/.xinitrc &amp;gt; /dev/usb/lp0 (USB接口打印机)&lt;/span>
&lt;span class="s2">当然仅仅依靠CUPS打印，如果在X下，肯定是不方便的。主要是因为缺少驱动，Linux下的打印驱动是PPD文件。&lt;/span>
&lt;span class="s2">(2) 打印驱动： Foomatic&lt;/span>
&lt;span class="s2">Foomatic是一个数据库驱动的打印系统，它将Unix下的通用后台打印系统与开源的打印机驱动整合在一起。&lt;/span>
&lt;span class="s2">只要有任一在开源驱动下能够正常工作的打印机，它就能支持了。它支持CUPS, LPRng, LPD, GNUlpr, Solaris LP,&lt;/span>
&lt;span class="s2">PPR, PDQ, CPS 这些底层的打印系统，也能直接打印（既是驱动也是打印工具）。&lt;/span>
&lt;span class="s2">Foomatic打印速度快，打印质量也挺不错。不过缺点是，有个别的打印机可能没有PPD文件驱动。&lt;/span>
&lt;span class="s2"># pacman -S foomatic-***&lt;/span>
&lt;span class="s2">Foomatic包含五个安装包：&lt;/span>
&lt;span class="s2">foomatic-filters (帮助后台打印系统将PostScript转成打印机语言)，&lt;/span>
&lt;span class="s2">foomatic-db (foomatic-db-engine生成PPD文件时要用到的一切资料)，&lt;/span>
&lt;span class="s2">foomatic-db-PPD (已经获支持的打印驱动)&lt;/span>
&lt;span class="s2">foomatic-db-engine (将 Foomatic XMLo数据库中的数据生成PPD文件)，&lt;/span>
&lt;span class="s2">foomatic-db-hpijs (专为HP打印驱动生成Foomatic XML 数据)。&lt;/span>
&lt;span class="s2">一般来说，安装前四个包就可以了。如果没有惠普打印机，就不必安装foomatic-db-hpijs了。&lt;/span>
&lt;span class="s2">(4) 打印驱动：hplip&lt;/span>
&lt;span class="s2">惠普DeskJet, OfficeJet, Photosmart, Business Inkjet 和一些 LaserJet 打印机型号，需要安装hplip。只用于惠普打印机。&lt;/span>
&lt;span class="s2">也可同时安装上面的Foomatic，对比一下两者的打印速度。&lt;/span>
&lt;span class="s2"># pacman -S hplip&lt;/span>
&lt;span class="s2">(5) 打印驱动：Gutenprint&lt;/span>
&lt;span class="s2">也许以上的打印驱动仍然不行（不过安装foomatic一定是必要的，能提高打印速度）。在配置CUPS时（即将讲到）&lt;/span>
&lt;span class="s2">没有找到自己的打印机型号。那么可能还需要接着安装Gutenprint。&lt;/span>
&lt;span class="s2">Gutenprint 是GIMP的打印扩充功能模块，过去叫"&lt;/span>&lt;span class="nt">gimp-print&lt;/span>&lt;span class="s2">"，它能够为GIMP提供流行的打印驱动，能&lt;/span>
&lt;span class="s2">让佳能、爱普生、惠普、利盟、索尼、奥林巴斯，以及其他基于PCL技术的打印机，打印出更出色的品质。用于高品质的图像打印是在好不过了。&lt;/span>
&lt;span class="s2">它支持的打印机型号列表可见于：http://gutenprint.sourceforge.net/p_Supported_Printers.php3&lt;/span>
&lt;span class="s2">不过Gutenprint的打印品质是没得说，但速度就不敢恭维了。但有foomatic的支持就会快很多。&lt;/span>
&lt;span class="s2"># pacman -S gutenprint&lt;/span>
&lt;span class="s2">(6) 在X下配置CUPS&lt;/span>
&lt;span class="s2">打印基础系统CUPS和打印驱动安装好的，就要开始配置打印机了。&lt;/span>
&lt;span class="s2">可以通过配置CUPS来配置打印机。配置CUPS的方法适用于一切打印机及其驱动。因此推荐使用。&lt;/span>
&lt;span class="s2">进入X，打开一个网络浏览器，访问：&lt;/span>
&lt;span class="s2">http://localhost:631 （也可以用在/etc/hosts中设置好的hostname来代替localhost）&lt;/span>
&lt;span class="s2">按照提示，一步一步的配置好打印机：&lt;/span>
&lt;span class="s2">Manage Printers ---&amp;gt; Add Printer ---&amp;gt; root密码验证 ---&amp;gt; 输入打印机名称 ---&amp;gt; 选择设备类型&lt;/span>
&lt;span class="s2">（打印机型号及其接口：USB接口 or 并口打印机） ---&amp;gt; 选择你的打印机 ---&amp;gt; 通过打印机型号来选择适当的打印机驱动，并Add&lt;/span>
&lt;span class="s2">（如果打印驱动的名称中出现了foomatic字样，一定要优先选择） ---&amp;gt; 打印选项的设置 ---&amp;gt; 完成&lt;/span>
&lt;span class="s2">也可以使用另外的配置界面，不过可能要另外安装：&lt;/span>
&lt;span class="s2">tupac -S gnome-cups-manager (Gnome下)&lt;/span>
&lt;span class="s2">tupac -S gtklp (KDE下)&lt;/span>
&lt;span class="s2">(5) 打印机共享&lt;/span>
&lt;span class="s2">i) Linux to Linux&lt;/span>
&lt;span class="s2">服务器端：编辑 /etc/cups/cupsd.conf 中“Location”一段，以允许客户端的访问，重启cups服务。&lt;/span>
&lt;span class="s2">客户端：编辑 /etc/cups/cupsd.conf 中“ServerName”一段，以允许访问服务器端。执行命令：lpq&lt;/span>
&lt;span class="s2">ii) Linux to Windows&lt;/span>
&lt;span class="s2">两端都应当安装Samba。参看Wiki。&lt;/span>
&lt;span class="s2">iii) Windows to Linux&lt;/span>
&lt;span class="s2">两端都应当安装Samba。参看Wiki&lt;/span>
&lt;span class="s2">*******&lt;/span>
&lt;span class="s2">所有关于打印的问题，请一定要参看：&lt;/span>
&lt;span class="s2">http://wiki.archlinux.org/index.php/CUPS&lt;/span>
&lt;span class="s2">http://www.cups.org/&lt;/span>
&lt;span class="s2">http://gimp-print.sourceforge.net/&lt;/span>
&lt;span class="s2">http://www.linuxprinting.org/printer_list.cgi&lt;/span>
&lt;span class="s2">http://www.linux-foundation.org/en/OpenPrinting/Database/Foomatic&lt;/span>
&lt;span class="s2">http://savannah.nongnu.org/projects/foomatic-gui/&lt;/span>
&lt;span class="s2">http://wiki.gentoo.tw/mediawiki/index.php/Printing-howto&lt;/span>
&lt;span class="s2">另可参看http://www.redhat.net.cn/online/linuxbook/1/16.htm&lt;/span>
&lt;span class="s2">* 5.4 服务的访问控制&lt;/span>
&lt;span class="s2">/etc/hosts.allow 和/etc/hosts.deny &lt;/span>
&lt;span class="s2">这两个文件是tcpd 服务器的配置文件，tcpd 服务器可以控制外部IP 对本机服务的访问。 &lt;/span>
&lt;span class="s2">这两个配置文件的格式如下： &lt;/span>
&lt;span class="s2">#服务进程名:主机列表:当规则匹配时可选的命令操作 &lt;/span>
&lt;span class="s2">server_name:hosts-list&lt;/span>&lt;span class="cp">[&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="cp">]&lt;/span>&lt;span class="s2"> &lt;/span>
&lt;span class="s2">/etc/hosts.allow 控制可以访问本机的IP 地址，/etc/hosts.deny 控制禁止访问本机的IP。 &lt;/span>
&lt;span class="s2">如果两个文件的配置有冲突，以/etc/hosts.deny 为准。下面是一个/etc/hosts.allow 的示例： &lt;/span>
&lt;span class="s2">ALL: 127.0.0.1: ALLOW #允许本机访问本机所有服务进程 &lt;/span>
&lt;span class="s2">smbd: 192.168.0.0/255.255.255.0 #允许192.168.0.网段的IP 访问smbd 服务 &lt;/span>
&lt;span class="s2">ALL 关键字匹配所有情况，EXCEPT 匹配除了某些项之外的情况，PARANOID 匹配你想控 &lt;/span>
&lt;span class="s2">制的IP 地址和它的域名不匹配时(域名伪装)的情况。&lt;/span>
&lt;span class="s2">* 5.5 启动加速&lt;/span>
&lt;span class="s2">编辑 /etc/rc.conf ，在 “ DAEMONS ”行的一些不急着需要用的后台程序前加上@，使后台运行。&lt;/span>
&lt;span class="s2">* 5.6 中文Java 支持&lt;/span>
&lt;span class="s2">$JAVA_HOME/jre/lib/fonts/ 下建一个fallback 的目录，然后建一个中文字体的软链接过去。&lt;/span>
&lt;span class="s2">* 5.7 可移动设备的自动挂载（HAL + dbus or ivman） 及中文名支持&lt;/span>
&lt;span class="s2">$ sudo pacman -S hal dbus acpid（hal 依赖 dbus，acpid 可管理设备的电源。） &lt;/span>
&lt;span class="s2">$ sudo vi /etc/rc.conf ，在 DAEMONS行 加入hal，如: &lt;/span>
&lt;span class="s2">DAEMONS=(syslog-ng acpid hal network !netfs @crond @alsa gdm) &lt;/span>
&lt;span class="s2">注意：如果daemons 列表中有dbus，要移除它，以免出错。hal 会自动加载dbus。 &lt;/span>
&lt;span class="s2">$ sudo gpasswd –a username optical &lt;/span>
&lt;span class="s2">$ sudo gpasswd –a username storage &lt;/span>
&lt;span class="s2">把你的用户加入到 optical，storage 这几个组里面。前文中已经加入过了，可跳过。&lt;/span>
&lt;span class="s2">如果用ivman来替代dbus，则需要将用户名加入到plugdev组中。&lt;/span>
&lt;span class="s2">$ sudo vi /etc/fstab，注释掉下面两行： &lt;/span>
&lt;span class="s2">/dev/cdrom /mnt/cdrom iso9660 ro,user,noauto,unhide 0 0 &lt;/span>
&lt;span class="s2">/dev/dvd /mnt/dvd udf ro,user,noauto,unhide 0 0 &lt;/span>
&lt;span class="s2">$ sudo vi /etc/hal/fdi/policy/preferences.fdi，可加入一些很有用的规则，&lt;/span>
&lt;span class="s2">如自动挂载NTFS文件系统，自动挂载可移动设备，性能优化，U盘的中文名支持等：&lt;/span>
&lt;span class="s2">&amp;lt;?xml version="&lt;/span>&lt;span class="nt">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">&lt;/span>&lt;span class="s2">" encoding="&lt;/span>&lt;span class="nt">UTF-8&lt;/span>&lt;span class="s2">"?&amp;gt; &lt;/span>
&lt;span class="s2">&amp;lt;deviceinfo version="&lt;/span>&lt;span class="nt">&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">2&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;device&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">fstype&lt;/span>&lt;span class="s2">" string="&lt;/span>&lt;span class="nt">ntfs&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;append key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">valid_options&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">strlist&lt;/span>&lt;span class="s2">"&amp;gt;dmask=000&amp;lt;/append&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;append key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">valid_options&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">strlist&lt;/span>&lt;span class="s2">"&amp;gt;fmask=111&amp;lt;/append&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/device&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;device&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;!-- Use UTF-8 charset for vfat --&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">fstype&lt;/span>&lt;span class="s2">" string="&lt;/span>&lt;span class="nt">vfat&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">iocharset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nt">utf8&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;true&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/device&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;device&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">hotpluggable&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">false&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">removable&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">false&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">automount_enabled_hint&lt;/span>&lt;span class="s2">" type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;false&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/device&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;device&amp;gt; &lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">block&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">is_volume&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">true&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">size&lt;/span>&lt;span class="s2">" compare_lt="&lt;/span>&lt;span class="nt">8000000000&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="p">@&lt;/span>&lt;span class="k">block&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">storage_device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nd">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">hotpluggable&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">true&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">sync&lt;/span>&lt;span class="s2">" type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;true&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">noatime&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;true&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="p">@&lt;/span>&lt;span class="k">block&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">storage_device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nd">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">removable&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">true&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">sync&lt;/span>&lt;span class="s2">" type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;true&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">noatime&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;true&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">size&lt;/span>&lt;span class="s2">" compare_ge="&lt;/span>&lt;span class="nt">8000000000&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="p">@&lt;/span>&lt;span class="k">block&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">storage_device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nd">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">hotpluggable&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">true&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">sync&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;false&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">noatime&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;false&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;match key="&lt;/span>&lt;span class="p">@&lt;/span>&lt;span class="k">block&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">storage_device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nd">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">removable&lt;/span>&lt;span class="s2">" bool="&lt;/span>&lt;span class="nt">true&lt;/span>&lt;span class="s2">"&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">sync&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;false&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;merge key="&lt;/span>&lt;span class="nt">volume&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">policy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">mount_option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">noatime&lt;/span>&lt;span class="s2">" &lt;/span>
&lt;span class="s2"> type="&lt;/span>&lt;span class="nt">bool&lt;/span>&lt;span class="s2">"&amp;gt;false&amp;lt;/merge&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/match&amp;gt;&lt;/span>
&lt;span class="s2"> &amp;lt;/device&amp;gt;&lt;/span>
&lt;span class="s2">&amp;lt;/deviceinfo&amp;gt;&lt;/span>
&lt;span class="s2">参看：http://wiki.archlinux.org/index.php/HAL&lt;/span>
&lt;span class="s2">注意，必须事先安装好ntfs-3g安装包，才能成功挂载NTFS分区。最后：&lt;/span>
&lt;span class="s2">$ sudo /etc/rc.d/hal restart&lt;/span>
&lt;span class="s2">即可正常使用HAL支持了，同时移动设备上的中文名（其实其它语言也可以）也可以得到支持。&lt;/span>
&lt;span class="s2">如果以上不能工作，还可以安装pmount: &lt;/span>
&lt;span class="s2">$ sudo pacman -Sy pmount&lt;/span>
&lt;span class="s2">* 5.8 更改GNOME 菜单下的图标&lt;/span>
&lt;span class="s2">可以编辑/usr/share/applications 中的相应文件&lt;/span>
&lt;span class="s2">* 5.9 ArchLinux的包管理系统：Pacman&lt;/span>
&lt;span class="s2">常用命令有：&lt;/span>
&lt;span class="s2">pacman -Sy abc #和源同步后安装名为abc的包 &lt;/span>
&lt;span class="s2">pacman -S abc #从本地数据库中得到abc的信息，下载安装abc包 &lt;/span>
&lt;span class="s2">pacman -Sf abc #强制安装包abc &lt;/span>
&lt;span class="s2">pacman -Ss abc #搜索有关abc信息的包 &lt;/span>
&lt;span class="s2">pacman -Si abc #从数据库中搜索包abc的信息 &lt;/span>
&lt;span class="s2">pacman -Qi abc #列出已安装的包abc的详细信息 &lt;/span>
&lt;span class="s2">pacman -Syu #同步源，并更新系统 &lt;/span>
&lt;span class="s2">pacman -Sy #仅同步源 &lt;/span>
&lt;span class="s2">pacman -R abc #删除abc包 &lt;/span>
&lt;span class="s2">pacman -Rc abc #删除abc包和依赖abc的包 &lt;/span>
&lt;span class="s2">pacman -Rsc abc #删除abc包和abc依赖的包 &lt;/span>
&lt;span class="s2">pacman -Sc #清理/var/cache/pacman/pkg目录下的旧包 &lt;/span>
&lt;span class="s2">pacman -Scc #清除所有下载的包和数据库 &lt;/span>
&lt;span class="s2">pacman -U abc #安装下载的abs包，或新编译的abc包&lt;/span>
&lt;span class="s2">pacman -Sd abc #忽略依赖性问题，安装包abc &lt;/span>
&lt;span class="s2">pacman pacman -Su --ignore foo #升级时不升级包foo &lt;/span>
&lt;span class="s2">pacman -Sg abc #查询abc这个包组包含的软件包&lt;/span>
&lt;span class="s2">* 5.10 Arch Build System (ABS)&lt;/span>
&lt;span class="s2">利用abs 可以从源码自定义编译安装包。其过程如下： &lt;/span>
&lt;span class="s2">(1) Synchronize your ABS tree with the server. &lt;/span>
&lt;span class="s2"># pacman -S cvsup &lt;/span>
&lt;span class="s2"># abs&lt;/span>
&lt;span class="s2">(2) Create a new directory in /var/abs/local/ named after the package &lt;/span>
&lt;span class="s2">you are going to create. &lt;/span>
&lt;span class="s2">$ mkdir -p ~/abs/local/ (这里，推荐在个人的主目录下创建一个ABS的工作目录)&lt;/span>
&lt;span class="s2">(3）Copy the PKGBUILD.proto prototype from /var/abs/ into your &lt;/span>
&lt;span class="s2">newly created directory, remove the .proto suffix, and edit it to fit &lt;/span>
&lt;span class="s2">the new package. &lt;/span>
&lt;span class="s2">$ cp -r /var/abs/... ~/abs/local/ (将你要编译的软件的PKGBUILD目录复制到个人目录下)&lt;/span>
&lt;span class="s2">(4) Run makepkg in the working directory with the PKGBUILD file. &lt;/span>
&lt;span class="s2">$ makepkg (开始编译这前，可以编辑一下PKGBUILD文件，更改其默认安装目录到个人&lt;/span>
&lt;span class="s2">主目录下，用“--prefix＝...”来指定安装目录)&lt;/span>
&lt;span class="s2">(5) Install the newly built package with pacman.&lt;/span>
&lt;span class="s2">$ pacman -U ..pkg.gz (安装新编译好的包文件)&lt;/span>
&lt;span class="s2">(6) Send the package to your friends for bragging rights (or give it to an Archer &lt;/span>
&lt;span class="s2">so s/he can stick it in the master ABS tree).&lt;/span>
&lt;span class="s2">* 5.11 创建一个光盘镜像&lt;/span>
&lt;span class="s2">Linux 下创建一个光盘镜像真的很简单，基本上有两类方法：&lt;/span>
&lt;span class="s2">(1) 镜像的源文件在光盘上&lt;/span>
&lt;span class="s2">将光盘放入光驱，但不用 mount 指令加载它，然后：&lt;/span>
&lt;span class="s2">dd if=/dev/dvd of=dvd.iso # for dvd &lt;/span>
&lt;span class="s2">dd if=/dev/cdrom of=cd.iso # for cdrom &lt;/span>
&lt;span class="s2">dd if=/dev/scd0 of=cd.iso # if cdrom is scsi &lt;/span>
&lt;span class="s2">(2) 镜像的源文件在硬盘上或被 mount 到了硬盘上，比如在 /tmp/directory/：&lt;/span>
&lt;span class="s2">mkisofs -o cd.iso /tmp/directory/ &lt;/span>
&lt;span class="s2">如果这个源文件是一个DVD视频文件，那么要这样用：&lt;/span>
&lt;span class="s2">mkisofs -dvd-video -o dvd.iso /tmp/directory/&lt;/span>
&lt;span class="s2">关于mkisofs 的更多用法，还请参看手册：man mkisofs&lt;/span>
&lt;span class="s2">关于DVD视频光盘的编辑和创建，请参看：&lt;/span>
&lt;span class="s2">http://gecius.de/linux/dvd.html&lt;/span>
&lt;span class="s2">http://gentoo-wiki.com/HOWTO_Create_a_DVD:Filesystem&lt;/span>
&lt;span class="s2">6 服务器环境&lt;/span>
&lt;span class="s2">* 6.1 FTP服务&lt;/span>
&lt;span class="s2">(1) vsftpd&lt;/span>
&lt;span class="s2">FTP服务器的安装比较简单。直接用Pacman安装即可。当然，还必须配置好，才可正常安全的使用。&lt;/span>
&lt;span class="s2">vsftpd的使用和配置，可参考：&lt;/span>
&lt;span class="s2">http://vsftpd.beasts.org/&lt;/span>
&lt;span class="s2">http://gentoo-wiki.com/HOWTO_vsftpd&lt;/span>
&lt;span class="s2">http://www.uplinux.com/www/net/02/117.shtml&lt;/span>
&lt;span class="s2">(2) pureftpd&lt;/span>
&lt;span class="s2">参考http://www.pureftpd.org/project/pure-ftpd&lt;/span>
&lt;span class="s2"> http://www.chinaunix.net/jh/15/2424.html&lt;/span>
&lt;span class="s2">* 6.2 HTTP服务&lt;/span>
&lt;span class="s2">(1) 提供Web服务的程序&lt;/span>
&lt;span class="s2">能提供WEB服务的开源程序主要有：Apache httpd, Lighttpd, 和Nginx。&lt;/span>
&lt;span class="s2">Apache稳定，安全，使用者最多，但是运行时对内存、CPU的开销也是最高的。&lt;/span>
&lt;span class="s2">在静态网页支持上，lighttpd/nginx 比 apache 优胜很多。&lt;/span>
&lt;span class="s2">如果不考虑虚拟主机的安全设置问题，Nginx无疑是最好的选择，其次是Lighttpd。&lt;/span>
&lt;span class="s2">i) Apache httpd: 参见http://httpd.apache.org/&lt;/span>
&lt;span class="s2">ii) Lighttpd: 参见http://wiki.archlinux.org/index.php/Lighttpd_For_Both_SSL_And_Non-SSL&lt;/span>
&lt;span class="s2">iii) Nginx: 参见http://wiki.codemongers.com/Main&lt;/span>
&lt;span class="s2">(2) 动态网页的程序接口(CGI)：FastCGI：&lt;/span>
&lt;span class="s2">是HTTP服务器与机器上其他程序进行通信的一个接口。这个“其他程序”可以使用任何计算机语言&lt;/span>
&lt;span class="s2">来编写，它通过CGI这个接口从HTTP服务器取得输入，然后把运行的结果又通过CGI这个接口交给HTTP&lt;/span>
&lt;span class="s2">服务器，而HTTP服务器把这个结果送给浏览器。提供Web服务的程序都有CGI模块。&lt;/span>
&lt;span class="s2">不过CGI技术的通用性与效率不高，所以有了性能大幅提升的FastCGI。FastCGI要求提供Web服务的&lt;/span>
&lt;span class="s2">程序整合fcgi模块。&lt;/span>
&lt;span class="s2">参见http://wiki.archlinux.org/index.php/Apache_fastcgi&lt;/span>
&lt;span class="s2"> http://wiki.archlinux.org/index.php/Fastcgi_and_lighttpd&lt;/span>
&lt;span class="s2">(3) 动态网页的脚本语言&lt;/span>
&lt;span class="s2">PHP：参见http://wiki.archlinux.org/index.php/PHP&lt;/span>
&lt;span class="s2">Python: 在动态网页上的应用与PHP相似。&lt;/span>
&lt;span class="s2">JSP：Java语言支持，需安装JDK&lt;/span>
&lt;span class="s2">(4) 数据库&lt;/span>
&lt;span class="s2">MySQL: 当前国内用的较多的数据库。适合小访问量或个人使用。&lt;/span>
&lt;span class="s2">PostgreSQL: 世界上最先进，最稳定的数据库。能充分发挥出机器的潜能。更加适合大企业环境。&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/PostgreSQL&lt;/span>
&lt;span class="s2">(5) HTTP服务器的架构&lt;/span>
&lt;span class="s2">i) 不带数据库支持的轻量级WEB：Nginx/lighttpd + PHP/Python + FastCGI&lt;/span>
&lt;span class="s2">ii) 有数据库支持：Apache/lighttpd + PHP/Python + MySQL/PostgreSQL，也可再追加JSP的支持。&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/LAMP&lt;/span>
&lt;span class="s2">参见http://wiki.archlinux.org/index.php/Apache_fastcgi&lt;/span>
&lt;span class="s2"> http://wiki.archlinux.org/index.php/Fastcgi_and_lighttpd&lt;/span>
&lt;span class="s2"> http://www.knowsky.com/3232.html&lt;/span>
&lt;span class="s2">iii) 更加高效、可靠、稳定的WEB服务器。下面的架构图比较不错：&lt;/span>
&lt;span class="s2">-------- ------------ ------------- ---------------- --------------&lt;/span>
&lt;span class="s2">|客户端| ===&amp;gt; |负载均衡器| ===&amp;gt; |反向**/缓存| ===&amp;gt; |WEB服务器| ===&amp;gt; |数据库服务器|&lt;/span>
&lt;span class="s2">-------- ------------ ------------- ---------------- --------------&lt;/span>
&lt;span class="s2"> Nginx Squid Apache/lighttpd MySQL/PostgreSQL&lt;/span>
&lt;span class="s2"> +(PHP+eAccelerator) + memcache&lt;/span>
&lt;span class="s2">参看http://huangjt.jobui.com/blog/80186.html&lt;/span>
&lt;span class="s2">(6) 用WebDav替代传统的FTP服务&lt;/span>
&lt;span class="s2">WebDav是一个使用XML技术的基于HTTP协议的扩展协议，具备HTTP的所有优点，力图提供&lt;/span>
&lt;span class="s2">一个网页编辑的统一接口。用它替代传统的FTP服务，可以避免FTP存在的一些中文问题。&lt;/span>
&lt;span class="s2">参看：http://wiki.archlinux.org/index.php/Simple_WebDav_Setup&lt;/span>
&lt;span class="s2"> http://wiki.archlinux.org/index.php/WebDAV_authentication&lt;/span>
&lt;span class="s2">* 6.3 邮件服务&lt;/span>
&lt;span class="s2">PostFix：参看http://wiki.archlinux.org/index.php/PostFix_Howto&lt;/span>
&lt;span class="s2">* 6.4 文件共享&lt;/span>
&lt;span class="s2">文件共享的方法较多，机器上只要安装了任一网络文件系统就可以共享了。网络文件系统有：&lt;/span>
&lt;span class="s2">ftpfs, sshfs, shfs, smbfs, nfs, etc. &lt;/span>
&lt;span class="s2">当然，使用http服务来共享文件也未尝不可。&lt;/span>
&lt;span class="s2">(1) Shfs&lt;/span>
&lt;span class="s2">sshfs可以开机自动挂载，关机和重启时也可以自动卸载sshfs文件系统，但是它不能用mount来&lt;/span>
&lt;span class="s2">直接指定-t参数来挂载，因此也不能直接加到/etc/fstab中，而且用df也不能列出那样的分区。&lt;/span>
&lt;span class="s2">但是shfs解决了这个问题，它能像挂载普通分区那样挂载sshfs文件系统。它是通过内核的shfs&lt;/span>
&lt;span class="s2">模块来实现的，&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Shfs&lt;/span>
&lt;span class="s2">(2) Samba&lt;/span>
&lt;span class="s2">可帮助实现跨平台（Linux &amp;lt;---&amp;gt;Windows) 的文件共享和打印共享。&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Setting_up_Samba&lt;/span>
&lt;span class="s2"> http://www.samba.org/&lt;/span>
&lt;span class="s2">(3) NFS&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Nfs&lt;/span>
&lt;span class="s2">(2) rsync&lt;/span>
&lt;span class="s2">Rsync用于两台机器上文件的同步备份，它本身不算是共享程序，但它能起到共享的作用。通常与ssh合用。&lt;/span>
&lt;span class="s2">参看http://samba.anu.edu.au/rsync/&lt;/span>
&lt;span class="s2"> http://dz.adj.idv.tw/thread-48-1-4.html&lt;/span>
&lt;span class="s2">* 6.5 远程登录&lt;/span>
&lt;span class="s2">(1) OpenSSH/OpenSSH-chroot&lt;/span>
&lt;span class="s2">用 OpenSSH-chroot 基于Openssh，但添加了新特性，即可以创建一个chrootjail。chrootjail是单独划分&lt;/span>
&lt;span class="s2">出的一个空间，以限制远程登录者活动不超出此范围，更不会影响到主系统。所以比用 Openssh 更安全。&lt;/span>
&lt;span class="s2"># pacman -S openssh-chroot&lt;/span>
&lt;span class="s2"># mkdir /var/openssh_chroot&lt;/span>
&lt;span class="s2"># chroot_create /var/openssh_chroot (将chrootjail放到/var/openssh_chroot，或其它地方)&lt;/span>
&lt;span class="s2"># chroot_adduser USERNAME /var/openssh_chroot (创建远程登录者帐户，并为其指定chrootjail)&lt;/span>
&lt;span class="s2"># /etc/rc.d/sshd restart (手动重启sshd服务，也可将sshd添加到/etc/rc.conf中的DAEMON中去)&lt;/span>
&lt;span class="s2">如果远程机器是Unix-Like系统，可用：ssh &amp;lt;username&amp;gt;@localhost 来登入；如果是Windows, 可使用&lt;/span>
&lt;span class="s2">Putty, or pietty。&lt;/span>
&lt;span class="s2">参看http://wiki.archlinux.org/index.php/Openssh-chroot&lt;/span>
&lt;span class="s2">(2) OpenVPN&lt;/span>
&lt;span class="s2">* 6.6 安全问题&lt;/span>
&lt;span class="s2">(1) 防火墙 (Iptables)&lt;/span>
&lt;span class="s2">这个实在不是几句话能讲明白的。不过想提醒几句：要使Iptables发挥出最大作用，最好是在一台&lt;/span>
&lt;span class="s2">旧电脑装上NAT+Iptables，充当网关，然后自己的电脑跟此网关相连接。&lt;/span>
&lt;span class="s2">参看：http://wiki.archlinux.org/index.php/Firewalls&lt;/span>
&lt;span class="s2"> http://wiki.archlinux.org/index.php/Simple_stateful_firewall_HOWTO&lt;/span>
&lt;span class="s2"> http://gentoo-wiki.com/HOWTO_Iptables_for_newbies&lt;/span>
&lt;span class="s2"> http://iptables-tutorial.frozentux.net/iptables-tutorial.html&lt;/span>
&lt;span class="s2"> http://wiki.archlinux.org/index.php/High_Performance_Firewall/Nat_with_iptables_and_VLANs_and_iproute2&lt;/span>
&lt;span class="s2">(2) 入侵监测 (Snort)&lt;/span>
&lt;span class="s2">这个太复杂了。&lt;/span>
&lt;span class="s2">有兴趣可以看一看Toby Kohlenberg等编写的专著"&lt;/span>&lt;span class="nt">Snort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nt">Intrusion&lt;/span> &lt;span class="nt">Detection&lt;/span> &lt;span class="nt">and&lt;/span> &lt;span class="nt">Prevention&lt;/span> &lt;span class="nt">Toolkit&lt;/span>&lt;span class="err">"。&lt;/span>
&lt;span class="nt">电子书下载&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">rapidshare&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">files&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">27449819&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nt">Snort_Intrusion_Detection_and_Prevention_Toolkit_ertu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">rar&lt;/span>
&lt;span class="nt">参看http&lt;/span>&lt;span class="o">://&lt;/span>&lt;span class="nt">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">snort&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nc">org&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/pre>
&lt;/div></description></item><item><title>archlinux-支持iphone插线3G</title><link>https://svtter.cn/p/archlinux-%E6%94%AF%E6%8C%81iphone%E6%8F%92%E7%BA%BF3g/</link><pubDate>Tue, 02 Dec 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/archlinux-%E6%94%AF%E6%8C%81iphone%E6%8F%92%E7%BA%BF3g/</guid><description>&lt;ul>
&lt;li>本文出自&lt;a class="link" href="http://svtter.github.io" target="_blank" rel="noopener"
>svtter.github.io&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;em>度娘永远都不会告诉你真正的答案是什么。&lt;/em>&lt;/p>
&lt;p>因为没有了CMCC-EDU，用上了坑爹联通，所以现在习惯于手机USB上网了。。（博主套餐流量看个技术是可以的。。)&lt;/p>
&lt;p>然后问题就来了。。CentOS7上可以安稳的使用3G但是arch似乎不支持，百度了好久也没有找到。&lt;/p>
&lt;p>后来bing 了一下&lt;code>iphone arch linux&lt;/code>神奇的wiki就出来了，随后就申请了个帐号，准备在学习Linux的过程中学习英语。给wiki&lt;/p>
&lt;p>做点翻译还是可以的吧= =。&lt;/p>
&lt;p>方法很简单, 因为我用的是NetworkManager, 所以最简单而行之有效的方法是:&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>pacman -S libimobiledevice
pacman -S usbmuxd ifuse
&lt;/pre>
&lt;/div>
&lt;p>重启机器或者NetworkManager搞定。&lt;/p>
&lt;p>虽然无关技术以及学术痛痒，但是总感觉在Linux普及上尽了一份力= =&lt;/p></description></item><item><title>archlinux-安装笔记</title><link>https://svtter.cn/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B0/</link><pubDate>Sun, 30 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/archlinux-%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B0/</guid><description>&lt;ul>
&lt;li>本文出自&amp;lt;svtter.github.io&amp;gt;&lt;/li>
&lt;/ul>
&lt;p>花了一些时间安装arch，记录一下注意事项。&lt;/p>
&lt;h2 id="多重引导">多重引导
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>安装多重引导支持&lt;/p>
&lt;p>&lt;code>pacman -S os-prober&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更新grub&lt;/p>
&lt;p>&lt;code>grub-mkconfig -o /boot/grub/grub.cfg&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>写入mbr&lt;/p>
&lt;p>&lt;code>grub-install --target=i386-pc --recheck /dev/sda&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="图形化的网络服务">图形化的网络服务
&lt;/h2>&lt;p>&lt;code>systemctl enable NetWorkManager.service&lt;/code>&lt;/p>
&lt;h2 id="wifi配置">wifi配置
&lt;/h2>&lt;ul>
&lt;li>如果你想使用wifi（在图形界面下），首先你要停止dhcp服务&lt;code>systemctl stop dhcpcd.service&lt;/code>&lt;/li>
&lt;li>开机停止运行&lt;code>systemctl disable dhcpcd.service&lt;/code>&lt;/li>
&lt;li>我们之所以这样，是为了保证我们的NetWorkManager正常服务。&lt;/li>
&lt;/ul>
&lt;h2 id="session控制器">session控制器
&lt;/h2>&lt;p>我选择的是gdm，原因是slim我不太会配置。&lt;/p>
&lt;p>&lt;code>pacman -S gdm&lt;/code>&lt;/p>
&lt;p>另外patheon在我书写这篇blog的时候，还是存在不少bug.官方的wiki在这个时候也不是很好用了。期待patheon！&lt;/p>
&lt;p>&lt;strong>添加了官方给的patheon库，会出现一个gnome-lib的冲突&lt;/strong>&lt;/p>
&lt;h2 id="输入法的注意事项">输入法的注意事项
&lt;/h2>&lt;p>使用fcitx需要注意.xprofile的配置问题。&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS="@im=fcitx"
&lt;/pre>
&lt;/div>
&lt;p>其他的安装情况可以看看官方的wiki&lt;/p>
&lt;h2 id="sudoer的配置">sudoer的配置
&lt;/h2>&lt;p>使用pacman安装sudoer&lt;/p>
&lt;p>&lt;code>pacman -S sudo&lt;/code>&lt;/p>
&lt;p>编辑&lt;code>/etc/sudoers&lt;/code>，取消&lt;code>wheel&lt;/code>用户组的注释.&lt;/p>
&lt;h2 id="vim配置">vim配置
&lt;/h2>&lt;p>在&lt;strong>gvim&lt;/strong>中，直接使用synatic on而不用判断，否则会造成代码高亮失效。&lt;/p>
&lt;h2 id="locate配置">locate配置
&lt;/h2>&lt;p>安装以后发现&lt;strong>locate&lt;/strong>命令无法使用，安装&lt;code>pacman -S mlocate&lt;/code>&lt;/p>
&lt;h2 id="另外-mark一个项目gitbook-很好很强大">另外, mark一个项目:&lt;code>gitbook&lt;/code>, 很好很强大
&lt;/h2>&lt;p>应该涵盖了所有的我安装时候遇到的问题，如果还有什么问题，我再后续添加。&lt;/p></description></item><item><title>Linux-进程间的通信</title><link>https://svtter.cn/p/linux-%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/</link><pubDate>Fri, 28 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/</guid><description>&lt;ul>
&lt;li>本文出自&amp;lt;svtter.github.io&amp;gt;&lt;/li>
&lt;/ul>
&lt;h2 id="实验内容">实验内容
&lt;/h2>&lt;p>消息的创建，发送，和接收。&lt;/p>
&lt;h3 id="任务">&amp;lt;任务&amp;gt;
&lt;/h3>&lt;p>使用系统调用 msgget( ), megsnd( ), msgrev( )及 msgctl()编制一长度为 1K 的消息发送和接收的程序 。&lt;/p>
&lt;h3 id="程序设计">程序设计
&lt;/h3>&lt;ol>
&lt;li>为了便于操作和观察结, 用一个程序为&lt;strong>引子&lt;/strong> , 先后&lt;code>fork( )&lt;/code>两个子进程 , SERVER 和 CLIENT,进行通信。&lt;/li>
&lt;li>SERVER 端建立一个 Key 为 75 的消息队列,等待其他进程发来的消息。当遇到类型为 1 的消息,&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>则作为结束信号,取消该队列,并退出 SERVER 。SERVER 每接收到一个消息后显示一句 “(server)received”。
&lt;/code>&lt;/pre>
&lt;ol start="3">
&lt;li>CLIENT 端使用 Key 为 75 的消息队列,先后发送类型从 10 到 1 的消息,然后退出。最后的一个&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>消息,既是 SERVER 端需要的结束信号。CLIENT 每发送一条消息后显示一句“(client)sent”。
&lt;/code>&lt;/pre>
&lt;ol start="4">
&lt;li>父进程在 SERVER 和 CLIENT 均退出后结束。&lt;/li>
&lt;/ol>
&lt;h2 id="使用的函数">使用的函数
&lt;/h2>&lt;blockquote>
&lt;p>并非每次创建消息队列都会成功，所以重新添加-1情况的判断。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>可以使用&lt;code>ipcs -q&lt;/code>命令查看&lt;/p>&lt;/blockquote>
&lt;h2 id="源代码">源代码
&lt;/h2>&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;unistd.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;string.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;sys/types.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;sys/ipc.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;sys/msg.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;sys/wait.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#define MSGKEY 75&lt;/span>
&lt;span class="k">struct&lt;/span> &lt;span class="n">msgform&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">long&lt;/span> &lt;span class="n">mtype&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">char&lt;/span> &lt;span class="n">mtexe&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="p">}&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">msgqid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">CLIENT&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">msgqid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">msgget&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MSGKEY&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mo">0777&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="n">IPC_CREAT&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="n">msgqid&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">puts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"client error in build"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"client qid is: %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">msgqid&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mtype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"(client)sent mtype %ld.&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mtype&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">msgsnd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msgqid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strlen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mtexe&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">puts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"client exit..."&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">SERVER&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">msgqid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">msgget&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MSGKEY&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mo">0777&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="n">IPC_CREAT&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="n">msgqid&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"error in build.&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"server qid is: %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">msgqid&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">do&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">msgrcv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msgqid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1030&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"(server)received mtype %ld.&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mtype&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mtype&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">msgctl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msgqid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">IPC_RMID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">puts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"server exit..."&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span> &lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">SERVER&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="n">CLIENT&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h2 id="运行结果">运行结果
&lt;/h2>&lt;img alt="进程间的通信" src="https://i0.wp.com/ww3.sinaimg.cn/mw690/c53b1907jw1emqt8omadvj207n0demyj.jpg?w=625" data-recalc-dims="1" /></description></item><item><title>Linux-管道</title><link>https://svtter.cn/p/linux-%E7%AE%A1%E9%81%93/</link><pubDate>Fri, 21 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E7%AE%A1%E9%81%93/</guid><description>&lt;ul>
&lt;li>
&lt;p>本文出自&amp;lt;svtter.github.io&amp;gt;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>头文件&lt;/strong>: #include&amp;lt;unistd.h&amp;gt;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>使用方法&lt;/strong>: int pipe(int chan[2]);&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>说明&lt;/strong>: pipe会建立管道，并将文件描述词通过chan返回。一般chan[0]为管道的读取端，chan[1]是写入端。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>返回值&lt;/strong>: 成功返回0，失败返回-1，错误信息保存在errno中&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>错误信息&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>EMFILE 进程已用完文件描述词最大量。&lt;/li>
&lt;li>ENFILE 系统已无文件描述词可用。&lt;/li>
&lt;li>EFAULT 参数filedes数组地址不合法&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cm">/*=============================================================================&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Author: svtter - svtter@qq.com&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># QQ : 57180160&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Last modified: 2014-11-21 16:20&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Filename: 管道.c&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Description: &lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm">=============================================================================*/&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;unistd.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;signal.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="kt">char&lt;/span> &lt;span class="n">parent&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">"a message from parent"&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">char&lt;/span> &lt;span class="n">child&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">"a message from child"&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span> &lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">pid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">char&lt;/span> &lt;span class="n">buf&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="n">pipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">pipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">pid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pid&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">parent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">parent&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"%s&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">buf&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pid&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"%s&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">buf&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">child&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">child&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c2p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h2 id="运行结果">运行结果：
&lt;/h2>&lt;img alt="管道运行结果" src="https://i1.wp.com/ww3.sinaimg.cn/mw690/c53b1907jw1emivfwrkquj20cs05hwel.jpg?w=625" data-recalc-dims="1" /></description></item><item><title>Linux-同步互斥</title><link>https://svtter.cn/p/linux-%E5%90%8C%E6%AD%A5%E4%BA%92%E6%96%A5/</link><pubDate>Fri, 21 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E5%90%8C%E6%AD%A5%E4%BA%92%E6%96%A5/</guid><description>&lt;ul>
&lt;li>本文出自&amp;lt;svtter.github.io&amp;gt;&lt;/li>
&lt;/ul>
&lt;h2 id="使用pthread实现经典问题生产者消费者">使用pthread实现经典问题：生产者消费者
&lt;/h2>&lt;p>关于semaphore的相关信息就不再贴出来了。&lt;/p>
&lt;p>编译的时候记得&lt;code>-pthread&lt;/code>选项。&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cm">/*=============================================================================&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Author: svtter - svtter@qq.com&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># QQ : 57180160&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Last modified: 2014-10-03 20:35&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Filename: producer_consumer.cc&lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm"># Description: &lt;/span>
&lt;span class="cm">#&lt;/span>
&lt;span class="cm">=============================================================================*/&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstdio&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;unistd.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;semaphore.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;pthread.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;sys/types.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="cp">#define N 5&lt;/span>
&lt;span class="cp">#define item int&lt;/span>
&lt;span class="c1">// P/V操作&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_t&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">sem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">perror&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"P error!"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_t&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">sem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">perror&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"V error!"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">sem_t&lt;/span> &lt;span class="n">mutex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">sem_t&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">sem_t&lt;/span> &lt;span class="n">empty&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">item&lt;/span> &lt;span class="n">buffer&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">init_sem&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">sem_init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">mutex&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">sem_init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">full&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">sem_init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="nf">producer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">product&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="c1">//生成随机数字&lt;/span>
&lt;span class="n">product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rand&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// cout &amp;lt;&amp;lt; "producer running..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">mutex&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">buffer&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">product&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"producer produced %d @ %d pos&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">product&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">mutex&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">full&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="nf">consumer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">product&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">temp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="c1">// cout &amp;lt;&amp;lt; "consumer running..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">full&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">mutex&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">buffer&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">mutex&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"Consumer consumed %d @ %d pos&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">product&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="c1">//random num&lt;/span>
&lt;span class="n">srand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">NULL&lt;/span>&lt;span class="p">));&lt;/span>
&lt;span class="n">init_sem&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">error&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">pthread_t&lt;/span> &lt;span class="n">producer_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">consumer_t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pthread_create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">producer_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">producer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">error&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"error in create producer.&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"create producer success!&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">pthread_create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">consumer_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">consumer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">error&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"error in create consumer.&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"create consumer success!&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">pthread_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">producer_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">pthread_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">consumer_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h3 id="运行结果">运行结果
&lt;/h3>&lt;img alt="生产者消费者" src="https://i1.wp.com/ww2.sinaimg.cn/mw690/c53b1907jw1emiuwm4ev0j20es07cwfi.jpg?w=625" data-recalc-dims="1" />
&lt;h2 id="操作系统经典问题哲学家就餐问题">操作系统经典问题：哲学家就餐问题
&lt;/h2>&lt;p>mutex是c++11的新功能。记得添加C++11支持。(在运行结果中包含编译选项。)&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;mutex&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstdio&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;thread&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;semaphore.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="n">using&lt;/span> &lt;span class="n">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="cp">#define THINK(i) printf("ph[%d] is thinking...\n", i)&lt;/span>
&lt;span class="cp">#define EAT(i) printf("ph[%d] eats.\n", i)&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mutex&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">mt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mutex&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">mt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">unlock&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_t&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">sem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">perror&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"P error!"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_t&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">sem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem_post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sem&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">perror&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"V error!"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// 加入unistd.h出现问题，似乎与thread的兼容性比较差，于是重写&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">delay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kr">int&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">10000000&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">mutex&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="n">sem_t&lt;/span> &lt;span class="n">room&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">sem_init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">room&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">void&lt;/span> &lt;span class="nf">philosopher&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kr">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">THINK&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">room&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fork&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fork&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">EAT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;&lt;/span>&lt;span class="n">room&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fork&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fork&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">thread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">philosopher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="kr">thread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">philosopher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="kr">thread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">philosopher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="kr">thread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">philosopher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="kr">thread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">philosopher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">};&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">int&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h3 id="运行结果-1">运行结果
&lt;/h3>&lt;img alt="哲学家就餐" src="https://i1.wp.com/ww3.sinaimg.cn/mw690/c53b1907jw1emiwe5eqnyj20hq0b1q3w.jpg?w=625" data-recalc-dims="1" />
&lt;h2 id="操作系统经典问题读者写者问题">操作系统经典问题：读者写者问题
&lt;/h2>&lt;h3 id="读者优先">读者优先
&lt;/h3>&lt;ul>
&lt;li>使用了c++11的新特性thread&lt;/li>
&lt;/ul>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;mutex&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;thread&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">mutex&lt;/span> &lt;span class="n">mt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">wsem&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">readcount&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="cp">#define READ(a) cout &amp;lt;&amp;lt; a &amp;lt;&amp;lt; " is reading..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="cp">#define FINISH(a) cout &amp;lt;&amp;lt; a &amp;lt;&amp;lt; " finished reading." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="cp">#define WRITE cout &amp;lt;&amp;lt; "writing..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mutex&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">mt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mutex&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">mt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">unlock&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// 加入unistd.h出现问题，似乎与thread的兼容性比较差，于是重写&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">delay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">10000000&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">readcount&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">readcount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">READ&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">delay&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">readcount&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">FINISH&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">readcount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">write&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">WRITE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="n">delay&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">reader1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"svtter"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">reader2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"sr"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">reader3&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"yym"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">reader4&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"xiaoniu"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">writer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">reader1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">reader2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">reader3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">reader4&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h4 id="运行结果-2">运行结果
&lt;/h4>&lt;p>由于可以同时阅读，所以读者reading输出可能出现少许问题。&lt;/p>
&lt;img alt="运行结果" src="https://i2.wp.com/ww2.sinaimg.cn/mw690/c53b1907jw1emiwlff732j20hl08t3z6.jpg?w=625" data-recalc-dims="1" />
&lt;h3 id="写者优先">写者优先
&lt;/h3>&lt;hr>
&lt;ul>
&lt;li>使rsem中只有一个读者在等待，保证了如果有写者，写者优先写&lt;/li>
&lt;/ul>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;mutex&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;thread&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="cp">#define READ(a,i) cout &amp;lt;&amp;lt; a &amp;lt;&amp;lt; i&amp;lt;&amp;lt;" is reading..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="cp">#define FINR(a,i) cout &amp;lt;&amp;lt; a &amp;lt;&amp;lt; i&amp;lt;&amp;lt;" finished reading." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="cp">#define WRITE(a,i) cout &amp;lt;&amp;lt; a &amp;lt;&amp;lt;i&amp;lt;&amp;lt;" is writing..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="cp">#define FINW(a, i) cout &amp;lt;&amp;lt; a &amp;lt;&amp;lt;i&amp;lt;&amp;lt;" finished writing..." &amp;lt;&amp;lt; endl;&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mutex&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">mt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mutex&lt;/span> &lt;span class="o">&amp;&lt;/span>&lt;span class="n">mt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">mt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">unlock&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// 加入unistd.h出现问题，似乎与thread的兼容性比较差，于是重写&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">delay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">10000000&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">mutex&lt;/span> &lt;span class="n">mr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">wsem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rsem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mrc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mwc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">readcount&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">writecount&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mrc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">readcount&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">readcount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mrc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">READ&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mrc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">FINR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">readcount&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">readcount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mrc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mwc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">writecount&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">writecount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mwc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">WRITE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">FINW&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">P&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mwc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">writecount&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">writecount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rsem&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">V&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mwc&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">reader1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"svtter"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">writer1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"sr"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">writer2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"zs"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">thread&lt;/span> &lt;span class="n">writer3&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">"yym"&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">reader1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">writer1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">writer2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="n">writer3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h4 id="运行结果-3">运行结果
&lt;/h4>&lt;ul>
&lt;li>基本上结果就是写者写完，才会有读者阅读&lt;/li>
&lt;/ul>
&lt;img alt="写者优先" src="https://i0.wp.com/ww4.sinaimg.cn/mw690/c53b1907jw1emiwotocqij20hp0d7q4e.jpg?w=625" data-recalc-dims="1" /></description></item><item><title>Linux系统函数简介</title><link>https://svtter.cn/p/linux%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0%E7%AE%80%E4%BB%8B/</link><pubDate>Fri, 21 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0%E7%AE%80%E4%BB%8B/</guid><description>&lt;p>本文出自&amp;lt;svtter.github.io&amp;gt;&lt;/p>
&lt;p>系统调用函数说明、参数值及定义&lt;/p>
&lt;p>本文摘自老师的资料= =&lt;/p>
&lt;p>&lt;strong>使用这些函数的时候记得将头文件unistd.h包含到程序中&lt;/strong>&lt;/p>
&lt;h2 id="1fork">1、fork()
&lt;/h2>&lt;blockquote>
&lt;p>创建一个新进程&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int fork()&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中返回int取值意义如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>0:创建子进程,从子进程返回的id值大于0:从父进程返回的子进程id值 -1:创建失败&lt;/p>&lt;/blockquote>
&lt;h2 id="2lockffilesfunctionsize">2、lockf(files,function,size):
&lt;/h2>&lt;blockquote>
&lt;p>用作锁定文件的某些段或者整个文件,本函数适用的头文件为:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;unistd.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int lockf(files,function,size)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int files,function;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>long size;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:files是文件描述符:function是锁定和解锁;1表示锁定,0表示解锁。size是锁定和解锁的字节数,若用0,表示从文件的当前位置到文件尾。&lt;/p>&lt;/blockquote>
&lt;h2 id="3msggetkeyflag">3、msgget(key,flag):
&lt;/h2>&lt;blockquote>
&lt;p>获得一个消息的描述符,该描述符指定一个消息队列以便用于其他系统调用。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>该函数使用偷文件如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/msg.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int msgget(key,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;code>key_tkey;&lt;/code>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;code>int flag;&lt;/code>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>语法格式:msgqid=msgget(key,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:msgid是该系统调用返回的描述符,失败则返回-1;flag 本身由操作允许权和控制命令值相或得到。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>如:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;code>IP_CREAT|0400&lt;/code> 是否该队列应被创建;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;code>IP_EXCL |0400&lt;/code> 是否该队列的创建应是互斥的;等。&lt;/p>&lt;/blockquote>
&lt;h2 id="msgsndidmsgpsizeflag">msgsnd(id,msgp,size,flag):
&lt;/h2>&lt;blockquote>
&lt;p>发送一消息。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>该函数是用头文件如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/msg.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int msgnd(id,msgp,size,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int id,size,flag;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct msgbuf * msgp;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:id是返回消息队列的描述符;msgp是指向用户存储区的一个构造体指针,size指示由msgp&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>指向的数据结构中字符数组的长度;即消息的长度。这个数组的最大值由MSG-MAX系统可调用参数来确&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>定。flag规定当核心用尽内部缓冲空间时应执行的动作;若在标志flag中末设置IPC_NOWAIT位,则当&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>41该消息队列中字节数超过一最大值时,或系统范围的消息数超过某一最大值时,调用msgsnd进程睡眠。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>若是设置IPC_NOWAIT,则在此情况下,msgsnd立即返回。&lt;/p>&lt;/blockquote>
&lt;h2 id="msgrcvidmsgpsizetypeflag">msgrcv(id,msgp,size,type,flag):
&lt;/h2>&lt;blockquote>
&lt;p>接受一消息。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>该函数调用使用头文件如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/msg.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int msgrcv(id,msgp,size,type,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int id,size,type,flag;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct msgbuf * msgq;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct sgbuf{long mtpe;chat mtext[];};&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>语法格式:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>count=msgrcv(id,msgp,size,type,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:id是用来存放欲接收消息的拥护数据结构的地址;size是msgp中数据数组的大小; type是&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>用户要读的消息类型:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>type为0:接收该队列的第一个消息;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>type为正:接收类型type的第一个消息;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>type为负:接收小于或等于type绝对值的最低类型的第一个消息。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>flag规定倘若该队列无消息,核心应当做什么事,如果此时设置了IPC_NOWAIT标志,则立即返回,&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>若在flag中设置了MSG_NOERROR,且所接收的消息大小大于size,核心截断所接受的消息。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>count是返回消息正文的字节数。&lt;/p>&lt;/blockquote>
&lt;h2 id="msgctlidcmdbuf">msgctl(id,cmd,buf):
&lt;/h2>&lt;blockquote>
&lt;p>查询一个消息描述符的状态,设置它的状态及删除一个消息描述符。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>调用该函数使用头文件如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/msg.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int msgctl(id,cmd,buf)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int id,cmd;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct msgbuf * msgq;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct msqid_ds * buf;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:函数调用成功时返回0,调用不成功时返回-1。id用来识别该消息的描述符;cmd规定命令的&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>类型。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_START将与id相关联的消息队列首标读入buf。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_SET为这个消息序列设置有效的用户和小组标识及操作允许权和字节的数量。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_RMID删除id的消息队列。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>buf是含有控制参数或查询结果的用户数据结构的地址。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>附:msgid_ds结构定义如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct msgid_ds&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>{struct ipc_perm msg_perm; /&lt;em>许可权结构&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>shot padl[7];&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>由系统使用&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort onsg_qnum;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>队列上消息数&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort msg_qbytes;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>队列上最大字节数&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>42ushort msg_lspid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后发送消息的PID&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort msg_lrpid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后接收消息的PID&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>time_t msg__stime;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后发送消息的时间&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>time_t msg_rtime;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后接收消息的时间&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>me_t msg_ctime;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后更改时间&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>};&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct ipc_perm&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>{ushort uid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>当前用户id&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort gid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>当前进程组id&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort cuid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>创建用户id&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort cgid&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>创建进程组id&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort mode;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>存取许可权&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>{shot patl;long pad2} /&lt;em>由系统使用&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>};&lt;/p>&lt;/blockquote>
&lt;h2 id="shmgetkeysizeflag">shmget(key,size,flag):
&lt;/h2>&lt;blockquote>
&lt;p>获得一个共享存储区。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>该函数使用头文件如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/shm.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>语法格式:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>shmid=shmaget(key,size,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int shmaget(key,size,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>key_t key;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int size,flag;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:size是存储区的字节数,key和flag与系统调用msgget中的参数含义相同。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>附:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>操作允许权&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>八进制数&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>用户可读 00400&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>用户可读 00200&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>小组可读 00040&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>小组可读 00020&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其他可读 00004&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其他可读 00002&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>控制命令 值&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_CREAT&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>0001000&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_EXCL&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>0002000&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>如:shmid=shmget(key,size,(IPC_CREAT|0400));&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>创建一个关键字为key,长度为size的共享存储区。&lt;/p>&lt;/blockquote>
&lt;h2 id="shmatidaddrflag">shmat(id,addr,flag):
&lt;/h2>&lt;blockquote>
&lt;p>从逻辑上将一个共享存储区附接到进程的虚拟地址空间上。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>该函数调用使用头文件如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>43#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/msg.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>char * shmat(id,addr,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int id,flag;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>char * addr;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>语法格式:virtaddr=shmat(id,addr,flag)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:id是共享存储区的标识符,addr是用户要使用共享存储区附接的虚地址,若addr是0,系统&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>是否对应用户规定的地址做舍入操作。如果flag中设置了shm_rnd即表示操作系统在必要时舍去这个地&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>址。如果设置了shm_rdonly,即表示只允许读操作。viraddr是附接的虚地址。&lt;/p>&lt;/blockquote>
&lt;h2 id="shmdtaddr">shmdt(addr):
&lt;/h2>&lt;blockquote>
&lt;p>把一个共享存储区从指定进程的虚地址空间分开。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>调用该函数使用头文件:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/mhm.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int shmdt(addr)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>char * addr&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中,当调用成功时,返回0值,调用不成功,返回-1,addr是系统调用shmat所返回的地址。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>10、shmctl(id,cmd,buf):&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>对与共享存储区关联的各种参数进行操作,从而对共享存储区进行控制。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>调用该函数使用头文件:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/types.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/ipc.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;sy/shm.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int shmctl(id,cmd,buf)&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int id,cmd;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>struct shmid_ds * buf;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:调用成功返回0,否则返回-1。id为被共享存储区的标识符。cmd规定操作的类型。规定如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_STAT:返回包含在指定的shmid相关数据结构中的状态信息,并且把它放置在用户存储区中的_but&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>指针所指的数据结构中。执行此命令的进程必须有读取允许权。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_SET:对于指定的shmid,为它设置有效用户和小组标识和操作存取权。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>IPC_RMID:删除指定的shmid以及与它相关的共享存储区的数据结构。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SHM_LOCK:在内存中锁定指定的共享存储区,必须是超级用户才可以进行此项操作。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>Buf是一个用户级数据结构地址。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>附:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>shmid_ds&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>{struct ipc_perm shm_perm;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>允许权结构&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int shm_segsz;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>段大小&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int padl;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>由系统使用;&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort shm_lpid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后操作的进程id;&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort shm_cpid;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>创建者的进程id;&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ushort shm_nattch;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>当前附界数;&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>44short pad2;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>由系统使用;&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>time_t shm_atime;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后附接时间&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>time_t shm_dtime;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/&lt;em>最后段接时间&lt;/em>/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>time_t shm_ctime;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>/_最后修改时间*/&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>}&lt;/p>&lt;/blockquote>
&lt;h2 id="signalsigfunction">signal(sig,function):
&lt;/h2>&lt;blockquote>
&lt;p>允许调用进程控制软中断信号的处理。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>头文件为:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>#include&amp;lt;signal.h&amp;gt;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参数定义:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>signal(sig,function);&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>int sig;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>void(*func)();&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其中:sig的值是:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGHVP 挂起&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGINT 键盘按^c键或break键&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>键盘按quit键&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGQUIT&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGILL 非法指令&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGIOT IOT指令&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGEMT EMT指令&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGFPE 浮点运算溢出&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGKILL 要求终止进程&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGBUS 总线错&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>段违例&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGSEGV&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGSYS 系统调用参数错&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGPIPE 向无读者管道上写&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>闹钟&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGALRM&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>软件终结&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGTERM&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>用户定义信号&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGUSRI&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>第二个用户定义信号&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGUSR2&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGCLD 子进程死&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGPWR电源故障&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>function的解释如下:&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIG_DEL:缺省操作。对除SIGPWR和SIGCLD外所有信号的缺省操作是进程终结对信号&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIGQUIT,SIGILL,SIGTRA,SIGIOT,SIGEMT,SIGFPE,SIGBUS,SIGSEGV和SIGSYS它产生一内存映&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>像文件。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SIG_IGN:忽视该信号的出现。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>Function:在该进程中的一个函数地址,在核心返回用户态时,它以软中断信号的序号作为参数调用&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>该函数,对除了信号SIGILL,SIGTRAP和SIGTWR以外的信号,核心自动地重新设置软中断信号处理程序&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>的值为SIG_DEL,一个进程不能捕获SIGKILL信&lt;/p>&lt;/blockquote></description></item><item><title>解决无法在CentOS下的gvim中使用ibus输入中文</title><link>https://svtter.cn/p/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E5%9C%A8centos%E4%B8%8B%E7%9A%84gvim%E4%B8%AD%E4%BD%BF%E7%94%A8ibus%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87/</link><pubDate>Sat, 15 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E5%9C%A8centos%E4%B8%8B%E7%9A%84gvim%E4%B8%AD%E4%BD%BF%E7%94%A8ibus%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87/</guid><description>&lt;h1 id="问题">问题
&lt;/h1>&lt;p>之前在gvim中一直无法使用中文，格外痛苦，后来使用了vim-ibus插件之后，可以在vim中使用中文了，但是依然不能在gvim中使用，一直以为是两个软件冲突的&lt;/p>
&lt;p>问题，现在终于解决了。&lt;/p>
&lt;ul>
&lt;li>gvim version: vim-X11&lt;/li>
&lt;li>ibus version: 1.6&lt;/li>
&lt;/ul>
&lt;h1 id="解决方案">解决方案
&lt;/h1>&lt;ul>
&lt;li>问题出在：使用的vim插件中有插件与ibus冲突，但是奈何找不到X11的log（应该可以找到，找到再说。。）&lt;/li>
&lt;li>排查方式比较简单，使用&lt;code>:PluginInstall&lt;/code>,&lt;code>:PluginClean&lt;/code>即可(考虑到我使用vundle管理插件)&lt;/li>
&lt;li>去除相应的插件即可(比如现在冲突的是auto-pairs)。如果不想去除冲突插件，可以考虑使用vim-ibus，这个在shell下是可以使得很多冲突减少的。&lt;/li>
&lt;li>可能auto-pairs在不久的将来就会修复这个bug，请在具体环境下排查&lt;/li>
&lt;/ul></description></item><item><title>Linux-存储管理</title><link>https://svtter.cn/p/linux-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/</link><pubDate>Fri, 14 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/</guid><description>&lt;p>还未动笔&lt;/p></description></item><item><title>Linux-进程管理</title><link>https://svtter.cn/p/linux-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/</link><pubDate>Fri, 14 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/</guid><description>&lt;p>本文出自&amp;lt;svtter.github.io&amp;gt;&lt;/p>
&lt;h2 id="进程的创建">进程的创建
&lt;/h2>&lt;p>用于进程的创建。fork()的作用是，从&lt;strong>当前位置&lt;/strong>创建一个子进程，并执行。fork的返回值为子进程的pid&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">//父进程返回1， 子进程返回0&lt;/span>
&lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h3 id="运行结果">运行结果
&lt;/h3>&lt;img alt="运行结果" src="https://i1.wp.com/ww2.sinaimg.cn/mw690/c53b1907jw1emivyoryqoj205704d3yg.jpg?w=625" data-recalc-dims="1" />
&lt;h2 id="进程的控制">进程的控制
&lt;/h2>&lt;p>在这段代码中使用了lockf, 和wait函数。作用是什么呢？&lt;/p>
&lt;ul>
&lt;li>
&lt;p>lockf顾名思义是锁定file. &lt;code>lockf(1, 1, 0)&lt;/code>锁定资源，&lt;code>lockf(1, 0, 0)&lt;/code>释放资源。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>wait作用为等待子进程的返回信息。wait中的signal用于接受进程的返回信号，即exit(0)中的0&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;wait.h&amp;gt;&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="c1">// 利用lockf(1, 1, 0)锁定输出设备&lt;/span>
&lt;span class="c1">// lockf(1, 0, 0)解锁输出设备&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"parent%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">//confirm the father killed after child&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fork&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"son %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">wait&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">//&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">"grandchild%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">"&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">lockf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/pre>
&lt;/div>
&lt;h3 id="运行结果-1">运行结果
&lt;/h3>&lt;img alt="运行结果" src="https://i2.wp.com/ww4.sinaimg.cn/mw690/c53b1907jw1emivx24ob6j20hy0dhgmh.jpg?w=625" data-recalc-dims="1" /></description></item><item><title>Linux -基础学习笔记-2</title><link>https://svtter.cn/p/linux-%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/</link><pubDate>Wed, 12 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/</guid><description>&lt;h1 id="linux用户和用户组">Linux用户和用户组
&lt;/h1>&lt;ul>
&lt;li>简单解释：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">文件权限&lt;/th>
&lt;th style="text-align: left">连接数&lt;/th>
&lt;th style="text-align: left">文件所有者&lt;/th>
&lt;th style="text-align: left">文件所属用户组&lt;/th>
&lt;th style="text-align: left">文件大小&lt;/th>
&lt;th style="text-align: left">文件最后被修改的时间&lt;/th>
&lt;th style="text-align: left">文件名&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">-rw-r–r–&lt;/td>
&lt;td style="text-align: left">1&lt;/td>
&lt;td style="text-align: left">root&lt;/td>
&lt;td style="text-align: left">root&lt;/td>
&lt;td style="text-align: left">42304&lt;/td>
&lt;td style="text-align: left">Sep 4 18:26&lt;/td>
&lt;td style="text-align: left">install.log&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="第一列">第一列
&lt;/h2>&lt;ul>
&lt;li>第一个字符代表文件类型，如果是d代表目录，-代表文件，l代表链接文件，b代表可供存储的接口设备，c代表串行设备，如键盘鼠标等。&lt;/li>
&lt;li>三组分别代表本用户的权限，同用户组的权限，和其他用户组的权限&lt;/li>
&lt;li>root的权限无限大&lt;/li>
&lt;li>权限对于目录，文件是不同的；&lt;/li>
&lt;/ul>
&lt;h2 id="第二列">第二列
&lt;/h2>&lt;ul>
&lt;li>表示有多少文件名连接这个节点。i-node.&lt;/li>
&lt;/ul>
&lt;h2 id="第三列">第三列
&lt;/h2>&lt;h2 id="第四列">第四列
&lt;/h2>&lt;h2 id="第五列">第五列
&lt;/h2>&lt;ul>
&lt;li>这个文件的容量大小，默认单位为B&lt;/li>
&lt;/ul>
&lt;h2 id="第六列">第六列
&lt;/h2>&lt;ul>
&lt;li>表示这个文件的创建日期或者最近修改日期。&lt;/li>
&lt;/ul>
&lt;h2 id="tag">tag
&lt;/h2>&lt;ul>
&lt;li>使用&lt;code>ls -l --full-time&lt;/code>可以显示完整。&lt;/li>
&lt;/ul>
&lt;h1 id="改变文件属性和权限">改变文件属性和权限
&lt;/h1>&lt;p>使用如下命令：&lt;/p>
&lt;p>– chgrp&lt;/p>
&lt;p>– chmod&lt;/p>
&lt;p>– chown&lt;/p>
&lt;div class="codehilite">
&lt;pre>&lt;span>&lt;/span>因为太过熟悉，这里就不记录了。
&lt;/pre>
&lt;/div>
&lt;ul>
&lt;li>基本文件权限的数字&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">权限&lt;/th>
&lt;th style="text-align: left">二进制&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">r:4&lt;/td>
&lt;td style="text-align: left">100&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">w:2&lt;/td>
&lt;td style="text-align: left">010&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">x:1&lt;/td>
&lt;td style="text-align: left">001&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="tag-1">tag
&lt;/h2>&lt;ul>
&lt;li>&lt;code>cp&lt;/code>是不会改变用户权限，因此要另外给予权限。&lt;/li>
&lt;li>&lt;code>chown root:root install.log&lt;/code>可以使用如此权限来更改用户名，用户的所属。
&lt;ul>
&lt;li>&lt;code>chown root.root install.log&lt;/code>亦可&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="tag-2">TAG:
&lt;/h1>&lt;ul>
&lt;li>如果想让系统语言变成英文，可以到&lt;code>/etc/sysconfig/i18n&lt;/code>修改，使得LANG这个变量变成&lt;code>en_US&lt;/code>即可&lt;/li>
&lt;/ul></description></item><item><title>Linux-SELinux-httpd无法访问</title><link>https://svtter.cn/p/linux-selinux-httpd%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/</link><pubDate>Mon, 10 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-selinux-httpd%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/</guid><description>&lt;h1 id="目录的问题">目录的问题
&lt;/h1>&lt;p>由于SELinux造成的httpd中的目录无法访问，可以使用&lt;/p>
&lt;ul>
&lt;li>&lt;code>chcon -R -t httpd_user_content_t &amp;lt;path to web files&amp;gt;&lt;/code>&lt;/li>
&lt;li>&lt;code>chcon -R -t httpd_sys_content_t &amp;lt;path to web files&amp;gt;&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>mark一个网站()[http://www.jb51.net/os/RedHat/1303.html]&lt;/p>
&lt;h1 id="文件夹访问权限">文件夹访问权限
&lt;/h1>&lt;p>以上方法解决了SELinux的问题，但是我的目录依然没有访问权限。&lt;/p>
&lt;p>然后看了一下文件的基本属性: &lt;code>-rw-r--r--. 1 root root 21 11月 11 12:27 index.html&lt;/code>&lt;/p>
&lt;p>应该也是没有问题的。&lt;/p>
&lt;h1 id="再查selinux">再查SElinux
&lt;/h1>&lt;p>随后使用&lt;code>cat /var/log/messages&lt;/code>探索一番，依然没有找到问题所在——SELinux没有报错。&lt;/p>
&lt;p>防火墙的问题？不是阿。因为我本身是在内网访问，防火墙应该不会出问题。&lt;/p>
&lt;p>那应该是什么问题呢？&lt;/p>
&lt;h1 id="配置文件">配置文件
&lt;/h1>&lt;p>终于在配置文件中找到了问题。&lt;/p>
&lt;p>apache在进入2.4.*以后，不再使用&lt;code>Allow from all&lt;/code>这种形式了，取而代之，使用&lt;code>Require from granted&lt;/code>这种格式。晕，就是在此处，&lt;code>&amp;lt;Directory&amp;gt;&lt;/code>没有设置好，坑了好久阿。。&lt;/p>
&lt;p>相对的我这几天一直都在deepin下开发——因为&lt;code>apt-get&lt;/code>得到的apache之前比较习惯，此外deepin没有se也是省了很多功夫。不过通过这一次，总算是把问题解决了！&lt;/p>
&lt;p>鼓励！&lt;/p></description></item><item><title>Linux – CentOS-安装更新并重启</title><link>https://svtter.cn/p/linux-centos-%E5%AE%89%E8%A3%85%E6%9B%B4%E6%96%B0%E5%B9%B6%E9%87%8D%E5%90%AF/</link><pubDate>Sun, 09 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-centos-%E5%AE%89%E8%A3%85%E6%9B%B4%E6%96%B0%E5%B9%B6%E9%87%8D%E5%90%AF/</guid><description>&lt;p>有时候我们用&lt;code>yum update&lt;/code>更新了系统，但是选项中【一般gnome-session】的’安装更&lt;/p>
&lt;p>依然固执的在那里我们应该怎么办？&lt;/p>
&lt;p>打开’软件更新’即可。&lt;/p></description></item><item><title>Linux – 基础学习笔记(1)</title><link>https://svtter.cn/p/linux-%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</link><pubDate>Sun, 09 Nov 2014 01:00:00 +0800</pubDate><guid>https://svtter.cn/p/linux-%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</guid><description>&lt;h1 id="linux基础学习笔记">Linux基础学习笔记
&lt;/h1>&lt;p>以鸟哥的私房菜为基础进行学习。&lt;/p>
&lt;p>用Linux有接近两年的时间了，还是很水，于是决定从头开始，认真学习基础。&lt;/p>
&lt;h2 id="date的基础用法">date的基础用法
&lt;/h2>&lt;ul>
&lt;li>&lt;code>date +%H:%M&lt;/code> 显示&lt;code>19:54&lt;/code>&lt;/li>
&lt;li>&lt;code>date +%Y/%m/%d&lt;/code> 显示&lt;code>2014/11/09&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="使用man进行查询">使用man进行查询
&lt;/h2>&lt;p>&lt;code>man + (command)&lt;/code>&lt;/p>
&lt;p>一般，2代表系统内核可调用的函数与工具，3代表一些常用的函数，7代表惯例与协议，例如Linux文件系统，网络协议，ASCcode，8代表系统管理员可用命令，9&lt;/p>
&lt;p>代表与kernel有关的文件。&lt;/p>
&lt;p>man的操作方式和vi差不多，而info的操作方式则更接近于emacs（= =莫非又是两大党的斗争？！）&lt;/p>
&lt;h2 id="数据同步写入磁盘sync">数据同步写入磁盘：sync
&lt;/h2>&lt;p>在Linux中为了避免过多对磁盘的I/O，所以很多操作并未马上写入硬盘，所以使用sync进行写入。对于root而言，则是更新整个磁盘的数据了。&lt;/p>
&lt;h2 id="shutdown命令关机">shutdown命令关机
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>立即关机&lt;code>shutdown -h now&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>定时关机&lt;code>shutdown -h 20:25&lt;/code> —会在20:25分关机，如果超过了这个时间使用这个命令，则会在第二天的这个时间关机。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再过10分钟关机&lt;code>shutdown -h +10&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>警告所有用户&lt;code>shutdown -k 'this system will reboot.'&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重启，并警告所有用户&lt;code>shutdown -r +30 'The system will reboot.'&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="三种执行等级">三种执行等级
&lt;/h2>&lt;blockquote>
&lt;p>因为CentOS7使用systemd启动，所以可能并不支持。&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>run level 0 关机&lt;/li>
&lt;li>run level 3 纯命令行&lt;/li>
&lt;li>run level 5 含有图形界面&lt;/li>
&lt;li>run level 6 重启&lt;/li>
&lt;/ul>
&lt;p>因此，可以使用&lt;code>init 0&lt;/code>来关闭系统。&lt;/p></description></item></channel></rss>